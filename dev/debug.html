<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>디버깅 페이지</title>
</head>
<body>
    <h1>디버깅 페이지</h1>
    <div id="debug-info"></div>
    
    <script>
        const API_BASE = 'http://localhost:8081/api';
        
        async function debugAPI() {
            const debugDiv = document.getElementById('debug-info');
            debugDiv.innerHTML = '<p>API 연결 테스트 중...</p>';
            
            try {
                // 1. 전체 데이터 조회
                const dataResponse = await fetch(`${API_BASE}/data`);
                const data = await dataResponse.json();
                debugDiv.innerHTML += `<h3>1. 전체 데이터:</h3><pre>${JSON.stringify(data, null, 2)}</pre>`;
                
                // 2. 가게 목록 조회
                const storesResponse = await fetch(`${API_BASE}/stores`);
                const stores = await storesResponse.json();
                debugDiv.innerHTML += `<h3>2. 가게 목록:</h3><pre>${JSON.stringify(stores, null, 2)}</pre>`;
                
                // 3. 현재 가게 설정 조회
                if (data.currentStoreId) {
                    const settingsResponse = await fetch(`${API_BASE}/settings?storeId=${data.currentStoreId}`);
                    const settings = await settingsResponse.json();
                    debugDiv.innerHTML += `<h3>3. 현재 가게 설정 (${data.currentStoreId}):</h3><pre>${JSON.stringify(settings, null, 2)}</pre>`;
                }
                
                // 4. 슈퍼어드민 정보 조회
                const superadminResponse = await fetch(`${API_BASE}/superadmin/info`);
                if (superadminResponse.ok) {
                    const superadmin = await superadminResponse.json();
                    debugDiv.innerHTML += `<h3>4. 슈퍼어드민 정보:</h3><pre>${JSON.stringify(superadmin, null, 2)}</pre>`;
                } else {
                    debugDiv.innerHTML += `<h3>4. 슈퍼어드민 정보:</h3><p style="color: red;">오류: ${superadminResponse.status} ${superadminResponse.statusText}</p>`;
                }
                
            } catch (error) {
                debugDiv.innerHTML += `<h3>오류:</h3><p style="color: red;">${error.message}</p>`;
            }
        }
        
        // 페이지 로드 시 디버깅 시작
        window.addEventListener('load', debugAPI);
    </script>
</body>
</html>
