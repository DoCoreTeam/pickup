# Release Notes v1.5.1

## 📅 릴리즈 정보
- **버전**: v1.5.1
- **코드명**: "Stability Guard"
- **릴리즈 날짜**: 2025-11-10
- **타입**: Patch Update

---

## 🎯 주요 하이라이트

1. **멀티 AI 오케스트레이터** – OpenAI·Gemini와 폴백 전략으로 항상 일관된 SEO 제안 제공
2. **슈퍼어드민용 SEO & A/B 테스트 편집기** – AI 제안을 적용/편집/저장하는 통합 워크플로우
3. **관리자 UI 안정성 보강** – 섹션 순서/도메인 설정 등 로딩 루틴 안정화 및 자잘한 404 제거

---

## ✨ 새로운 기능

### 1. 데이터 안정성 & AI 폴백
- 커넥션 풀(`pg.Pool`) 기반 DB 연결 관리
- 트랜지언트 오류(SQLSTATE, 네트워크) 자동 감지 및 풀 리셋
- AI 호출 실패 시에도 길이 제한을 지키는 기본 SEO/AB 제안 생성

### 2. 슈퍼어드민 SEO & A/B 편집기
- `/admin`에서 가게별 SEO 메타·체크리스트를 AI 추천과 함께 편집/저장
- A/B 테스트 실험/카피·가드레일을 구조화된 폼으로 관리
- 가게 미선택 시 편집기 자동 비활성화 및 안내 노출

### 3. 모니터링 & 디버깅
- `POST /api/debug/log` 엔드포인트로 프론트 디버그 로그 수집
- 대시보드에서 `sendFrontendDebugLog` 유틸을 통해 상황별 로그 전송
- 렌더링 실패 시 상세 경고 및 백엔드 로그 연동

---

## 🔧 개선 사항

- `stores` 조회를 단일 CTE 기반 SQL로 재구성하여 카운트/데이터/통계를 동일 조건으로 처리
- JSONB 필드(`basic`, `discount`, `delivery`, `pickup` 등) 파싱 유틸 정비
- 가게 대표 점주 재지정 시 링크 테이블 역할(`primary`/`manager`) 자동 정렬

---

## 🐛 버그 수정

1. 시스템 이벤트 로그가 존재하지 않는 `store_id`로 저장되던 문제 수정
2. 가게 목록 렌더링 실패 시 원인을 파악할 수 없던 이슈 해결 (디버그 로그 추가)
3. 중복 점주 데이터로 인한 페이지네이션 불일치 현상 방지

---

## 📊 통계

- **수정된 파일**: 8개
- **신규 API**: 1개 (`POST /api/debug/log`)
- **테스트**: 수동 시나리오 (가게 목록 조회, 대표 점주 변경, 디버그 로그 전송)

---

## 🚀 업그레이드 가이드

1. **서버 재시작**
    ```bash
    pkill -f "src/backend/api_server.js"
    cd /Users/dohyeonkim/작업용/pickup
    npm run start:api > server_runtime.log 2>&1 &
    ```
2. **브라우저 강제 새로고침**  
   `Cmd + Shift + R` (Mac) 또는 `Ctrl + Shift + R` (Windows/Linux)

---

## 🔮 다음 버전 (v1.5.2) 계획

1. 가게 목록 프론트엔드 단에서 캐시 무효화 전략 추가
2. 점주 계정 관리 UI 정리 및 검색 개선
3. 활동 로그 필터링/검색 UX 향상

---

**v1.5.1 릴리즈 완료!** 🎉

