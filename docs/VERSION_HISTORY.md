# 📚 Version History

**프로젝트**: Pickup - 가게 관리 시스템  
**관리**: DoCoreTeam  
**최종 업데이트**: 2025-01-13

---

## 📋 버전 목록

### v1.5.35 (2025-01-13) - 🏠 관리자 홈 페이지 추가 (초기 로딩 최적화)
**상태**: ✅ 개발 완료

**주요 개선사항**:
- 🏠 관리자 홈 페이지 추가: 좌측 상단 "관리자 메뉴" 클릭 시 홈으로 이동
- ⚡ 초기 로딩 최적화: 페이지 로드 시 홈 페이지만 표시 (빠른 시작)
- 📋 최근 가게 목록: 홈에서 최근 6개 가게만 빠르게 로드
- 🎯 빠른 액션 카드: 주요 기능으로 빠르게 이동

**해결된 문제**:
- ✅ 초기 로딩 시간 단축 (홈 페이지만 표시)
- ✅ 불필요한 데이터 로드 제거 (최근 가게 6개만)
- ✅ 사용자 경험 개선 (빠른 시작, 직관적인 네비게이션)

**기술적 변경**:
- `home` 섹션 추가 (홈 페이지 UI)
- `loadHomeRecentStores()` 함수 추가 (최근 6개 가게만 로드)
- 초기 로드 시 홈 페이지 자동 표시
- "관리자 메뉴" 제목 클릭 시 홈으로 이동
- 빠른 액션 카드: 가게 관리, 대시보드, 기본 정보, 배달앱 설정

**홈 페이지 구성**:
- 환영 메시지 (그라데이션 배경)
- 빠른 액션 카드 (4개)
- 최근 가게 목록 (6개, 클릭 시 가게 선택)

**성능 개선 효과**:
- 초기 로딩 시간 90% 단축 예상 (홈 페이지만 표시)
- 네트워크 트래픽 95% 감소 예상 (최근 6개만 로드)
- 사용자 경험 대폭 개선 (즉시 사용 가능)

---

### v1.5.34 (2025-01-13) - 🚀 섹션별 지연 로딩 구현 (필요한 데이터만 로드)
**상태**: ✅ 개발 완료

**주요 개선사항**:
- 🚀 섹션별 지연 로딩: 메뉴 클릭 시에만 해당 섹션의 데이터 로드
- 📦 필드 선택적 로딩: API에 `fields` 파라미터 추가로 필요한 필드만 요청
- ⚡ 초기 로딩 최적화: 페이지 로드 시 불필요한 데이터 로드 제거
- 📊 통계 데이터 분리: 대시보드 섹션에서만 통계용 전체 가게 목록 로드

**해결된 문제**:
- ✅ 한번에 모든 정보를 가져오는 문제 해결
- ✅ 초기 로딩 시간 단축 (불필요한 데이터 로드 제거)
- ✅ 네트워크 트래픽 감소 (필요한 데이터만 전송)
- ✅ 서버 부하 감소 (불필요한 쿼리 제거)

**기술적 변경**:
- 백엔드 `/api/settings`에 `fields` 파라미터 추가 (예: `?fields=basic,delivery`)
- `loadSettings()` 함수에 필드 선택 기능 추가
- `showSection()` 함수에서 섹션별 필요한 필드만 요청
- 초기 페이지 로드 시 `loadSettings()` 호출 제거
- 통계용 전체 가게 목록을 대시보드 섹션에서만 로드
- 섹션별 로드 플래그로 중복 요청 방지

**섹션별 로드 필드**:
- `basic`: basic, businessHours
- `delivery`: delivery
- `images`: images
- `discount`: discount, pickup
- `section-order`: sectionOrder
- `dashboard`: 통계용 전체 가게 목록

**성능 개선 효과**:
- 초기 로딩 시간 70-80% 단축 예상
- 네트워크 트래픽 60-70% 감소 예상
- 서버 쿼리 수 감소로 응답 시간 단축

---

### v1.5.33 (2025-01-13) - ⚡ 프론트엔드 성능 최적화 및 로딩 UX 개선
**상태**: ✅ 개발 완료

**주요 개선사항**:
- ⚡ 전역 로딩 바 추가 (상단 고정, 진행률 표시)
- 🎨 API 요청 자동 감지 및 로딩 바 표시
- 🖼️ 이미지 Lazy Loading 구현 (Intersection Observer)
- 🔍 검색 입력 Debounce 적용 (불필요한 API 요청 감소)
- 💾 브라우저 캐싱 설정 (Cache-Control, ETag, 304 응답)

**해결된 문제**:
- ✅ 느린 처리 속도로 인한 사용자 경험 저하
- ✅ 로딩 상태를 알 수 없어 답답함
- ✅ 불필요한 API 요청으로 인한 서버 부하
- ✅ 이미지 로딩으로 인한 초기 로딩 시간 증가
- ✅ 정적 자산 재다운로드로 인한 대역폭 낭비

**기술적 변경**:
- 전역 로딩 바 관리자: 여러 요청 동시 추적, 최소 표시 시간 보장
- `apiRequest` 함수에 로딩 바 통합 (성공/에러 상태 표시)
- `debounce`/`throttle` 유틸리티 함수 추가
- Intersection Observer를 사용한 이미지 Lazy Loading
- 정적 파일 서빙 시 파일 타입별 캐싱 정책 적용
- ETag 기반 304 Not Modified 응답 지원

**성능 개선 효과**:
- 검색 입력 Debounce로 API 요청 수 70% 감소 예상
- 이미지 Lazy Loading으로 초기 로딩 시간 단축
- 브라우저 캐싱으로 재방문 시 로딩 속도 향상
- 로딩 바로 사용자 피드백 개선

---

### v1.5.32 (2025-01-13) - 🚀 Railway 환경 대응: QR 코드 Base64 DB 저장
**상태**: ✅ 개발 완료

**주요 개선사항**:
- 🚀 Railway 환경 대응: QR 코드를 Base64로 변환하여 DB에 저장
- 💾 파일 시스템 대신 DB에 저장하여 컨테이너 재시작 시에도 유지
- 🔄 `/qr/` 경로 요청 시 DB에서 Base64를 읽어 이미지로 반환
- 📦 파일 시스템 의존성 제거로 Railway 환경에서 안정적 동작

**해결된 문제**:
- ✅ Railway 컨테이너 재시작 시 QR 코드 파일이 사라지는 문제
- ✅ QR 코드 생성 후 저장이 안되는 문제 (파일 시스템 제약)
- ✅ 다운로드는 되지만 다시 돌아오면 QR이 없어지는 문제
- ✅ Railway의 임시 파일 시스템 제약 문제

**기술적 변경**:
- `generateDomainQR` 함수에서 `QRCode.toFile` 대신 `QRCode.toDataURL` 사용
- QR 코드를 Base64로 변환하여 DB의 `qrCode.base64` 필드에 저장
- `/qr/` 경로 핸들러에서 파일명에서 storeId 추출 후 DB에서 Base64 조회
- Base64 데이터를 Buffer로 변환하여 PNG 이미지로 반환
- 하위 호환성을 위해 파일 시스템도 여전히 지원

---

### v1.5.31 (2025-01-13) - 🛡️ QR 코드 생성 및 저장 안정성 강화
**상태**: ✅ 개발 완료

**주요 개선사항**:
- 🛡️ QR 코드 파일 생성 후 실제 저장 여부 확인 로직 추가
- 📏 빈 파일 검증 및 자동 삭제 로직 추가
- 🔄 DB 저장 실패 시 생성된 파일 자동 롤백
- 💾 filepath를 DB에 저장하여 파일 추적 가능하도록 개선

**해결된 문제**:
- ✅ QR 코드 생성 후 파일이 저장되지 않는 문제
- ✅ 빈 파일이 생성되는 문제
- ✅ DB 저장 실패 시 고아 파일이 남는 문제
- ✅ 파일과 DB 정보 불일치 문제

**기술적 변경**:
- `generateDomainQR` 함수에서 파일 생성 후 `fs.existsSync`로 존재 여부 확인
- 파일 크기 확인으로 빈 파일 검증 및 삭제
- DB 저장 실패 시 `try-catch`로 파일 롤백 처리
- QR 코드 정보에 `filepath` 필드 추가

---

### v1.5.30 (2025-01-13) - 🐛 QR 코드 파일 검증 및 자동 정리 개선
**상태**: ✅ 개발 완료

**주요 개선사항**:
- 🐛 QR 코드 URL과 filepath 모두에서 파일명 추출 로직 개선
- 🗑️ 존재하지 않는 QR 파일 발견 시 DB에서도 자동 제거
- 🔄 QR 코드 정보 일관성 유지 (파일과 DB 동기화)

**해결된 문제**:
- ✅ QR 코드 이미지 404 에러 (파일이 없는데 DB에 정보가 남아있는 경우)
- ✅ QR 코드 URL에서 파일명 추출 실패 문제
- ✅ 존재하지 않는 QR 파일로 인한 UI 오류

**기술적 변경**:
- `/api/settings`에서 QR 코드 URL과 filepath 모두 확인
- URL에서 파일명 추출 시 쿼리 파라미터 제거 로직 추가
- 파일이 없으면 DB에서도 QR 코드 정보 자동 제거

---

### v1.5.29 (2025-01-13) - ⚡ 설정 조회 쿼리 최적화 (실제 성능 개선)
**상태**: ✅ 개발 완료

**주요 개선사항**:
- ⚡ `/api/settings` 엔드포인트 쿼리 수 대폭 감소 (3개 → 1개)
- 🚀 stores와 store_settings를 하나의 JOIN 쿼리로 통합
- 🗑️ 불필요한 owners 조회 제거 (settings에서는 불필요)
- 📊 실제 데이터베이스 부하 감소로 응답 시간 단축

**해결된 문제**:
- ✅ `/api/settings` API 타임아웃 문제 (근본 원인 해결)
- ✅ 불필요한 쿼리 실행으로 인한 성능 저하
- ✅ 디버그 로그 속도와 유사한 빠른 응답 시간 달성

**기술적 변경**:
- `getStoreSettingsOptimized` 함수 추가: stores와 store_settings를 하나의 쿼리로 JOIN
- `/api/settings` 엔드포인트에서 최적화된 함수 사용
- 기존: `getStoreById` (stores 조회 + owners 조회) + `getStoreSettings` (store_settings 조회) = 3개 쿼리
- 변경: `getStoreSettingsOptimized` (stores + store_settings JOIN) = 1개 쿼리

---

### v1.5.28 (2025-01-13) - ⚡ 설정 조회 성능 최적화 및 QR 코드 파일 검증
**상태**: ✅ 개발 완료

**주요 개선사항**:
- ⚡ `/api/settings` 엔드포인트 성능 최적화
- 🔄 `getStoreById`와 `getStoreSettings`를 병렬 실행으로 변경
- 🛡️ QR 코드 파일 존재 여부 검증 추가
- 📝 존재하지 않는 QR 파일에 대한 404 에러 방지

**해결된 문제**:
- ✅ `/api/settings` API 타임아웃 문제
- ✅ QR 코드 이미지 404 에러 (파일이 없을 때)
- ✅ 존재하지 않는 QR 파일로 인한 UI 오류

**기술적 변경**:
- `getSettings` 함수에서 `Promise.all`을 사용하여 병렬 쿼리 실행
- QR 코드 파일 존재 여부를 `fs.existsSync`로 확인
- 파일이 없으면 QR 코드 정보를 빈 값으로 초기화

---

### v1.5.27 (2025-01-13) - ⚡ 가게 목록 조회 성능 최적화
**상태**: ✅ 개발 완료

**주요 개선사항**:
- ⚡ `/api/stores` 엔드포인트 성능 대폭 개선
- 🔄 COUNT와 Summary 쿼리 통합으로 쿼리 수 감소
- 📊 필터링된 결과 기반으로 Summary 계산
- 🚀 응답 시간 단축 (2분+ → 수 초)

**해결된 문제**:
- ✅ `/api/stores` API 응답이 매우 느린 문제 (2분 이상)
- ✅ 가게 선택이 안되는 문제
- ✅ 연결된 점주 정보가 표시되지 않는 문제
- ✅ 타임아웃 에러 발생

**기술적 변경**:
- `getStores` 함수에서 COUNT와 Summary 쿼리를 하나로 통합
- Summary 쿼리를 필터링된 결과 기반으로 계산하도록 변경
- 불필요한 중복 쿼리 제거로 데이터베이스 부하 감소

---

### v1.5.26 (2025-01-13) - 🐛 API 요청 AbortError 처리 개선
**상태**: ✅ 개발 완료

**주요 개선사항**:
- 🐛 `AbortError` 처리 로직 개선
- 🔄 요청 취소 시 불필요한 재시도 방지
- 📝 타임아웃 에러 메시지 개선
- 🧹 타임아웃 정리 로직 강화

**해결된 문제**:
- ✅ `AbortError: signal is aborted without reason` 콘솔 에러
- ✅ 요청 취소 시 불필요한 재시도로 인한 성능 저하
- ✅ 타임아웃 발생 시 명확한 에러 메시지 부재

**기술적 변경**:
- `apiRequest` 함수에서 `AbortError` 감지 및 처리
- 타임아웃 정리 로직을 try-catch 블록 내부로 이동
- `AbortError` 발생 시 재시도하지 않고 즉시 처리
- 타임아웃 시 사용자 친화적 에러 메시지 제공

---

### v1.1.3 (2025-10-26) - 🎨 UI Clarity Enhancement
**상태**: ✅ 개발 완료 (커밋 대기)

**주요 개선사항**:
- 🎨 UI 순서 변경 페이지 선명도 개선 (opacity: 1)
- 📐 form-header 구조 개선 (세로 배치)
- 📝 텍스트 스타일 명확화
- 🚚 배달앱 설정 페이지 일관성 개선
- 🎯 모든 섹션 헤더 디자인 시스템 통일

**기술적 변경**:
- CSS: `#section-order .settings-form { opacity: 1; }`
- CSS: `.form-header { flex-direction: column; }`
- CSS: `.order-item { background: #ffffff; }`
- CSS: `.delivery-grid-section { background: white; }`

**문서**:
- 📄 `docs/RELEASE_NOTES_v1.1.3.md`

---

### v1.1.2 (2025-10-25) - 🧹 Final Project Structure Optimization
**상태**: ✅ 배포 완료

**주요 개선사항**:
- 🧹 프로젝트 구조 최적화
- 📁 모든 문서를 `docs/` 디렉토리로 통합
- 🗑️ 불필요한 파일 제거 (dev/, .compatibility-*.json)
- 🛡️ 14개 호환성 테스트 모두 통과

**삭제된 파일**:
- `dev/debug-main.html`
- `dev/debug.html`
- `dev/test-logo.svg`
- `.compatibility-baseline.json` (299KB)
- `.compatibility-monitor.json` (299KB)

**문서**:
- 📄 `docs/RELEASE_NOTES_v1.1.2.md`
- 📄 `docs/CLEAN_PROJECT_STRUCTURE.md`

**Git Tag**: `v1.1.2`

---

### v1.1.1 (2025-10-25) - 🐛 Critical Bug Fixes
**상태**: ✅ 배포 완료

**주요 개선사항**:
- 🐛 기본 정보 저장 로직 개선
- 🔧 `/api/activity-logs` POST 엔드포인트 구현
- 📞 `callStore()` 함수 추가
- 🎨 토스트 알림 중복 제거
- 🗑️ 중복 파일 정리

**해결된 문제**:
- ✅ 기본 정보가 새로고침 시 삭제되는 문제
- ✅ 배달앱 설정 변경 시 기본 정보 삭제 문제
- ✅ `/api/activity-logs` 404 에러
- ✅ `logData` 스코프 에러
- ✅ `callStore is not defined` 에러

**문서**:
- 📄 `docs/RELEASE_NOTES_v1.1.1.md`
- 📄 `docs/ACTIVITY_LOG_FIX_REPORT.md`
- 📄 `docs/CONSOLE_ERROR_APOLOGY.md`

**Git Tag**: `v1.1.1`

---

### v1.1.0 (2025-10-25) - ✨ Major Feature Enhancements
**상태**: ✅ 배포 완료

**주요 개선사항**:
- ✨ DB 데이터 → 폼 자동 매핑 기능
- 🔄 실시간 데이터 동기화
- 🎨 UI/UX 개선
- 🛡️ 데이터 무결성 보장

**새로운 기능**:
- `loadUserInfo()` 함수
- `resetFormWithUserData()` 함수
- `/api/users/:id` 엔드포인트
- 설정 캐시 시스템
- URL 파라미터 변경 감지

**문서**:
- 📄 `docs/RELEASE_NOTES_v1.1.0.md`
- 📄 `docs/PREFILL_REPORT.md`

**Git Tag**: `v1.1.0`

---

### v1.0.0 (2025-10-24) - 🎉 Initial Release
**상태**: ✅ 배포 완료

**주요 기능**:
- 🏪 가게 관리 시스템
- 🚚 배달앱 설정
- 🎉 할인 설정
- 📍 픽업 안내
- 🔐 슈퍼어드민 인증
- 📊 활동 로그

**기술 스택**:
- Backend: Python (Flask-like HTTP Server)
- Frontend: Vanilla JavaScript
- Database: JSON File Storage
- Deployment: Railway

**문서**:
- 📄 `docs/RELEASE_NOTES_v1.0.0.md`
- 📄 `docs/DEPLOYMENT_GUIDE.md`
- 📄 `docs/PROJECT_STRUCTURE_PLAN.md`

**Git Tag**: `v1.0.0`

---

## 📊 버전별 통계

| 버전 | 릴리즈 날짜 | 주요 변경 | 파일 수정 | 커밋 수 |
|------|------------|----------|----------|---------|
| v1.1.3 | 2025-10-26 | UI 명확성 개선 | 1 | 2 (대기) |
| v1.1.2 | 2025-10-25 | 프로젝트 정리 | 10+ | 5 |
| v1.1.1 | 2025-10-25 | 버그 수정 | 5 | 8 |
| v1.1.0 | 2025-10-25 | 기능 개선 | 3 | 12 |
| v1.0.0 | 2025-10-24 | 초기 릴리즈 | 전체 | 50+ |

---

## 🎯 버전 명명 규칙

### Semantic Versioning (SemVer)
**형식**: `MAJOR.MINOR.PATCH`

- **MAJOR**: 호환성이 깨지는 큰 변경
- **MINOR**: 하위 호환성을 유지하는 기능 추가
- **PATCH**: 하위 호환성을 유지하는 버그 수정

### 예시
- `1.0.0` → `1.1.0`: 새로운 기능 추가 (하위 호환)
- `1.1.0` → `1.1.1`: 버그 수정 (하위 호환)
- `1.1.1` → `2.0.0`: 큰 변경 (호환성 깨짐)

---

## 📈 개발 타임라인

```
2025-10-24  v1.0.0  🎉 초기 릴리즈
    |
    ├─ 가게 관리 시스템 구축
    ├─ 배달앱 설정 기능
    ├─ 할인/픽업 안내 기능
    └─ 슈퍼어드민 인증
    
2025-10-25  v1.1.0  ✨ 기능 개선
    |
    ├─ DB 데이터 자동 매핑
    ├─ 실시간 동기화
    └─ UI/UX 개선
    
2025-10-25  v1.1.1  🐛 버그 수정
    |
    ├─ 기본 정보 저장 로직 개선
    ├─ API 엔드포인트 구현
    └─ 중복 파일 정리
    
2025-10-25  v1.1.2  🧹 프로젝트 정리
    |
    ├─ 문서 체계화
    ├─ 불필요한 파일 제거
    └─ 호환성 검증
    
2025-10-26  v1.1.3  🎨 UI 명확성 개선
    |
    ├─ 선명도 개선
    ├─ 레이아웃 구조 개선
    └─ 디자인 시스템 통일
```

---

## 🔮 향후 계획

### v1.2.0 (예정)
- 📊 대시보드 통계 기능
- 📈 실시간 주문 현황
- 🔔 알림 시스템
- 📱 모바일 앱 연동

### v1.3.0 (예정)
- 🎨 테마 커스터마이징
- 🌐 다국어 지원
- 📊 고급 분석 기능
- 🔐 권한 관리 시스템

### v2.0.0 (예정)
- 🏗️ 아키텍처 개선
- 🚀 성능 최적화
- 🔄 실시간 동기화
- 📦 플러그인 시스템

---

## 📞 지원 및 문의

**프로젝트 관리**: DoCoreTeam  
**기술 지원**: AI Assistant  
**문서**: `docs/` 디렉토리 참조  
**이슈 리포트**: GitHub Issues

---

## 🎉 감사의 말

**v1.1.3까지 함께해주신 모든 분들께 감사드립니다!**

특별히 감사드립니다:
- 🙏 사용자 피드백을 주신 분들
- 💡 아이디어를 제공해주신 분들
- 🐛 버그를 발견해주신 분들
- 📝 문서 개선에 기여하신 분들

**🚀 앞으로도 더 나은 서비스를 위해 노력하겠습니다!**

---

**마지막 업데이트**: 2025-10-26  
**다음 버전**: v1.2.0 (예정)  
**현재 안정 버전**: v1.1.2  
**개발 버전**: v1.1.3 (커밋 대기)


