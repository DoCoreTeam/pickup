# π›΅οΈ Compatibility Guardian - νΈν™μ„± λ³΄μ¥ μ‹μ¤ν…

## π“‹ ν„μ¬ μ •μƒ λ™μ‘ μƒνƒ (Baseline)

### μ„λ²„ μƒνƒ
- HTTP μ„λ²„: ν¬νΈ 8080 (`python3 -m http.server 8080`)
- API μ„λ²„: ν¬νΈ 8081 (`python3 src/backend/api_server.py`)
- CORS μ§€μ›: OPTIONS λ©”μ„λ“ κµ¬ν„ μ™„λ£

### API μ—”λ“ν¬μΈνΈ (κ³µκ° μΈν„°νμ΄μ¤)
```
GET  /api/data                    - μ „μ²΄ λ°μ΄ν„° μ΅°ν
GET  /api/stores                  - κ°€κ² λ©λ΅ μ΅°ν
GET  /api/current-store           - ν„μ¬ κ°€κ² μ΅°ν
GET  /api/settings?storeId=xxx    - κ°€κ² μ„¤μ • μ΅°ν
POST /api/stores                  - κ°€κ² μ¶”κ°€
POST /api/stores/update           - κ°€κ² μμ •
POST /api/stores/delete           - κ°€κ² μ‚­μ 
POST /api/current-store/set       - ν„μ¬ κ°€κ² μ„¤μ •
POST /api/settings/update         - μ„¤μ • μ—…λ°μ΄νΈ
POST /api/superadmin/check        - μνΌμ–΄λ“λ―Ό λ΅κ·ΈμΈ
POST /api/superadmin/update       - μνΌμ–΄λ“λ―Ό μ •λ³΄ μ—…λ°μ΄νΈ
OPTIONS /*                        - CORS preflight
```

### λ°μ΄ν„° μ¤ν‚¤λ§ (JSON)
```json
{
  "superadmin": {
    "username": "string",
    "password": "string", 
    "createdAt": "ISO8601",
    "lastModified": "ISO8601"
  },
  "stores": [
    {
      "id": "store_μ«μ_λ¬Έμμ—΄",
      "name": "string",
      "subtitle": "string",
      "phone": "string",
      "address": "string",
      "createdAt": "ISO8601",
      "lastModified": "ISO8601"
    }
  ],
  "currentStoreId": "string|null",
  "settings": {
    "storeId": {
      "basic": {
        "storeName": "string",
        "storeSubtitle": "string", 
        "storePhone": "string",
        "storeAddress": "string"
      },
      "discount": {
        "discountEnabled": "boolean",
        "discountTitle": "string",
        "discountDescription": "string"
      },
      "delivery": {
        "ttaengUrl": "string",
        "baeminUrl": "string", 
        "coupangUrl": "string",
        "yogiyoUrl": "string",
        "deliveryOrder": ["string"]
      },
      "pickup": {
        "pickupEnabled": "boolean",
        "pickupTitle": "string",
        "pickupDescription": "string"
      },
      "images": {
        "mainLogo": "string",
        "menuImage": "string"
      }
    }
  },
  "deliveryOrders": {},
  "images": {}
}
```

### URL λΌμ°ν…
```
/                           β†’ κ΄€λ¦¬μ νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰νΈ (μ¤ν† μ–΄ ID μ—†μ)
/?store=storeId            β†’ κ°€κ² νμ΄μ§€ ν‘μ‹
/admin                     β†’ κ΄€λ¦¬μ νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰νΈ
/admin/dashboard.html      β†’ κ΄€λ¦¬μ λ€μ‹λ³΄λ“
/admin/login.html          β†’ λ΅κ·ΈμΈ νμ΄μ§€
```

### DOM μ”μ† (κ³µκ° μΈν„°νμ΄μ¤)
- `#store-name` - κ°€κ²λ… ν‘μ‹
- `#store-subtitle` - κ°€κ² λ¶€μ λ© ν‘μ‹
- `#store-phone` - μ „ν™”λ²νΈ ν‘μ‹
- `#menu-modal` - λ©”λ‰΄ λ¨λ‹¬
- `#phone-modal` - μ „ν™” λ¨λ‹¬
- `.delivery-app-button` - λ°°λ‹¬μ•± λ²„νΌλ“¤

## π”’ νΈν™μ„± κ·μΉ™ (NON-NEGOTIABLE)

### 1. API νΈν™μ„±
- β… κΈ°μ΅΄ μ—”λ“ν¬μΈνΈ μ κ±°/μ΄λ¦„λ³€κ²½ κΈμ§€
- β… κΈ°μ΅΄ ν•„λ“ μ κ±°/μ΄λ¦„λ³€κ²½/νƒ€μ…λ³€κ²½ κΈμ§€
- β… μƒ ν•„λ“λ” optional, κΈ°λ³Έκ°’ μ κ³µ
- β… κΈ°μ΅΄ μ‘λ‹µ κµ¬μ΅° μ μ§€

### 2. λ°μ΄ν„° μ¤ν‚¤λ§ νΈν™μ„±
- β… κΈ°μ΅΄ ν•„λ“ μ κ±°/μ΄λ¦„λ³€κ²½ κΈμ§€
- β… μƒ ν•„λ“λ” optional
- β… κΈ°μ΅΄ λ°μ΄ν„° κµ¬μ΅° μ μ§€

### 3. URL λΌμ°ν… νΈν™μ„±
- β… κΈ°μ΅΄ URL ν¨ν„΄ μ μ§€
- β… κΈ°μ΅΄ μΏΌλ¦¬ νλΌλ―Έν„° μ μ§€
- β… κΈ°μ΅΄ λ¦¬λ‹¤μ΄λ ‰νΈ λ΅μ§ μ μ§€

### 4. DOM μ”μ† νΈν™μ„±
- β… κΈ°μ΅΄ ID/ν΄λμ¤λ… λ³€κ²½ κΈμ§€
- β… κΈ°μ΅΄ μ΄λ²¤νΈ ν•Έλ“¤λ¬ μ μ§€
- β… κΈ°μ΅΄ λ¨λ‹¬ λ™μ‘ μ μ§€

### 5. μ„λ²„ μ„¤μ • νΈν™μ„±
- β… ν¬νΈ λ²νΈ λ³€κ²½ κΈμ§€ (8080, 8081)
- β… μ„λ²„ μ‹μ‘ λ°©μ‹ μ μ§€
- β… CORS μ„¤μ • μ μ§€

## π§ νΈν™μ„± ν…μ¤νΈ μ²΄ν¬λ¦¬μ¤νΈ

### API ν…μ¤νΈ
- [ ] λ¨λ“  κΈ°μ΅΄ μ—”λ“ν¬μΈνΈ μ •μƒ μ‘λ‹µ
- [ ] κΈ°μ΅΄ λ°μ΄ν„° μ¤ν‚¤λ§ μ μ§€
- [ ] CORS preflight μ •μƒ λ™μ‘
- [ ] μ—λ¬ μ‘λ‹µ ν•μ‹ μ μ§€

### ν”„λ΅ νΈμ—”λ“ ν…μ¤νΈ
- [ ] κ΄€λ¦¬μ νμ΄μ§€ λ΅κ·ΈμΈ/λ΅κ·Έμ•„μ›ƒ
- [ ] κ°€κ² λ©λ΅ λ΅λ“/κ΄€λ¦¬
- [ ] κ°€κ² νμ΄μ§€ ν‘μ‹
- [ ] λ©”λ‰΄/μ „ν™” λ¨λ‹¬ λ™μ‘
- [ ] λ°°λ‹¬μ•± λ§ν¬ λ™μ‘

### ν†µν•© ν…μ¤νΈ
- [ ] μ „μ²΄ μ›ν¬ν”λ΅μ° μ •μƒ
- [ ] λ¨λ‹¬ μƒνΈμ‘μ© μ •μƒ
- [ ] λ°μ΄ν„° μ €μ¥/λ΅λ“ μ •μƒ

## π¨ νκ·€ λ°©μ§€ μ²΄ν¬λ¦¬μ¤νΈ

### λ³€κ²½ μ „ ν™•μΈμ‚¬ν•­
- [ ] κΈ°μ΅΄ κΈ°λ¥ μν–¥λ„ λ¶„μ„
- [ ] νΈν™μ„± μν–¥ λ²”μ„ νμ•…
- [ ] λ΅¤λ°± κ³„ν μλ¦½

### λ³€κ²½ ν›„ ν™•μΈμ‚¬ν•­
- [ ] κΈ°μ΅΄ ν…μ¤νΈ 100% ν†µκ³Ό
- [ ] μƒ κΈ°λ¥ ν…μ¤νΈ μ¶”κ°€
- [ ] μ„±λ¥ μν–¥ μ—†μ
- [ ] λ¬Έμ„ μ—…λ°μ΄νΈ

### λ°°ν¬ μ „ ν™•μΈμ‚¬ν•­
- [ ] μ „μ²΄ μ‹μ¤ν… ν…μ¤νΈ
- [ ] νΈν™μ„± μ²΄ν¬λ¦¬μ¤νΈ ν†µκ³Ό
- [ ] λ΅¤λ°± μ‹λ‚λ¦¬μ¤ κ²€μ¦

## π“ λ³€κ²½ λ΅κ·Έ ν…ν”λ¦Ώ

### νΈν™μ„± λ³€κ²½μ‚¬ν•­
```markdown
## [λ‚ μ§] λ³€κ²½μ‚¬ν•­

### μ¶”κ°€ (Additive Only)
- μƒ κΈ°λ¥/ν•„λ“: μ„¤λ…
- μƒ μ—”λ“ν¬μΈνΈ: μ„¤λ…

### λ³€κ²½ (Breaking Change κΈμ§€)
- κΈ°μ΅΄ κΈ°λ¥ μμ •: μ„¤λ… (ν•μ„ νΈν™μ„± μ μ§€)

### μ κ±° (Deprecation Only)
- νκΈ° μμ • κΈ°λ¥: μ„¤λ… (λ€μ²΄ κ²½λ΅ μ κ³µ)

### νΈν™μ„± λ³΄μ¥
- κΈ°μ΅΄ API/μ¤ν‚¤λ§ μ μ§€
- κΈ°μ΅΄ URL/λΌμ°ν… μ μ§€
- κΈ°μ΅΄ DOM μ”μ† μ μ§€
```

## π”§ μλ™ν™” λ„κµ¬

### νΈν™μ„± κ²€μ¦ μ¤ν¬λ¦½νΈ
```bash
#!/bin/bash
# νΈν™μ„± κ²€μ¦ μλ™ν™”

echo "π›΅οΈ νΈν™μ„± κ²€μ¦ μ‹μ‘..."

# 1. API μ—”λ“ν¬μΈνΈ ν…μ¤νΈ
echo "π“΅ API μ—”λ“ν¬μΈνΈ ν…μ¤νΈ..."
curl -s http://localhost:8081/api/data | jq . > /dev/null || exit 1
curl -s http://localhost:8081/api/stores | jq . > /dev/null || exit 1

# 2. CORS ν…μ¤νΈ
echo "π CORS ν…μ¤νΈ..."
curl -s -X OPTIONS http://localhost:8081/api/stores \
  -H "Origin: http://localhost:8080" \
  -H "Access-Control-Request-Method: GET" | grep -q "200 OK" || exit 1

# 3. ν”„λ΅ νΈμ—”λ“ ν…μ¤νΈ
echo "π–¥οΈ ν”„λ΅ νΈμ—”λ“ ν…μ¤νΈ..."
curl -s http://localhost:8080/ | grep -q "κ΄€λ¦¬μ νμ΄μ§€" || exit 1

echo "β… λ¨λ“  νΈν™μ„± κ²€μ¦ ν†µκ³Ό!"
```

## π€ λ°°ν¬ ν”„λ΅μ„Έμ¤

### 1. κ°λ° λ‹¨κ³„
- νΈν™μ„± κ·μΉ™ μ¤€μ
- κΈ°μ΅΄ ν…μ¤νΈ μ μ§€
- μƒ ν…μ¤νΈ μ¶”κ°€

### 2. ν…μ¤νΈ λ‹¨κ³„
- νΈν™μ„± μ²΄ν¬λ¦¬μ¤νΈ μ‹¤ν–‰
- μ „μ²΄ μ‹μ¤ν… ν…μ¤νΈ
- μ„±λ¥ ν…μ¤νΈ

### 3. λ°°ν¬ λ‹¨κ³„
- μ μ§„μ  λ°°ν¬
- λ¨λ‹ν„°λ§
- λ΅¤λ°± μ¤€λΉ„

### 4. λ°°ν¬ ν›„
- νΈν™μ„± λ¨λ‹ν„°λ§
- μ‚¬μ©μ ν”Όλ“λ°± μμ§‘
- λ¬Έμ  λ°μƒ μ‹ μ¦‰μ‹ λ΅¤λ°±

## π“ λΉ„μƒ μ—°λ½μ²

### νΈν™μ„± λ¬Έμ  λ°μƒ μ‹
1. μ¦‰μ‹ λ³€κ²½ μ¤‘λ‹¨
2. μ›μΈ λ¶„μ„
3. λ΅¤λ°± κ³„ν μλ¦½
4. λ€μ• μ μ‹

### μΉμΈ μ—†μ΄ μ§„ν–‰ κ°€λ¥ν• λ³€κ²½
- μ£Όμ„ μ¶”κ°€/μμ •
- λ΅κ·Έ λ©”μ‹μ§€ κ°μ„ 
- ν…μ¤νΈ μ½”λ“ μ¶”κ°€
- λ¬Έμ„ μ—…λ°μ΄νΈ

### μΉμΈ ν•„μ”ν• λ³€κ²½
- API μ—”λ“ν¬μΈνΈ λ³€κ²½
- λ°μ΄ν„° μ¤ν‚¤λ§ λ³€κ²½
- URL λΌμ°ν… λ³€κ²½
- DOM μ”μ† λ³€κ²½
- μ„λ²„ μ„¤μ • λ³€κ²½

---

**β οΈ κ²½κ³ : μ΄ κ·μΉ™μ„ μ„λ°ν•λ©΄ μ‹μ¤ν… μ•μ •μ„±μ— μ‹¬κ°ν• μν–¥μ„ λ―ΈμΉ  μ μμµλ‹λ‹¤.**
