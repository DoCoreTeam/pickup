<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í¥ÄÎ¶¨Ïûê ÌéòÏù¥ÏßÄ</title>
    <!-- SortableJS ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Î™®Îã¨ Ïä§ÌÉÄÏùº */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 0;
            border: none;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            color: white;
            border-radius: 12px 12px 0 0;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: white;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s;
        }
        
        .modal-close:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .modal-body {
            padding: 24px;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            background-color: #f9fafb;
            border-radius: 0 0 12px 12px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        .admin-sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            position: relative;
            transition: transform 0.3s ease;
            height: 100vh;
            overflow-y: auto;
        }
        
        .sidebar-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: #2c3e50;
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .sidebar-toggle:hover {
            background: #34495e;
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .sidebar-overlay.active {
            display: block;
        }
        
        .sidebar-footer {
            flex-shrink: 0;
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            background: #2c3e50;
        }
        
        .version-info {
            text-align: center;
            margin-bottom: 12px;
        }
        
        .version-badge {
            display: inline-block;
            background: rgba(255,255,255,0.1);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            color: rgba(255,255,255,0.8);
            font-weight: 500;
        }
        
        .release-notes-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }
        
        .release-notes-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.5);
        }

        .admin-header {
            background: white;
            padding: 20px 30px;
            border-bottom: 1px solid #e1e5e9;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-info h1 {
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .header-info p {
            color: #666;
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .admin-content {
            flex: 1;
            padding: 30px;
        }

        .status-message {
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 12px 20px;
            margin-bottom: 20px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .admin-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: none; /* Ï¥àÍ∏∞ÏóêÎäî Î™®Îì† ÏÑπÏÖò Ïà®ÍπÄ */
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 24px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }
        
        .section-title svg {
            color: #667eea;
            flex-shrink: 0;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s;
            display: inline-block;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .activity-logs-list {
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #f9f9f9;
        }

        .log-entry {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            background: white;
            margin-bottom: 2px;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .log-action {
            font-weight: 600;
            color: #2c3e50;
        }

        .log-time {
            font-size: 12px;
            color: #666;
        }

        .log-description {
            color: #555;
            font-size: 14px;
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .log-description-short {
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100%;
        }
        
        .log-description-full {
            display: none;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            max-height: 300px;
            overflow-y: auto;
            padding: 12px;
            background: #f8f9fa;
            border-left: 3px solid #3498db;
            border-radius: 4px;
            margin-top: 8px;
            position: relative;
        }
        
        .log-description-full.expanded {
            display: block;
        }

        .log-details {
            font-size: 12px;
            color: #666;
            background: #f8f9fa;
            padding: 10px 12px;
            border-radius: 4px;
            margin-top: 8px;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            max-height: 200px;
            overflow-y: auto;
            line-height: 1.5;
            border-left: 3px solid #95a5a6;
        }

        .log-type-store { border-left: 4px solid #3498db; }
        .log-type-settings { border-left: 4px solid #9b59b6; }
        .log-type-image { border-left: 4px solid #e67e22; }
        .log-type-system { border-left: 4px solid #95a5a6; }
        .log-type-qr { border-left: 4px solid #27ae60; }
        .log-type-ai { border-left: 4px solid #f39c12; }
        .log-type-admin { border-left: 4px solid #e74c3c; }

        .log-toggle-btn {
            background: transparent;
            color: #3498db;
            border: 1px solid #3498db;
            padding: 6px 16px;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 8px;
            transition: all 0.3s;
            display: inline-block;
        }

        .log-toggle-btn:hover {
            background: #3498db;
            color: white;
        }
        
        .log-toggle-btn::before {
            content: '‚ñº ';
            font-size: 10px;
            margin-right: 4px;
        }
        
        .log-toggle-btn.expanded::before {
            content: '‚ñ≤ ';
        }

        .subtitle-toggle-btn {
            background: transparent;
            color: #3498db;
            border: 1px solid #e0e0e0;
            padding: 4px 10px;
            border-radius: 3px;
            font-size: 12px;
            cursor: pointer;
            margin-left: 8px;
            transition: all 0.3s;
            vertical-align: middle;
        }

        .subtitle-toggle-btn:hover {
            background: #f0f0f0;
            border-color: #3498db;
        }
        
        .subtitle-toggle-btn::after {
            content: ' ‚ñº';
            font-size: 9px;
        }
        
        .subtitle-toggle-btn.expanded::after {
            content: ' ‚ñ≤';
        }

        .store-subtitle {
            max-width: 100%;
            word-wrap: break-word;
            overflow-wrap: break-word;
            line-height: 1.5;
        }
        
        .subtitle-short {
            display: inline;
            color: #555;
        }
        
        .subtitle-full {
            display: none;
            color: #555;
            padding: 8px 12px;
            background: #f8f9fa;
            border-left: 3px solid #3498db;
            border-radius: 4px;
            margin-top: 8px;
            line-height: 1.6;
        }
        
        .subtitle-full.expanded {
            display: block;
        }
        
        .store-status {
            text-align: center;
        }
        
        .table-actions {
            white-space: nowrap;
        }
        
        .table-actions .btn {
            margin-right: 4px;
            margin-bottom: 4px;
        }
        
        .btn-ai {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }
        
        .btn-ai:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-ai:active {
            transform: translateY(0);
        }
        
        .btn-ai span {
            font-size: 16px;
            animation: sparkle 2s infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        .form-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .form-header > div:first-child {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .loading-message {
            text-align: center;
            padding: 40px;
            color: #666;
            font-style: italic;
        }

        .menu-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            border-radius: 8px;
            margin: 4px 0;
        }
        
        .menu-item svg {
            flex-shrink: 0;
            opacity: 0.9;
        }

        .menu-item:hover {
            background: rgba(52, 73, 94, 0.6);
        }
        
        .menu-item:hover svg {
            opacity: 1;
            transform: translateX(2px);
        }

        .menu-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }
        
        .menu-item.active svg {
            opacity: 1;
        }

        .selected-store-card {
            background: #34495e;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid #4a5f7a;
        }

        .selected-store-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .selected-store-icon {
            width: 24px;
            height: 24px;
            background: #27ae60;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            font-size: 12px;
            color: white;
        }

        .selected-store-label {
            font-size: 12px;
            color: #bdc3c7;
            font-weight: 500;
        }

        .selected-store-name {
            font-size: 16px;
            font-weight: 600;
            color: #ecf0f1;
            margin-bottom: 5px;
        }

        .selected-store-subtitle {
            font-size: 12px;
            color: #95a5a6;
        }

        /* ÌÜ†Ïä§Ìä∏ ÏïåÎ¶º ÏãúÏä§ÌÖú */
        .toast-container {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 10000;
            pointer-events: none;
        }

        .toast {
            background: white;
            border-radius: 8px;
            padding: 16px 20px;
            margin-bottom: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-left: 4px solid #3498db;
            min-width: 300px;
            max-width: 400px;
            opacity: 0;
            transform: translateX(-100%);
            transition: all 0.3s ease;
            pointer-events: auto;
            position: relative;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }

        .toast.success {
            border-left-color: #27ae60;
        }

        .toast.error {
            border-left-color: #e74c3c;
        }

        .toast.warning {
            border-left-color: #f39c12;
        }

        .toast.info {
            border-left-color: #3498db;
        }

        .toast-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .toast-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 12px;
            color: white;
        }

        .toast.success .toast-icon {
            background: #27ae60;
        }

        .toast.error .toast-icon {
            background: #e74c3c;
        }

        .toast.warning .toast-icon {
            background: #f39c12;
        }

        .toast.info .toast-icon {
            background: #3498db;
        }

        .toast-title {
            font-weight: 600;
            font-size: 14px;
            color: #2c3e50;
            flex: 1;
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 18px;
            color: #95a5a6;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toast-close:hover {
            color: #7f8c8d;
        }

        /* ÏûÖÎ†• Î™®Îã¨ Ïä§ÌÉÄÏùº */
        .toast.input-modal {
            min-width: 350px;
            max-width: 450px;
        }

        .modal-input-group {
            margin: 16px 0;
        }

        .modal-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
            box-sizing: border-box;
        }

        .modal-input:focus {
            outline: none;
            border-color: #2196f3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .modal-input::placeholder {
            color: #999;
        }

        /* ÏÇ≠Ï†ú ÌôïÏù∏ Î™®Îã¨ Ïä§ÌÉÄÏùº */
        .toast.delete-modal {
            min-width: 350px;
            max-width: 400px;
        }

        .toast-btn-danger {
            background: #f44336;
            color: white;
        }

        .toast-btn-danger:hover {
            background: #d32f2f;
        }

        .toast-message {
            font-size: 13px;
            color: #7f8c8d;
            line-height: 1.4;
        }

        .toast-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 0 0 8px 8px;
            transition: width linear;
        }

        .toast.success .toast-progress {
            background: #27ae60;
        }

        .toast.error .toast-progress {
            background: #e74c3c;
        }

        .toast.warning .toast-progress {
            background: #f39c12;
        }

        .toast.info .toast-progress {
            background: #3498db;
        }

        /* ÌÖåÏù¥Î∏î Ïä§ÌÉÄÏùº */
        .table-container {
            overflow-x: auto;
            margin-bottom: 20px;
        }

        .store-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            table-layout: fixed;
        }

        .store-table th {
            background: #f8f9fa;
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #dee2e6;
            white-space: nowrap;
        }
        
        .store-table th:nth-child(1) { width: 15%; } /* Í∞ÄÍ≤åÎ™Ö */
        .store-table th:nth-child(2) { width: 25%; } /* Î∂ÄÏ†úÎ™© */
        .store-table th:nth-child(3) { width: 13%; } /* Ï†ÑÌôîÎ≤àÌò∏ */
        .store-table th:nth-child(4) { width: 20%; } /* Ï£ºÏÜå */
        .store-table th:nth-child(5) { width: 10%; } /* ÏÉÅÌÉú */
        .store-table th:nth-child(6) { width: 17%; } /* ÏûëÏóÖ */

        .store-table td {
            padding: 14px 16px;
            border-bottom: 1px solid #dee2e6;
            vertical-align: top;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .store-row {
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .store-row:hover {
            background-color: #f8f9fa;
        }

        .store-row.selected {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
        }

        .store-row.selected:hover {
            background-color: #e3f2fd;
        }

        .store-name {
            font-weight: 600;
            color: #333;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            text-align: center;
            min-width: 60px;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-paused {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .table-actions {
            white-space: nowrap;
        }

        .table-actions .btn {
            margin-right: 8px;
        }

        .btn-sm {
            padding: 4px 8px;
            font-size: 12px;
        }

        /* Î∞òÏùëÌòï ÌÖåÏù¥Î∏î */
        @media (max-width: 768px) {
            .store-table {
                font-size: 14px;
            }
            
            .store-table th,
            .store-table td {
                padding: 8px 12px;
            }
            
            .table-actions .btn {
                margin-right: 4px;
                padding: 2px 6px;
                font-size: 11px;
            }
        }

        .store-list {
            list-style: none;
        }

        .store-item {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .store-info h4 {
            margin-bottom: 5px;
        }

        .store-info p {
            color: #666;
            font-size: 12px;
        }

        .store-actions {
            display: flex;
            gap: 5px;
        }

        .delivery-status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }
        
        /* ÎèÑÎ©îÏù∏ & QR ÏÑπÏÖò Ïä§ÌÉÄÏùº */
        .domain-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .domain-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .domain-item:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 6px rgba(59, 130, 246, 0.1);
        }
        
        .domain-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .domain-header h4 {
            color: #1e293b;
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-badge:not(.completed):not(.pending) {
            background: #f1f5f9;
            color: #64748b;
        }
        
        .status-badge.completed {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .domain-body {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .input-group {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .input-group .form-input {
            flex: 1;
        }
        
        .subdomain-display {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
        }
        
        .display-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
        }
        
        .display-row .label {
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
        }
        
        .display-row .value {
            color: #1e293b;
            font-weight: 600;
            font-family: monospace;
            font-size: 15px;
        }
        
        .rules {
            color: #64748b;
            font-size: 13px;
            line-height: 1.5;
            background: #f8fafc;
            padding: 8px 12px;
            border-radius: 6px;
            border-left: 3px solid #3b82f6;
        }
        
        .qr-preview {
            display: flex;
            align-items: center;
            gap: 20px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
        }
        
        .qr-image {
            width: 100px;
            height: 100px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .qr-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .qr-info {
            flex: 1;
        }
        
        .qr-info strong {
            color: #1e293b;
            font-size: 16px;
            display: block;
            margin-bottom: 6px;
        }
        
        .qr-info small {
            color: #64748b;
            font-size: 13px;
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .hints {
            color: #64748b;
            font-size: 13px;
            line-height: 1.5;
            background: #f0f9ff;
            padding: 8px 12px;
            border-radius: 6px;
            border-left: 3px solid #0ea5e9;
        }
        
        .url-display {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .url-text {
            flex: 1;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px 16px;
            font-family: monospace;
            font-size: 14px;
            color: #1e293b;
            word-break: break-all;
        }
        
        /* QR ÏΩîÎìú ÏÑπÏÖò Ïä§ÌÉÄÏùº (Í∏∞Ï°¥) */
        .qr-code-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 24px;
            border: 2px dashed #dee2e6;
        }
        
        .qr-code-preview {
            display: flex;
            align-items: center;
            gap: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .qr-code-preview img {
            width: 200px;
            height: 200px;
            border-radius: 8px;
            border: 2px solid #e1e5e9;
        }
        
        .qr-code-info {
            flex: 1;
        }
        
        .qr-code-info p {
            font-size: 16px;
            font-weight: 600;
            color: #155724;
            margin-bottom: 8px;
        }
        
        .qr-code-info small {
            color: #6c757d;
            font-size: 14px;
        }
        
        .qr-code-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }
        
        .qr-code-hint {
            background: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 12px 16px;
            border-radius: 4px;
            margin-top: 16px;
        }
        
        .qr-code-hint p {
            font-size: 14px;
            color: #004085;
            margin: 4px 0;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        /* Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú ÏòÅÏó≠ Ïä§ÌÉÄÏùº */
        .image-upload-area {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-upload-area:hover {
            border-color: #007bff;
            background-color: #f8f9fa;
        }

        .image-upload-area.drag-over {
            border-color: #007bff;
            background-color: #e3f2fd;
        }

        .drag-drop-text {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .drag-drop-text span {
            font-size: 2em;
            opacity: 0.6;
        }

        .drag-drop-text p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        .file-input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .current-image {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .image-upload-area.has-image .drag-drop-text {
            display: none;
        }

        /* Î∞∞Îã¨Ïï± Í∑∏Î¶¨Îìú ÏÑ§Ï†ï Ïä§ÌÉÄÏùº */
        .delivery-grid-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
            border: 1px solid #e1e5e9;
        }
        
        /* Î∞∞Îã¨Ïï± Ìó§ÎçîÎäî form-headerÏôÄ ÎèôÏùºÌïú Ïä§ÌÉÄÏùº ÏÇ¨Ïö© */
        .delivery-grid-section-header {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f8fafc;
        }

        .delivery-grid-section-header h3,
        .delivery-grid-section h3 {
            margin: 0;
            color: #1a202c;
            font-size: 20px;
            font-weight: 700;
        }

        .delivery-grid-section-header p,
        .order-description {
            margin: 0;
            color: #64748b;
            font-size: 15px;
            line-height: 1.5;
        }

        .delivery-grid-container {
            max-width: 400px;
            margin: 0 auto;
        }

        .delivery-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .delivery-grid-item {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px;
            cursor: move;
            transition: all 0.2s ease;
            text-align: center;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
        }

        .delivery-grid-item:hover {
            border-color: #3498db;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.15);
        }

        .delivery-grid-item.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .delivery-grid-item .app-icon {
            width: 32px;
            height: 32px;
            margin-bottom: 4px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 6px;
        }

        .delivery-grid-item .app-icon.ttaeng {
            background-image: url('../../assets/images/icons/dgy.svg');
        }

        .delivery-grid-item .app-icon.baemin {
            background-image: url('../../assets/images/icons/bm.svg');
        }

        .delivery-grid-item .app-icon.coupang {
            background-image: url('../../assets/images/icons/cpeat.png');
        }

        .delivery-grid-item .app-icon.yogiyo {
            background-image: url('../../assets/images/icons/yogiyo.png');
        }

        .delivery-grid-item .app-name {
            font-size: 12px;
            font-weight: 600;
            color: #333;
        }

        .delivery-grid-item .app-status {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            background: #e74c3c;
            color: white;
        }

        .delivery-grid-item .app-status.active {
            background: #27ae60;
        }

        .delivery-grid-item .drag-handle {
            position: absolute;
            top: 4px;
            right: 4px;
            font-size: 12px;
            color: #95a5a6;
            cursor: move;
        }

        /* SortableJS ÎìúÎûòÍ∑∏ Ï§ë Ïä§ÌÉÄÏùº */
        .sortable-ghost {
            opacity: 0.4;
        }

        .sortable-chosen {
            transform: scale(1.05);
        }

        /* ÌòÑÎåÄÏ†ÅÏù∏ ÌÜ†Í∏Ä Ïä§ÏúÑÏπò */
        .toggle-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .toggle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .toggle-info h3 {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin: 0 0 4px 0;
        }

        .toggle-info p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin: 0;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 32px;
            cursor: pointer;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 32px;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 2px;
            bottom: 2px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch input:checked + .toggle-slider {
            background: rgba(255, 255, 255, 0.9);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(28px);
        }

        /* ÌòÑÎåÄÏ†ÅÏù∏ Ìèº Ïπ¥Îìú */
        .settings-form {
            opacity: 0.6;
            transition: all 0.3s ease;
        }

        .settings-form.active {
            opacity: 1;
        }
        
        /* UI ÏàúÏÑú Î≥ÄÍ≤ΩÏùÄ Ìï≠ÏÉÅ ÌôúÏÑ± ÏÉÅÌÉú (ÌôúÏÑ±/ÎπÑÌôúÏÑ± Í∞úÎÖê ÏóÜÏùå) */
        #section-order .settings-form {
            opacity: 1;
        }

        .form-card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .form-card:hover {
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }

        .form-header {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 32px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f8fafc;
        }
        
        .form-header-title {
            display: flex;
            align-items: center;
        }

        .form-icon {
            font-size: 32px;
            margin-right: 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .form-header h3 {
            font-size: 24px;
            font-weight: 700;
            color: #1a202c;
            margin: 0;
        }
        
        .form-header p {
            font-size: 15px;
            color: #64748b;
            margin: 0;
            padding-left: 48px; /* icon + margin */
        }

        /* ÌòÑÎåÄÏ†ÅÏù∏ Ìèº ÎùºÎ≤® */
        .form-label {
            display: block;
            margin-bottom: 16px;
        }

        .label-text {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 4px;
        }

        .label-hint {
            display: block;
            font-size: 14px;
            color: #718096;
            font-style: italic;
        }

        /* ÌòÑÎåÄÏ†ÅÏù∏ ÏûÖÎ†• ÌïÑÎìú */
        .input-wrapper, .textarea-wrapper {
            position: relative;
        }

        .modern-input, .modern-textarea {
            width: 100%;
            padding: 16px 20px 16px 56px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fafafa;
            box-sizing: border-box;
        }

        .modern-textarea {
            padding: 16px 20px 16px 56px;
            resize: vertical;
            min-height: 120px;
        }

        .modern-input:focus, .modern-textarea:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        .input-icon, .textarea-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: #a0aec0;
            pointer-events: none;
        }

        .textarea-icon {
            top: 20px;
            transform: none;
        }

        /* ÏπúÏ†àÌïú Í∞ÄÏù¥Îìú Î©îÏãúÏßÄ */
        .guide-message {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid #0ea5e9;
            margin-top: 16px;
        }

        .guide-icon {
            font-size: 24px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .guide-text {
            flex: 1;
            font-size: 14px;
            line-height: 1.6;
            color: #0c4a6e;
        }

        .guide-text strong {
            color: #0369a1;
            font-weight: 600;
        }

        /* ÏÑπÏÖò ÏàúÏÑú ÏÑ§Ï†ï Ïä§ÌÉÄÏùº (delivery-grid-sectionÍ≥º ÎèôÏùºÌïú Ïª®ÌÖåÏù¥ÎÑà Ïä§ÌÉÄÏùº) */
        .section-order-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e1e5e9;
            margin-bottom: 20px;
        }
        
        /* Í≥µÌÜµ Ïª®ÌÖåÏù¥ÎÑà Ïä§ÌÉÄÏùº */
        .settings-container {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid #e1e5e9;
        }

        .order-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .order-item {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px 20px;
            cursor: move;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .order-item:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
        }

        .order-item.dragging {
            opacity: 0.5;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .order-number {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 700;
            flex-shrink: 0;
        }

        .order-content {
            flex: 1;
            min-width: 0;
        }

        .order-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .order-description {
            font-size: 13px;
            color: #64748b;
        }

        .order-handle {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            flex-shrink: 0;
            color: #94a3b8;
            transition: color 0.2s;
        }

        .order-handle:hover {
            color: #667eea;
        }

        .order-handle:active {
            cursor: grabbing;
        }
        
        .order-handle svg {
            opacity: 0.6;
        }
        
        .order-handle:hover svg {
            opacity: 1;
        }


        .save-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .save-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }

        .save-icon {
            margin-right: 8px;
            font-size: 16px;
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 768px) {
            .admin-sidebar {
                position: fixed;
                left: 0;
                top: 0;
                bottom: 0;
                z-index: 1000;
                transform: translateX(-100%);
            }
            
            .admin-sidebar.active {
                transform: translateX(0);
            }
            
            .sidebar-toggle {
                display: block;
            }
            
            .admin-content {
                flex: 1;
                width: 100%;
            }
            
            .toggle-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }

            .form-card {
                padding: 24px;
            }

            .form-header {
                flex-direction: column;
                align-items: flex-start;
                text-align: left;
            }

            .form-icon {
                margin-right: 0;
                margin-bottom: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- ÌîÑÎ°úÍ∑∏Î†àÏä§ Î∞î (ÏµúÏÉÅÎã® Í≥†Ï†ï) -->
    <div id="progressBar" style="position: fixed; top: 0; left: 0; width: 0%; height: 3px; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); z-index: 99999; transition: width 0.3s ease, opacity 0.3s ease; opacity: 0;"></div>
    
    <div class="admin-container">
        <!-- ÌÜ†Ïä§Ìä∏ ÏïåÎ¶º Ïª®ÌÖåÏù¥ÎÑà -->
        <div id="toastContainer" class="toast-container"></div>
        
        <!-- Î™®Î∞îÏùº ÏÇ¨Ïù¥ÎìúÎ∞î ÌÜ†Í∏Ä Î≤ÑÌäº -->
        <button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>
        
        <!-- ÏÇ¨Ïù¥ÎìúÎ∞î Ïò§Î≤ÑÎ†àÏù¥ (Î™®Î∞îÏùº) -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
        
        <!-- ÏÇ¨Ïù¥ÎìúÎ∞î -->
        <div class="admin-sidebar">
            <!-- Î©îÎâ¥ ÏòÅÏó≠ (Ïä§ÌÅ¨Î°§ Í∞ÄÎä•) -->
            <div style="flex: 1; overflow-y: auto; padding: 0 20px;">
                <h2 style="margin-bottom: 30px; color: #ecf0f1;">Í¥ÄÎ¶¨Ïûê Î©îÎâ¥</h2>
                
                <!-- ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å Ïπ¥Îìú -->
                <div id="selectedStoreCard" class="selected-store-card">
                    <div class="selected-store-header">
                        <div class="selected-store-icon">üè™</div>
                        <div class="selected-store-label">ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å</div>
                    </div>
                    <div class="selected-store-name" id="selectedStoreName">Í∞ÄÍ≤åÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</div>
                    <div class="selected-store-subtitle" id="selectedStoreSubtitle">Ï¢åÏ∏° Í∞ÄÍ≤å Î™©Î°ùÏóêÏÑú ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</div>
                </div>
                
                <div class="menu-item" onclick="showSection('stores')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                    Í∞ÄÍ≤å Í¥ÄÎ¶¨
                </div>
                <div class="menu-item" onclick="showSection('basic')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    Í∏∞Î≥∏ Ï†ïÎ≥¥
                </div>
                <div class="menu-item" onclick="showSection('domain')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3 4-3 9-3 9 1.34 9 3z"/><path d="M3 5c0 1.66 4 3 9 3s9-1.34 9-3-4-3-9-3-9 1.34-9 3z"/><path d="M3 19c0 1.66 4 3 9 3s9-1.34 9-3-4-3-9-3-9 1.34-9 3z"/></svg>
                    ÎèÑÎ©îÏù∏ & QR
                </div>
                <div class="menu-item" onclick="showSection('delivery')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                    Î∞∞Îã¨Ïï± ÏÑ§Ï†ï
                </div>
                <div class="menu-item" onclick="showSection('images')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                    Ïù¥ÎØ∏ÏßÄ Í¥ÄÎ¶¨
                </div>
                <div class="menu-item" onclick="showSection('discount')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
                    Ìï†Ïù∏ ÏÑ§Ï†ï
                </div>
                <div class="menu-item" onclick="showSection('pickup')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
                    ÌîΩÏóÖ ÏïàÎÇ¥
                </div>
                <div class="menu-item" onclick="showSection('section-order')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
                    UI ÏàúÏÑú Î≥ÄÍ≤Ω
                </div>
                <div class="menu-item" onclick="showSection('activity-logs')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
                    ÌôúÎèô Î°úÍ∑∏
                </div>
                <div class="menu-item" onclick="showSection('superadmin')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                    ÏäàÌçºÏñ¥ÎìúÎØº
                </div>
            </div>
            
            <!-- ÏÇ¨Ïù¥ÎìúÎ∞î ÌïòÎã® (Î≤ÑÏ†Ñ Ï†ïÎ≥¥ & Î¶¥Î¶¨Ï¶à ÎÖ∏Ìä∏) - Ìï≠ÏÉÅ ÌïòÎã® Í≥†Ï†ï -->
            <div class="sidebar-footer">
                <div class="version-info">
                    <div class="version-badge">v1.4.2</div>
                </div>
                <a href="/admin/release-notes.html" class="release-notes-btn">
                    üìù Î¶¥Î¶¨Ï¶à ÎÖ∏Ìä∏
                </a>
            </div>
        </div>

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
        <div class="admin-content">
            <!-- Ìó§Îçî -->
            <div class="admin-header">
                <div class="header-info">
                    <h1>ÌîΩÏóÖ - Í¥ÄÎ¶¨Ïûê ÌéòÏù¥ÏßÄ</h1>
                    <p style="color: #667eea; font-weight: 600; font-size: 14px; margin-top: 4px;">üè† Ïö∞Î¶¨Ïßë 5Î∂ÑÍ±∞Î¶¨ ÌîΩÏóÖ(pickup)</p>
                    <p style="margin-top: 4px;">Í∞ÄÍ≤å Ï†ïÎ≥¥ÏôÄ ÏÑ§Ï†ïÏùÑ Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî</p>
                </div>
                <div class="header-actions">
                    <a href="/admin/bulk-management.html" id="bulkManagementBtn" class="btn btn-primary" style="display: none; margin-right: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">
                        üöÄ ÎåÄÎüâ Í∞ÄÍ≤å Í¥ÄÎ¶¨
                    </a>
                    <a href="javascript:void(0)" onclick="openMainPage()" class="btn btn-primary">ÌéòÏù¥ÏßÄ Î≥¥Í∏∞</a>
                    <button onclick="logout()" class="btn btn-secondary">Î°úÍ∑∏ÏïÑÏõÉ</button>
                </div>
            </div>

            <!-- ÏÉÅÌÉú Î©îÏãúÏßÄ -->
            <div id="statusMessage" class="status-message" style="display: none;">
                <span id="statusText"></span>
            </div>

            <!-- Í∞ÄÍ≤å Í¥ÄÎ¶¨ -->
            <div class="admin-section" id="stores">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                    Í∞ÄÍ≤å Í¥ÄÎ¶¨
                </h2>
                
                <!-- ÌÜµÍ≥Ñ ÎåÄÏãúÎ≥¥Îìú -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                    <div onclick="filterByStatCard('all')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">Ï†ÑÏ≤¥ Í∞ÄÍ≤å</div>
                        <div style="font-size: 32px; font-weight: 700;" id="totalStoresCount">0</div>
                    </div>
                    <div onclick="filterByStatCard('active')" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">ÌôúÏÑ± Í∞ÄÍ≤å</div>
                        <div style="font-size: 32px; font-weight: 700;" id="activeStoresCount">0</div>
                    </div>
                    <div onclick="filterByStatCard('paused')" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">ÏùºÏãúÏ†ïÏßÄ</div>
                        <div style="font-size: 32px; font-weight: 700;" id="pausedStoresCount">0</div>
                    </div>
                    <div onclick="filterByStatCard('today')" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">Ïò§Îäò Ï∂îÍ∞Ä</div>
                        <div style="font-size: 32px; font-weight: 700;" id="todayStoresCount">0</div>
                    </div>
                </div>
                
                <!-- Í≤ÄÏÉâ Î∞è ÌïÑÌÑ∞ -->
                <div style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                    <input type="text" id="storeSearchInput" placeholder="üîç Í∞ÄÍ≤åÎ™Ö, Ï†ÑÌôîÎ≤àÌò∏, Ï£ºÏÜå Í≤ÄÏÉâ..." 
                           style="flex: 1; min-width: 250px; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;"
                           onkeyup="filterStoreList()" />
                    <select id="storeStatusFilter" style="padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px; cursor: pointer;"
                            onchange="filterStoreList()">
                        <option value="">Ï†ÑÏ≤¥ ÏÉÅÌÉú</option>
                        <option value="active">ÌôúÏÑ±</option>
                        <option value="paused">ÏùºÏãúÏ†ïÏßÄ</option>
                    </select>
                    <select id="storeSortBy" style="padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px; cursor: pointer;"
                            onchange="filterStoreList()">
                        <option value="name">Ïù¥Î¶ÑÏàú</option>
                        <option value="createdAt">ÏÉùÏÑ±ÏùºÏàú</option>
                        <option value="lastModified">ÏµúÍ∑º ÏàòÏ†ïÏàú</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Í∞ÄÍ≤å Î™©Î°ù (<span id="filteredStoresCount">0</span>Í∞ú)</label>
                    <div id="storeTableContainer" style="overflow-x: auto;">
                        <table id="storeTable" style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden;">
                            <thead style="background: #f8fafc;">
                                <tr>
                                    <th style="padding: 12px; text-align: left; font-weight: 600; color: #475569; border-bottom: 2px solid #e2e8f0;">ID</th>
                                    <th style="padding: 12px; text-align: left; font-weight: 600; color: #475569; border-bottom: 2px solid #e2e8f0;">Í∞ÄÍ≤åÎ™Ö</th>
                                    <th style="padding: 12px; text-align: left; font-weight: 600; color: #475569; border-bottom: 2px solid #e2e8f0;">Ï†ÑÌôîÎ≤àÌò∏</th>
                                    <th style="padding: 12px; text-align: left; font-weight: 600; color: #475569; border-bottom: 2px solid #e2e8f0;">ÏÉÅÌÉú</th>
                                    <th style="padding: 12px; text-align: center; font-weight: 600; color: #475569; border-bottom: 2px solid #e2e8f0;">ÏûëÏóÖ</th>
                                </tr>
                            </thead>
                            <tbody id="storeTableBody">
                                <tr><td colspan="5" style="padding: 20px; text-align: center; color: #94a3b8;">Î°úÎî© Ï§ë...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="button-group" style="display: flex; gap: 12px; flex-wrap: wrap;">
                    <button onclick="showStoreNameModal()" class="btn btn-primary">
                        ‚ûï ÏÉà Í∞ÄÍ≤å Ï∂îÍ∞Ä
                    </button>
                    <button onclick="window.location.href='/admin/bulk-management.html'" class="btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        üöÄ ÎåÄÎüâ Í¥ÄÎ¶¨
                    </button>
                    <button onclick="exportStoresJSON()" class="btn">
                        üì• JSON ÎÇ¥Î≥¥ÎÇ¥Í∏∞
                    </button>
                    <button onclick="exportStoresCSV()" class="btn">
                        üìä CSV ÎÇ¥Î≥¥ÎÇ¥Í∏∞
                    </button>
                </div>
            </div>

            <!-- Í∏∞Î≥∏ Ï†ïÎ≥¥ -->
            <div class="admin-section" id="basic">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    Í∏∞Î≥∏ Ï†ïÎ≥¥
                </h2>
                
                <div style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-left: 4px solid #667eea; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #667eea; font-weight: 600; font-size: 14px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                        ÏûÖÎ†• ÌõÑ ÏûêÎèô Ï†ÄÏû•Îê©ÎãàÎã§
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="storeName">Í∞ÄÍ≤åÎ™Ö</label>
                    <input type="text" id="storeName" class="form-input" placeholder="Í∞ÄÍ≤åÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onblur="saveBasicInfo()">
                </div>
                
                
                <div class="form-group">
                    <label for="storeSubtitle">ÌïòÎã® ÌÖçÏä§Ìä∏</label>
                    <input type="text" id="storeSubtitle" class="form-input" placeholder="ÌïòÎã® ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onblur="saveBasicInfo()">
                </div>
                
                <div class="form-group">
                    <label for="storePhone">Ï†ÑÌôîÎ≤àÌò∏</label>
                    <input type="text" id="storePhone" class="form-input" placeholder="Ï†ÑÌôîÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onblur="saveBasicInfo()">
                </div>
                
                <div class="form-group">
                    <label for="storeAddress">Ï£ºÏÜå</label>
                    <textarea id="storeAddress" class="form-input" rows="3" placeholder="Ï£ºÏÜåÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onblur="saveBasicInfo()"></textarea>
                </div>
                
                <!-- ÏòÅÏóÖÏãúÍ∞Ñ ÏÑ§Ï†ï -->
                <div class="form-group">
                    <label>ÏòÅÏóÖÏãúÍ∞Ñ</label>
                    <div style="background: #f8fafc; border-radius: 8px; padding: 16px; margin-top: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div id="businessHoursSummary" style="flex: 1;">
                                <div style="font-size: 14px; color: #64748b; margin-bottom: 8px;">ÏòÅÏóÖÏãúÍ∞ÑÏùÑ ÏÑ§Ï†ïÌï¥Ï£ºÏÑ∏Ïöî</div>
                                <div id="businessHoursDisplay" style="font-size: 13px; color: #475569; line-height: 1.4;">
                                    ÏïÑÏßÅ ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§
                            </div>
                            </div>
                            <button type="button" onclick="openBusinessHoursModal()" class="btn btn-secondary" style="margin-left: 16px;">
                                ÏÑ§Ï†ïÌïòÍ∏∞
                            </button>
                            </div>
                            </div>
                            </div>
                
                            </div>

            <!-- ÎèÑÎ©îÏù∏ & QR ÏÑ§Ï†ï -->
            <div class="admin-section" id="domain">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3 4-3 9-3 9 1.34 9 3z"/><path d="M3 5c0 1.66 4 3 9 3s9-1.34 9-3-4-3-9-3-9 1.34-9 3z"/><path d="M3 19c0 1.66 4 3 9 3s9-1.34 9-3-4-3-9-3-9 1.34-9 3z"/></svg>
                    ÎèÑÎ©îÏù∏ & QR ÏÑ§Ï†ï
                </h2>
                
                <div style="background: linear-gradient(135deg, #3b82f615 0%, #1e40af15 100%); border-left: 4px solid #3b82f6; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #3b82f6; font-weight: 600; font-size: 14px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                        ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏÑ§Ï†ïÍ≥º QR ÏΩîÎìú ÏÉùÏÑ±ÏùÑ ÌÜµÌï¥ Í≥†Í∞ùÎì§Ïù¥ ÏâΩÍ≤å Ï†ëÏÜçÌï† Ïàò ÏûàÎäî Í≥†Ïú†Ìïú ÎßÅÌÅ¨Î•º ÎßåÎìúÏÑ∏Ïöî
                            </div>
                        </div>
                
                <div class="domain-content">
                    <!-- ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏÑ§Ï†ï -->
                    <div class="domain-item">
                        <div class="domain-header">
                            <h4>ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏÑ§Ï†ï</h4>
                            <span class="status-badge" id="subdomainStatus">ÎØ∏ÏÑ§Ï†ï</span>
                        </div>
                        
                        <div class="domain-body">
                            <div class="input-group">
                                <input type="text" id="storeSubdomain" class="form-input" placeholder="Ïòà: michinjeuk" maxlength="20">
                                <button onclick="saveSubdomain()" class="btn btn-primary" id="subdomainBtn">ÏÑ§Ï†ï</button>
                            </div>
                            
                            <div id="subdomainDisplay" class="subdomain-display" style="display: none;">
                                <div class="display-row">
                                    <span class="label">ÌòÑÏû¨ ÏÑúÎ∏åÎèÑÎ©îÏù∏:</span>
                                    <span id="currentSubdomain" class="value"></span>
                                    <button onclick="enableSubdomainEdit()" class="btn btn-warning btn-sm" id="editSubdomainBtn">ÏàòÏ†ï</button>
                                </div>
                            </div>
                            
                            <div class="rules">
                                <small>3-20Ïûê, ÏòÅÎ¨∏Ïûê/Ïà´Ïûê/ÌïòÏù¥Ìîà(-)Îßå ÏÇ¨Ïö©, ÏòÅÎ¨∏ÏûêÎÇò Ïà´ÏûêÎ°ú ÏãúÏûëÌïòÍ≥† ÎÅùÎÇòÏïº Ìï®</small>
                            </div>
                    </div>
                </div>
                
                <!-- QR ÏΩîÎìú ÏÉùÏÑ± -->
                    <div class="domain-item">
                        <div class="domain-header">
                            <h4>QR ÏΩîÎìú</h4>
                            <span class="status-badge" id="qrStatus">ÎØ∏ÏÉùÏÑ±</span>
                        </div>
                        
                        <div class="domain-body">
                            <div id="qrCodePreview" class="qr-preview" style="display: none;">
                                <div class="qr-image">
                            <img id="qrCodeImage" src="" alt="QR ÏΩîÎìú">
                                </div>
                                <div class="qr-info">
                                    <strong>QR ÏΩîÎìú ÏÉùÏÑ± ÏôÑÎ£å</strong>
                                <small id="qrCodeDate"></small>
                            </div>
                        </div>
                            
                            <div class="action-buttons">
                                <button id="generateQrBtn" class="btn btn-primary" onclick="generateQRCode()">QR ÏΩîÎìú ÏÉùÏÑ±</button>
                                <button id="regenerateQrBtn" class="btn btn-secondary" onclick="regenerateQRCode()" style="display: none;">Ïû¨ÏÉùÏÑ±</button>
                                <button id="downloadQrBtn" class="btn btn-success" onclick="downloadQRCode()" style="display: none;">Îã§Ïö¥Î°úÎìú</button>
                                <button id="deleteQrBtn" class="btn btn-danger" onclick="deleteQRCode()" style="display: none;">ÏÇ≠Ï†ú</button>
                        </div>
                            
                            <div class="hints">
                                <small>QR ÏΩîÎìúÎäî ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÎßÅÌÅ¨Î•º Ìè¨Ìï®ÌïòÎ©∞, Î°úÍ≥†Í∞Ä ÏûàÏúºÎ©¥ Ï§ëÏïôÏóê ÌëúÏãúÎê©ÎãàÎã§</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÏµúÏ¢Ö URL ÌëúÏãú -->
                    <div class="domain-item" id="finalUrlDisplay" style="display: none;">
                        <div class="domain-header">
                            <h4>Ï†ëÏÜç URL</h4>
                        </div>
                        <div class="domain-body">
                            <div class="url-display">
                                <div class="url-text" id="finalUrlText"></div>
                                <button onclick="copyFinalUrl()" class="btn btn-info btn-sm">Î≥µÏÇ¨</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Î∞∞Îã¨Ïï± ÏÑ§Ï†ï -->
            <div class="admin-section" id="delivery">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
                    Î∞∞Îã¨Ïï± ÏÑ§Ï†ï
                </h2>
                
                <div style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-left: 4px solid #667eea; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #667eea; font-weight: 600; font-size: 14px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                        ÎìúÎûòÍ∑∏ Î∞è URL ÏûÖÎ†• Ïãú ÏûêÎèô Ï†ÄÏû•Îê©ÎãàÎã§
                    </div>
                </div>
                
                <div class="delivery-grid-section">
                    <div class="delivery-grid-section-header">
                        <h3>Î∞∞Îã¨Ïï± ÌëúÏãú ÏàúÏÑú</h3>
                        <p class="order-description">ÎìúÎûòÍ∑∏ÌïòÏó¨ ÏàúÏÑúÎ•º Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏäµÎãàÎã§. Í∞ÄÍ≤å ÌéòÏù¥ÏßÄÏôÄ ÎèôÏùºÌïú ÌòïÌÉúÎ°ú ÌëúÏãúÎê©ÎãàÎã§.</p>
                    </div>
                    
                    <div class="delivery-grid-container">
                        <div class="delivery-grid" id="deliveryOrderGrid">
                            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="ttaengUrl">Îï°Í≤®Ïöî URL</label>
                    <input type="url" id="ttaengUrl" class="form-input" placeholder="Îï°Í≤®Ïöî URLÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onblur="saveDeliveryUrls()" oninput="updateDeliveryStatus('ttaeng')">
                    <div id="ttaengStatus" class="delivery-status status-inactive">Ï§ÄÎπÑÏ§ë</div>
                </div>
                
                <div class="form-group">
                    <label for="baeminUrl">Î∞∞Îã¨ÏùòÎØºÏ°± URL</label>
                    <input type="url" id="baeminUrl" class="form-input" placeholder="Î∞∞Îã¨ÏùòÎØºÏ°± URLÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onblur="saveDeliveryUrls()" oninput="updateDeliveryStatus('baemin')">
                    <div id="baeminStatus" class="delivery-status status-inactive">Ï§ÄÎπÑÏ§ë</div>
                </div>
                
                <div class="form-group">
                    <label for="coupangUrl">Ïø†Ìå°Ïù¥Ï∏† URL</label>
                    <input type="url" id="coupangUrl" class="form-input" placeholder="Ïø†Ìå°Ïù¥Ï∏† URLÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onblur="saveDeliveryUrls()" oninput="updateDeliveryStatus('coupang')">
                    <div id="coupangStatus" class="delivery-status status-inactive">Ï§ÄÎπÑÏ§ë</div>
                </div>
                
                <div class="form-group">
                    <label for="yogiyoUrl">ÏöîÍ∏∞Ïöî URL</label>
                    <input type="url" id="yogiyoUrl" class="form-input" placeholder="ÏöîÍ∏∞Ïöî URLÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onblur="saveDeliveryUrls()" oninput="updateDeliveryStatus('yogiyo')">
                    <div id="yogiyoStatus" class="delivery-status status-inactive">Ï§ÄÎπÑÏ§ë</div>
                </div>
            </div>

            <!-- Ïù¥ÎØ∏ÏßÄ Í¥ÄÎ¶¨ -->
            <div class="admin-section" id="images">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                    Ïù¥ÎØ∏ÏßÄ Í¥ÄÎ¶¨
                </h2>
                
                <div style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-left: 4px solid #667eea; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #667eea; font-weight: 600; font-size: 14px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                        Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Ïãú ÏûêÎèô Ï†ÄÏû•Îê©ÎãàÎã§
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="mainLogo">Î©îÏù∏ Î°úÍ≥†</label>
                    <div class="image-upload-area" id="mainLogoArea" ondrop="handleDrop(event, 'mainLogo')" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                        <div class="drag-drop-text">
                            <span>üìÅ</span>
                            <p>Ïù¥ÎØ∏ÏßÄÎ•º ÎìúÎûòÍ∑∏ÌïòÏó¨ ÎÜìÍ±∞ÎÇò ÌÅ¥Î¶≠ÌïòÏó¨ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</p>
                        </div>
                        <img id="mainLogoPreview" class="current-image" style="display: none;">
                        <input type="file" id="mainLogo" class="file-input" accept="image/*" onchange="handleImageUpload('mainLogo', 'mainLogo')">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="menuImage">Î©îÎâ¥ Ïù¥ÎØ∏ÏßÄ</label>
                    <div class="image-upload-area" id="menuImageArea" ondrop="handleDrop(event, 'menuImage')" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                        <div class="drag-drop-text">
                            <span>üìÅ</span>
                            <p>Ïù¥ÎØ∏ÏßÄÎ•º ÎìúÎûòÍ∑∏ÌïòÏó¨ ÎÜìÍ±∞ÎÇò ÌÅ¥Î¶≠ÌïòÏó¨ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</p>
                        </div>
                        <img id="menuImagePreview" class="current-image" style="display: none;">
                        <input type="file" id="menuImage" class="file-input" accept="image/*" onchange="handleImageUpload('menuImage', 'menuImage')">
                    </div>
                </div>
            </div>

            <!-- Ìï†Ïù∏ ÏÑ§Ï†ï -->
            <div class="admin-section" id="discount">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
                    Ìï†Ïù∏ ÏÑ§Ï†ï
                </h2>
                
                <!-- Ìï†Ïù∏ ÌôúÏÑ±Ìôî ÌÜ†Í∏Ä -->
                <div class="toggle-card">
                    <div class="toggle-header">
                        <div class="toggle-info">
                            <h3>Ìï†Ïù∏ Ïù¥Î≤§Ìä∏ ÌôúÏÑ±Ìôî</h3>
                            <p>Í≥†Í∞ùÎì§ÏóêÍ≤å Ìï†Ïù∏ Ï†ïÎ≥¥Î•º ÌëúÏãúÌï©ÎãàÎã§</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="discountEnabled" onchange="saveDiscountSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <!-- Ìï†Ïù∏ ÏÑ§Ï†ï Ìèº -->
                <div class="settings-form" id="discountForm">
                    <div class="form-card">
                        <div class="form-header">
                            <div class="form-icon">üéâ</div>
                            <h3>Ìï†Ïù∏ Ï†ïÎ≥¥ ÏûÖÎ†•</h3>
                            <button onclick="generateAIContent('discount')" class="btn-ai" title="AIÍ∞Ä Í∞ÄÍ≤å Ïù¥Î¶ÑÏùÑ Î∂ÑÏÑùÌïòÏó¨ ÏûêÎèôÏúºÎ°ú ÏûëÏÑ±Ìï©ÎãàÎã§">
                                <span>‚ú®</span> AI ÏûëÏÑ±
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <label for="discountTitle" class="form-label">
                                <span class="label-text">Ìï†Ïù∏ Ï†úÎ™©</span>
                                <span class="label-hint">Í≥†Í∞ùÏù¥ ÎààÏóê ÎùÑÎäî Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî</span>
                            </label>
                            <div class="input-wrapper">
                                <input type="text" id="discountTitle" class="form-input modern-input" placeholder="Ïòà: Ïã†Î©îÎâ¥ Ï∂úÏãú Í∏∞ÎÖê 20% Ìï†Ïù∏!" onblur="saveDiscountSettings()">
                                <div class="input-icon">üìù</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="discountDescription" class="form-label">
                                <span class="label-text">Ìï†Ïù∏ ÏÑ§Î™Ö</span>
                                <span class="label-hint">ÏûêÏÑ∏Ìïú Ìï†Ïù∏ ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî</span>
                            </label>
                            <div class="textarea-wrapper">
                                <textarea id="discountDescription" class="form-input modern-textarea" rows="4" placeholder="Ïòà: Ïã†Î©îÎâ¥ Ï∂úÏãúÎ•º Í∏∞ÎÖêÌïòÏó¨ Ï†ÑÏ≤¥ Î©îÎâ¥ 20% Ìï†Ïù∏! Í∏∞Í∞Ñ: 12Ïõî 1Ïùº ~ 12Ïõî 31Ïùº" onblur="saveDiscountSettings()"></textarea>
                                <div class="textarea-icon">üìÑ</div>
                            </div>
                        </div>
                        
                        <div class="form-footer" id="discountGuideFooter">
                            <!-- JavaScriptÎ°ú ÎèôÏ†Å ÏÉùÏÑ± -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÌîΩÏóÖ ÏïàÎÇ¥ -->
            <div class="admin-section" id="pickup">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
                    ÌîΩÏóÖ ÏïàÎÇ¥
                </h2>
                
                <!-- ÌîΩÏóÖ ÌôúÏÑ±Ìôî ÌÜ†Í∏Ä -->
                <div class="toggle-card">
                    <div class="toggle-header">
                        <div class="toggle-info">
                            <h3>ÌîΩÏóÖ ÏïàÎÇ¥ ÌôúÏÑ±Ìôî</h3>
                            <p>Í≥†Í∞ùÎì§ÏóêÍ≤å ÌîΩÏóÖ Ïû•ÏÜåÏôÄ ÏïàÎÇ¥ÏÇ¨Ìï≠ÏùÑ ÌëúÏãúÌï©ÎãàÎã§</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="pickupEnabled" onchange="savePickupSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <!-- ÌîΩÏóÖ ÏÑ§Ï†ï Ìèº -->
                <div class="settings-form" id="pickupForm">
                    <div class="form-card">
                        <div class="form-header">
                            <div class="form-icon">üìç</div>
                            <h3>ÌîΩÏóÖ Ï†ïÎ≥¥ ÏûÖÎ†•</h3>
                            <button onclick="generateAIContent('pickup')" class="btn-ai" title="AIÍ∞Ä Í∞ÄÍ≤å Ïù¥Î¶ÑÏùÑ Î∂ÑÏÑùÌïòÏó¨ ÏûêÎèôÏúºÎ°ú ÏûëÏÑ±Ìï©ÎãàÎã§">
                                <span>‚ú®</span> AI ÏûëÏÑ±
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <label for="pickupTitle" class="form-label">
                                <span class="label-text">ÌîΩÏóÖ Ï†úÎ™©</span>
                                <span class="label-hint">Í≥†Í∞ùÏù¥ Ïù¥Ìï¥ÌïòÍ∏∞ Ïâ¨Ïö¥ Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî</span>
                            </label>
                            <div class="input-wrapper">
                                <input type="text" id="pickupTitle" class="form-input modern-input" placeholder="Ïòà: ÌîΩÏóÖ Ïû•ÏÜå ÏïàÎÇ¥" onblur="savePickupSettings()">
                                <div class="input-icon">üìù</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="pickupDescription" class="form-label">
                                <span class="label-text">ÌîΩÏóÖ ÏÑ§Î™Ö</span>
                                <span class="label-hint">ÌîΩÏóÖ Ïû•ÏÜåÏôÄ Ï£ºÏùòÏÇ¨Ìï≠ÏùÑ ÏûêÏÑ∏Ìûà ÏûÖÎ†•ÌïòÏÑ∏Ïöî</span>
                            </label>
                            <div class="textarea-wrapper">
                                <textarea id="pickupDescription" class="form-input modern-textarea" rows="4" placeholder="Ïòà: Îß§Ïû• 1Ï∏µ Ïπ¥Ïö¥ÌÑ∞ÏóêÏÑú ÌîΩÏóÖÌï¥Ï£ºÏÑ∏Ïöî. Ï£ºÎ¨∏Î≤àÌò∏Î•º ÎßêÏîÄÌï¥Ï£ºÏãúÎ©¥ Îπ†Î•¥Í≤å Î∞õÏúºÏã§ Ïàò ÏûàÏäµÎãàÎã§." onblur="savePickupSettings()"></textarea>
                                <div class="textarea-icon">üìÑ</div>
                            </div>
                        </div>
                        
                        <div class="form-footer" id="pickupGuideFooter">
                            <!-- JavaScriptÎ°ú ÎèôÏ†Å ÏÉùÏÑ± -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÏÑπÏÖò ÏàúÏÑú ÏÑ§Ï†ï -->
            <div class="admin-section" id="section-order">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
                    UI ÏàúÏÑú Î≥ÄÍ≤Ω
                </h2>
                
                <div class="settings-form">
                    <div class="form-header">
                        <h3>Í∞ÄÍ≤å ÌéòÏù¥ÏßÄ ÏÑπÏÖò ÏàúÏÑú Í¥ÄÎ¶¨</h3>
                        <p>ÎìúÎûòÍ∑∏Î°ú ÏàúÏÑúÎ•º Î≥ÄÍ≤ΩÌïòÎ©¥ ÏûêÎèôÏúºÎ°ú Ï†ÄÏû•Îê©ÎãàÎã§</p>
                    </div>
                    
                    <div class="section-order-container">
                        <div class="order-list" id="sectionOrderList">
                            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                        </div>
                    </div>
                    
                    <div class="form-footer" id="sectionOrderGuideFooter">
                        <!-- JavaScriptÎ°ú ÎèôÏ†Å ÏÉùÏÑ± -->
                    </div>
                </div>
            </div>

            <!-- ÌôúÎèô Î°úÍ∑∏ -->
            <div class="admin-section" id="activity-logs">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
                    ÌôúÎèô Î°úÍ∑∏
                </h2>
                
                <div class="form-group">
                    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                        <select id="logFilter" class="form-input" style="flex: 1;" onchange="loadActivityLogs()">
                            <option value="">Ï†ÑÏ≤¥ Î°úÍ∑∏</option>
                            <option value="store">Í∞ÄÍ≤å Í¥ÄÎ¶¨</option>
                            <option value="settings">ÏÑ§Ï†ï Î≥ÄÍ≤Ω</option>
                            <option value="image">Ïù¥ÎØ∏ÏßÄ Í¥ÄÎ¶¨</option>
                            <option value="qr">QR ÏΩîÎìú</option>
                            <option value="ai">AI ÏÉùÏÑ±</option>
                            <option value="admin">Í¥ÄÎ¶¨Ïûê</option>
                            <option value="system">ÏãúÏä§ÌÖú</option>
                        </select>
                        <button onclick="loadActivityLogs()" class="btn btn-primary">ÏÉàÎ°úÍ≥†Ïπ®</button>
                    </div>
                </div>

                <div id="activityLogsList" class="activity-logs-list">
                    <div class="loading-message">ÌôúÎèô Î°úÍ∑∏Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</div>
                </div>
            </div>

            <!-- ÏäàÌçºÏñ¥ÎìúÎØº Í≥ÑÏ†ï Í¥ÄÎ¶¨ -->
            <div class="admin-section" id="superadmin">
                <h2 class="section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                    ÏäàÌçºÏñ¥ÎìúÎØº Í≥ÑÏ†ïÍ¥ÄÎ¶¨
                </h2>
                
                <div class="form-group">
                    <label for="adminUsername">Í≥ÑÏ†ïÎ™Ö</label>
                    <input type="text" id="adminUsername" class="form-input" placeholder="Í≥ÑÏ†ïÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                </div>
                
                <div class="form-group">
                    <label for="adminPassword">ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏</label>
                    <input type="password" id="adminPassword" class="form-input" placeholder="ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                </div>
                
                <div class="form-group">
                    <label for="adminPasswordConfirm">ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏</label>
                    <input type="password" id="adminPasswordConfirm" class="form-input" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Îã§Ïãú ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                </div>
                
                <div class="button-group">
                    <button onclick="updateSuperAdminAccount()" class="btn btn-primary">Í≥ÑÏ†ï Ï†ïÎ≥¥ ÏàòÏ†ï</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8081/api';
        
        // Ï†ÑÏó≠ Í∞ÄÍ≤å Î™©Î°ù (ÌïÑÌÑ∞ÎßÅÏö©)
        let allStores = [];
        let filteredStores = [];
        
        // ÌîÑÎ°úÍ∑∏Î†àÏä§ Î∞î Ï†úÏñ¥
        const progressBar = document.getElementById('progressBar');
        let progressValue = 0;
        let progressInterval = null;
        
        function startProgress() {
            progressValue = 0;
            progressBar.style.opacity = '1';
            progressBar.style.width = '0%';
            
            // Ï†êÏßÑÏ†ÅÏúºÎ°ú Ï¶ùÍ∞Ä (ÏµúÎåÄ 90%ÍπåÏßÄ)
            progressInterval = setInterval(() => {
                if (progressValue < 90) {
                    progressValue += Math.random() * 10;
                    if (progressValue > 90) progressValue = 90;
                    progressBar.style.width = progressValue + '%';
                }
            }, 200);
        }
        
        function completeProgress() {
            if (progressInterval) {
                clearInterval(progressInterval);
                progressInterval = null;
            }
            progressValue = 100;
            progressBar.style.width = '100%';
            
            // ÏôÑÎ£å ÌõÑ ÌéòÏù¥Îìú ÏïÑÏõÉ
            setTimeout(() => {
                progressBar.style.opacity = '0';
                setTimeout(() => {
                    progressBar.style.width = '0%';
                }, 300);
            }, 500);
        }

        // Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏
        const isLoggedIn = sessionStorage.getItem('superadmin_logged_in') === 'true';
        if (!isLoggedIn) {
            window.location.href = 'login.html';
        }

        // Í∞ÄÍ≤å ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ® ÏïåÎ¶º
        function notifyStorePageRefresh() {
            // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Í∞ÄÍ≤åÏùò ÌéòÏù¥ÏßÄ URL ÏÉùÏÑ±
            const currentStoreId = getCurrentStoreId();
            if (currentStoreId) {
                showToast('ÏÑ§Ï†ïÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§! Í≥†Í∞ùÎì§Ïù¥ Í∞ÄÍ≤å ÌéòÏù¥ÏßÄÏóêÏÑú Î∞îÎ°ú ÌôïÏù∏Ìï† Ïàò ÏûàÏñ¥Ïöî.', 'success', 'ÏÑ§Ï†ï Ï†ÄÏû• ÏôÑÎ£å');
            }
        }

        // Í≥µÌÜµ Í∞ÄÏù¥Îìú Î©îÏãúÏßÄ ÏÉùÏÑ± Ìï®Ïàò
        function createGuideMessage(icon, title, description) {
            return `
                <div class="guide-message">
                    <div class="guide-icon">${icon}</div>
                    <div class="guide-text">
                        <strong>${title}</strong><br>
                        ${description}
                    </div>
                </div>
            `;
        }

        // ÌÜ†Ïä§Ìä∏ ÏïåÎ¶º ÏãúÏä§ÌÖú
        function showToast(message, type = 'info', title = '', duration = 4000) {
            const container = document.getElementById('toastContainer');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '‚úì',
                error: '‚úï',
                warning: '‚ö†',
                info: '‚Ñπ'
            };

            const titles = {
                success: title || 'ÏÑ±Í≥µ',
                error: title || 'Ïò§Î•ò',
                warning: title || 'Í≤ΩÍ≥†',
                info: title || 'ÏïåÎ¶º'
            };

            toast.innerHTML = `
                <div class="toast-header">
                    <div class="toast-icon">${icons[type]}</div>
                    <div class="toast-title">${titles[type]}</div>
                    <button class="toast-close" onclick="removeToast(this.parentElement.parentElement)">&times;</button>
                </div>
                <div class="toast-message">${message}</div>
                <div class="toast-progress"></div>
            `;

            container.appendChild(toast);

            // Ïï†ÎãàÎ©îÏù¥ÏÖòÏùÑ ÏúÑÌï¥ ÏïΩÍ∞ÑÏùò ÏßÄÏó∞ ÌõÑ show ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);

            // ÏßÑÌñâ Î∞î Ïï†ÎãàÎ©îÏù¥ÏÖò
            const progressBar = toast.querySelector('.toast-progress');
            progressBar.style.width = '100%';
            progressBar.style.transitionDuration = `${duration}ms`;

            // ÏûêÎèô Ï†úÍ±∞
            setTimeout(() => {
                removeToast(toast);
            }, duration);
        }

        function removeToast(toast) {
            if (!toast) return;
            
            toast.classList.remove('show');
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.parentElement.removeChild(toast);
                }
            }, 300);
        }

        // Í∏∞Ï°¥ showStatus Ìï®ÏàòÎ•º ÌÜ†Ïä§Ìä∏ ÏïåÎ¶ºÏúºÎ°ú ÎåÄÏ≤¥
        function showStatus(message, type = 'info') {
            const toastType = type === 'success' ? 'success' : 
                             type === 'error' ? 'error' : 
                             type === 'warning' ? 'warning' : 'info';
            
            showToast(message, toastType);
        }

        // API ÏöîÏ≤≠ Ìï®Ïàò (ÌÉÄÏûÑÏïÑÏõÉ Î∞è Ïû¨ÏãúÎèÑ Ìè¨Ìï®)
        async function apiRequest(url, method = 'GET', data = null, retries = 3) {
            for (let attempt = 1; attempt <= retries; attempt++) {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10Ï¥à ÌÉÄÏûÑÏïÑÏõÉ
                    
                    const options = {
                        method: method,
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        signal: controller.signal
                    };
                    
                    if (data) {
                        options.body = JSON.stringify(data);
                    }
                    
                    const response = await fetch(url, options);
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    return await response.json();
                } catch (error) {
                    console.error(`API ÏöîÏ≤≠ Ïã§Ìå® (ÏãúÎèÑ ${attempt}/${retries}):`, error);
                    
                    if (attempt === retries) {
                        throw error;
                    }
                    
                    // Ïû¨ÏãúÎèÑ Ï†Ñ Ïû†Ïãú ÎåÄÍ∏∞
                    await new Promise(resolve => setTimeout(resolve, 1000 * attempt));
                }
            }
        }

        // ÌòÑÏû¨ Í∞ÄÍ≤å ID Í∞ÄÏ†∏Ïò§Í∏∞
        async function getCurrentStoreId() {
            try {
                const data = await apiRequest(`${API_BASE}/data`);
                return data.currentStoreId || null;
            } catch (error) {
                console.error('ÌòÑÏû¨ Í∞ÄÍ≤å ID Ï°∞Ìöå Ïã§Ìå®:', error);
                return null;
            }
        }

        // Í∞ÄÍ≤å Î™©Î°ù Î°úÎìú
        // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateStoreStats() {
            const total = allStores.length;
            const active = allStores.filter(s => s.status === 'active').length;
            const paused = allStores.filter(s => s.status === 'paused').length;
            
            // Ïò§Îäò Ï∂îÍ∞ÄÎêú Í∞ÄÍ≤å
            const today = new Date().toISOString().split('T')[0];
            const todayStores = allStores.filter(s => {
                const createdDate = new Date(s.createdAt).toISOString().split('T')[0];
                return createdDate === today;
            }).length;
            
            document.getElementById('totalStoresCount').textContent = total;
            document.getElementById('activeStoresCount').textContent = active;
            document.getElementById('pausedStoresCount').textContent = paused;
            document.getElementById('todayStoresCount').textContent = todayStores;
        }
        
        // Í∞ÄÍ≤å Î™©Î°ù ÌïÑÌÑ∞ÎßÅ
        function filterStoreList() {
            const searchQuery = document.getElementById('storeSearchInput').value.toLowerCase();
            const statusFilter = document.getElementById('storeStatusFilter').value;
            const sortBy = document.getElementById('storeSortBy').value;
            
            // ÌïÑÌÑ∞ÎßÅ
            filteredStores = allStores.filter(store => {
                // Í≤ÄÏÉâ ÌïÑÌÑ∞
                if (searchQuery) {
                    const searchText = `${store.name} ${store.phone} ${store.address}`.toLowerCase();
                    if (!searchText.includes(searchQuery)) return false;
                }
                
                // ÏÉÅÌÉú ÌïÑÌÑ∞
                if (statusFilter && store.status !== statusFilter) {
                    return false;
                }
                
                return true;
            });
            
            // Ï†ïÎ†¨
            filteredStores.sort((a, b) => {
                if (sortBy === 'name') {
                    return a.name.localeCompare(b.name);
                } else if (sortBy === 'createdAt') {
                    return new Date(b.createdAt) - new Date(a.createdAt);
                } else if (sortBy === 'lastModified') {
                    return new Date(b.lastModified || b.createdAt) - new Date(a.lastModified || a.createdAt);
                }
                return 0;
            });
            
            // ÌïÑÌÑ∞ÎßÅÎêú Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('filteredStoresCount').textContent = filteredStores.length;
            
            // ÌÖåÏù¥Î∏î Îã§Ïãú Î†åÎçîÎßÅ
            renderStoreTable();
        }
        
        // Í∞ÄÍ≤å ÌÖåÏù¥Î∏î Î†åÎçîÎßÅ
        async function renderStoreTable() {
            const tbody = document.getElementById('storeTableBody');
            const currentStoreId = await getCurrentStoreId();
            
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (filteredStores.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="padding: 40px; text-align: center; color: #94a3b8;">Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§</td></tr>';
                return;
            }
            
            filteredStores.forEach(store => {
                const tr = document.createElement('tr');
                tr.setAttribute('data-store-id', store.id);
                tr.style.borderBottom = '1px solid #e2e8f0';
                tr.style.transition = 'all 0.2s ease';
                tr.style.cursor = 'pointer';
                
                const isSelected = currentStoreId === store.id;
                
                // ÏÑ†ÌÉùÎêú Ìñâ Ïä§ÌÉÄÏùºÎßÅ
                if (isSelected) {
                    tr.style.background = 'linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)';
                    tr.style.borderLeft = '4px solid #667eea';
                    tr.style.boxShadow = '0 2px 4px rgba(102, 126, 234, 0.1)';
                }
                
                tr.onmouseover = () => {
                    if (!isSelected) {
                        tr.style.background = '#f8fafc';
                    }
                };
                tr.onmouseout = () => {
                    if (isSelected) {
                        tr.style.background = 'linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)';
                    } else {
                        tr.style.background = 'white';
                    }
                };
                
                // ÌÖåÏù¥Î∏î Ìñâ ÌÅ¥Î¶≠ Ïãú Í∞ÄÍ≤å Ï†ÑÌôò
                tr.onclick = () => selectStore(store.id);
                
                const storeUrl = `${window.location.origin}/store.html?id=${store.id}`;
                const shortId = store.id.split('_').pop().substring(0, 8);
                
                const statusBadge = store.status === 'paused' 
                    ? '<span style="display: inline-block; padding: 4px 12px; background: #fef3c7; color: #92400e; border-radius: 12px; font-size: 12px; font-weight: 600;">ÏùºÏãúÏ†ïÏßÄ</span>'
                    : '<span style="display: inline-block; padding: 4px 12px; background: #d1fae5; color: #065f46; border-radius: 12px; font-size: 12px; font-weight: 600;">ÌôúÏÑ±</span>';
                
                const pauseResumeBtn = store.status === 'paused'
                    ? `<button onclick="event.stopPropagation(); resumeStore('${store.id}')" style="padding: 6px 12px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.2s;">Ïû¨Í∞ú</button>`
                    : `<button onclick="event.stopPropagation(); pauseStore('${store.id}')" style="padding: 6px 12px; background: #f59e0b; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.2s;">ÏùºÏãúÏ†ïÏßÄ</button>`;
                
                const selectedIcon = isSelected ? '<span style="margin-right: 8px; color: #667eea;">‚úì</span>' : '';
                
                tr.innerHTML = `
                    <td style="padding: 16px 12px;">
                        <code style="background: #f1f5f9; padding: 4px 8px; border-radius: 4px; font-size: 12px; color: #475569;">${shortId}</code>
                    </td>
                    <td style="padding: 16px 12px; font-weight: 600; color: #1e293b;">
                        ${selectedIcon}${store.name}
                    </td>
                    <td style="padding: 16px 12px; color: #64748b;">${store.phone || '-'}</td>
                    <td style="padding: 16px 12px;">${statusBadge}</td>
                    <td style="padding: 16px 12px; text-align: center;">
                        <div style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap;">
                            ${pauseResumeBtn}
                            <button onclick="event.stopPropagation(); copyStoreUrl('${storeUrl}')" style="padding: 6px 12px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.2s;">URL Î≥µÏÇ¨</button>
                            <button onclick="event.stopPropagation(); deleteStore('${store.id}')" style="padding: 6px 12px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.2s;">ÏÇ≠Ï†ú</button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
        }
        
        // JSON ÎÇ¥Î≥¥ÎÇ¥Í∏∞
        async function exportStoresJSON() {
            try {
                const response = await fetch(`${API_BASE}/stores/bulk-export?format=json`);
                if (!response.ok) throw new Error('Failed to export');
                
                const data = await response.json();
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `stores_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                
                showToast('JSON ÌååÏùºÏù¥ Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§.', 'success');
            } catch (error) {
                console.error('Error exporting JSON:', error);
                showToast('ÎÇ¥Î≥¥ÎÇ¥Í∏∞ Ïã§Ìå®', 'error');
            }
        }
        
        // CSV ÎÇ¥Î≥¥ÎÇ¥Í∏∞
        // ÌÜµÍ≥Ñ Ïπ¥Îìú ÌÅ¥Î¶≠ ÌïÑÌÑ∞
        function filterByStatCard(type) {
            const statusFilter = document.getElementById('storeStatusFilter');
            const searchInput = document.getElementById('storeSearchInput');
            
            // Í≤ÄÏÉâ Ï¥àÍ∏∞Ìôî
            searchInput.value = '';
            
            if (type === 'all') {
                statusFilter.value = '';
            } else if (type === 'active') {
                statusFilter.value = 'active';
            } else if (type === 'paused') {
                statusFilter.value = 'paused';
            } else if (type === 'today') {
                statusFilter.value = '';
                const today = new Date().toISOString().split('T')[0];
                filteredStores = allStores.filter(store => {
                    const storeDate = store.createdAt ? store.createdAt.split('T')[0] : '';
                    return storeDate === today;
                });
                document.getElementById('filteredStoresCount').textContent = filteredStores.length;
                renderStoreTable();
                return;
            }
            
            filterStoreList();
        }
        
        // URL Î≥µÏÇ¨
        async function copyStoreUrl(url) {
            try {
                await navigator.clipboard.writeText(url);
                showToast('URLÏù¥ ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§', 'success');
            } catch (err) {
                showToast('URL Î≥µÏÇ¨ Ïã§Ìå®', 'error');
            }
        }
        
        async function exportStoresCSV() {
            try {
                const response = await fetch(`${API_BASE}/stores/bulk-export?format=csv`);
                if (!response.ok) throw new Error('Failed to export');
                
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `stores_${new Date().toISOString().split('T')[0]}.csv`;
                a.click();
                URL.revokeObjectURL(url);
                
                showToast('CSV ÌååÏùºÏù¥ Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§.', 'success');
            } catch (error) {
                console.error('Error exporting CSV:', error);
                showToast('ÎÇ¥Î≥¥ÎÇ¥Í∏∞ Ïã§Ìå®', 'error');
            }
        }

        async function loadStoreList() {
            try {
                const stores = await apiRequest(`${API_BASE}/stores`);
                allStores = stores;
                filteredStores = stores;
                
                // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
                updateStoreStats();
                
                // ÌïÑÌÑ∞Îêú Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
                document.getElementById('filteredStoresCount').textContent = filteredStores.length;
                
                // ÌÖåÏù¥Î∏î Î†åÎçîÎßÅ
                await renderStoreTable();
                
            } catch (error) {
                console.error('Í∞ÄÍ≤å Î™©Î°ù Î°úÎìú Ïã§Ìå®:', error);
                const tbody = document.getElementById('storeTableBody');
                if (tbody) {
                    tbody.innerHTML = '<tr><td colspan="5" style="padding: 40px; text-align: center; color: #ef4444;">Í∞ÄÍ≤å Î™©Î°ùÏùÑ Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.</td></tr>';
                }
                showToast('Í∞ÄÍ≤å Î™©Î°ùÏùÑ Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // Í∞ÄÍ≤å ÏÑ†ÌÉù (ÏòÅÏó≠ ÌÅ¥Î¶≠)
        async function selectStore(storeId) {
            if (isLoading) return;
            isLoading = true;
            startProgress();
            
            try {
                // ÌòÑÏû¨ Í∞ÄÍ≤å ÏÑ§Ï†ï
                await apiRequest(`${API_BASE}/current-store`, 'POST', { storeId });
                
                // ÌòÑÏû¨ Í∞ÄÍ≤å Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏ (ÏÇ¨Ïù¥ÎìúÎ∞î)
                await updateCurrentStoreInfo(storeId);
                
                // ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å ÏãúÍ∞ÅÏ†Å ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏ (ÌÖåÏù¥Î∏î Ï†ÑÏ≤¥ Ïû¨Î†åÎçîÎßÅ)
                await renderStoreTable();
                
                // ÏÑ§Ï†ï Î°úÎìú
                await loadSettings();
                
                // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎìú (DB Îç∞Ïù¥ÌÑ∞ ‚Üí Ìèº Îß§Ìïë)
                console.log('üîÑ [DEBUG] Í∞ÄÍ≤å ÏÑ†ÌÉù ÌõÑ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎî© ÏãúÏûë');
                await loadUserInfo(storeId);
                console.log('‚úÖ [DEBUG] Í∞ÄÍ≤å ÏÑ†ÌÉù ÌõÑ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎî© ÏôÑÎ£å');
                
                // ÏÑúÎ∏åÎèÑÎ©îÏù∏ Î°úÎìú Î∞è ÌÜ†Ïä§Ìä∏ ÏïåÎ¶º
                const stores = await apiRequest(`${API_BASE}/stores`);
                const selectedStore = stores.find(s => s.id === storeId);
                console.log('üîç [DEBUG] ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å Îç∞Ïù¥ÌÑ∞:', selectedStore);
                if (selectedStore) {
                    loadSubdomain(selectedStore);
                    showToast(`${selectedStore.name} Í∞ÄÍ≤åÍ∞Ä ÏÑ†ÌÉùÎêòÏóàÏäµÎãàÎã§.`, 'success', 'Í∞ÄÍ≤å ÏÑ†ÌÉù');
                }
                
            } catch (error) {
                console.error('Í∞ÄÍ≤å ÏÑ†ÌÉù Ïã§Ìå®:', error);
                showToast('Í∞ÄÍ≤å ÏÑ†ÌÉùÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error', 'Ïò§Î•ò');
            } finally {
                isLoading = false;
                completeProgress();
            }
        }

        // ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å ÏãúÍ∞ÅÏ†Å ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updateSelectedStoreVisual(selectedStoreId) {
            // ÌÖåÏù¥Î∏îÏùò Î™®Îì† Ìñâ Î∞∞Í≤Ω Ï¥àÍ∏∞Ìôî
            const tbody = document.getElementById('storeTableBody');
            if (!tbody) return;
            
            const allRows = tbody.querySelectorAll('tr[data-store-id]');
            allRows.forEach(row => {
                const storeId = row.getAttribute('data-store-id');
                if (storeId === selectedStoreId) {
                    row.style.background = '#eff6ff';
                } else {
                    row.style.background = 'white';
                }
            });
        }

        // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
        async function updateCurrentStoreInfo(storeId) {
            try {
                const stores = await apiRequest(`${API_BASE}/stores`);
                const currentStore = stores.find(s => s.id === storeId);
                if (currentStore) {
                    // ÏÇ¨Ïù¥ÎìúÎ∞îÏùò ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
                    await updateSelectedStoreCard(storeId);
                }
            } catch (error) {
                console.error('ÌòÑÏû¨ Í∞ÄÍ≤å Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:', error);
            }
        }

        // ÏÇ¨Ïù¥ÎìúÎ∞î Í∞ÄÍ≤å Ï†ïÎ≥¥ Ï¥àÍ∏∞Ìôî (Í∞ÄÍ≤å ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞)
        function initializeSidebarStoreInfo() {
            const nameElement = document.getElementById('selectedStoreName');
            const subtitleElement = document.getElementById('selectedStoreSubtitle');
            
            if (nameElement) nameElement.textContent = 'Í∞ÄÍ≤åÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî';
            if (subtitleElement) subtitleElement.textContent = 'Ï¢åÏ∏° Í∞ÄÍ≤å Î™©Î°ùÏóêÏÑú ÏÑ†ÌÉùÌïòÏÑ∏Ïöî';
        }

        // ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å Ïπ¥Îìú ÏóÖÎç∞Ïù¥Ìä∏
        async function updateSelectedStoreCard(storeId) {
            try {
                if (!storeId) {
                    // Í∞ÄÍ≤åÍ∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ Ï¥àÍ∏∞Ìôî
                    initializeSidebarStoreInfo();
                    return;
                }
                
                const stores = await apiRequest(`${API_BASE}/stores`);
                const selectedStore = stores.find(store => store.id === storeId);
                
                if (selectedStore) {
                    const nameElement = document.getElementById('selectedStoreName');
                    const subtitleElement = document.getElementById('selectedStoreSubtitle');
                    
                    if (nameElement) nameElement.textContent = selectedStore.name || 'Ïù¥Î¶Ñ ÏóÜÏùå';
                    if (subtitleElement) subtitleElement.textContent = selectedStore.subtitle || 'Î∂ÄÏ†úÎ™© ÏóÜÏùå';
                } else {
                    // Í∞ÄÍ≤åÎ•º Ï∞æÏùÑ Ïàò ÏóÜÎäî Í≤ΩÏö∞ Ï¥àÍ∏∞Ìôî
                    initializeSidebarStoreInfo();
                }
            } catch (error) {
                console.error('ÏÑ†ÌÉùÎêú Í∞ÄÍ≤å Ïπ¥Îìú ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:', error);
                // Ïò§Î•ò Î∞úÏÉù Ïãú Ï¥àÍ∏∞Ìôî
                initializeSidebarStoreInfo();
            }
        }

        // Í∞ÄÍ≤åÎ™Ö ÏûÖÎ†• Î™®Îã¨ ÌëúÏãú
        function showStoreNameModal() {
            const container = document.getElementById('toastContainer') || createToastContainer();
            
            const modal = document.createElement('div');
            modal.className = 'toast input-modal';
            
            modal.innerHTML = `
                <div class="toast-header">
                    <span class="toast-icon">üè¨</span>
                    <span class="toast-title">ÏÉà Í∞ÄÍ≤å Ï∂îÍ∞Ä</span>
                    <button class="toast-close" onclick="closeStoreNameModal(this)">√ó</button>
                </div>
                <div class="toast-message">
                    ÏÉà Í∞ÄÍ≤åÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî
                </div>
                <div class="modal-input-group">
                    <input type="text" id="storeNameInput" placeholder="Í∞ÄÍ≤åÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" class="modal-input" maxlength="50">
                </div>
                <div class="toast-actions">
                    <button class="toast-btn toast-btn-cancel" onclick="closeStoreNameModal(this)">Ï∑®ÏÜå</button>
                    <button class="toast-btn toast-btn-confirm" onclick="confirmStoreName()">Ï∂îÍ∞Ä</button>
                </div>
            `;
            
            container.appendChild(modal);
            
            setTimeout(() => {
                modal.classList.add('show');
                document.getElementById('storeNameInput').focus();
            }, 10);
            
            // Enter ÌÇ§Î°ú ÌôïÏù∏
            document.getElementById('storeNameInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    confirmStoreName();
                }
            });
        }

        // Í∞ÄÍ≤åÎ™Ö ÏûÖÎ†• Î™®Îã¨ Îã´Í∏∞
        function closeStoreNameModal(closeButton) {
            const modal = closeButton.closest('.toast');
            modal.classList.remove('show');
            setTimeout(() => {
                if (modal.parentNode) {
                    modal.parentNode.removeChild(modal);
                }
            }, 300);
        }

        // Í∞ÄÍ≤åÎ™Ö ÌôïÏù∏ Î∞è Ï∂îÍ∞Ä
        function confirmStoreName() {
            const input = document.getElementById('storeNameInput');
            const storeName = input.value.trim();
            
            if (!storeName) {
                showToast('Í∞ÄÍ≤åÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.', 'error', 'Ïò§Î•ò');
                input.focus();
                return;
            }
            
            closeStoreNameModal(document.querySelector('.input-modal .toast-close'));
            addNewStore(storeName);
        }

        // ÏÉà Í∞ÄÍ≤å Ï∂îÍ∞Ä (ÏàòÏ†ïÎêú Î≤ÑÏ†Ñ)
        async function addNewStore(storeName) {
            try {
                const newStore = {
                    name: storeName,
                    subtitle: '',
                    phone: '',
                    address: ''
                };
                
                // Í∞úÎ≥Ñ Í∞ÄÍ≤å Í∞ùÏ≤¥Î•º POSTÎ°ú Ï†ÑÏÜ°
                const result = await apiRequest(`${API_BASE}/stores`, 'POST', newStore);
                console.log('Í∞ÄÍ≤å Ï∂îÍ∞Ä Í≤∞Í≥º:', result);
                console.log('result.store:', result.store);
                console.log('result.store.id:', result.store?.id);
                
                // ÏÉàÎ°ú Ï∂îÍ∞ÄÎêú Í∞ÄÍ≤åÎ•º ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Í∞ÄÍ≤åÎ°ú ÏÑ§Ï†ï
                if (result && result.store && result.store.id) {
                    console.log('ÏÉà Í∞ÄÍ≤å ÏûêÎèô ÏÑ†ÌÉù ÏãúÏûë:', result.store.id);
                    await selectStore(result.store.id);
                    console.log('ÏÉà Í∞ÄÍ≤å ÏûêÎèô ÏÑ†ÌÉù ÏôÑÎ£å');
                    showToast(`"${storeName}" Í∞ÄÍ≤åÍ∞Ä Ï∂îÍ∞ÄÎêòÍ≥† ÏÑ†ÌÉùÎêòÏóàÏäµÎãàÎã§!`, 'success', 'ÏÑ±Í≥µ');
                } else {
                    console.log('ÏÉà Í∞ÄÍ≤å ÏûêÎèô ÏÑ†ÌÉù Ïã§Ìå® - ÏùëÎãµ Íµ¨Ï°∞:', result);
                    showToast(`"${storeName}" Í∞ÄÍ≤åÍ∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§!`, 'success', 'ÏÑ±Í≥µ');
                }
                
                await loadStoreList();
            } catch (error) {
                console.error('Í∞ÄÍ≤å Ï∂îÍ∞Ä Ïã§Ìå®:', error);
                showToast('Í∞ÄÍ≤å Ï∂îÍ∞ÄÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error', 'Ïò§Î•ò');
            }
        }

        // Í∞ÄÍ≤å ÏÇ≠Ï†ú ÌôïÏù∏ Î™®Îã¨ ÌëúÏãú
        function showDeleteConfirmModal(storeId, storeName) {
            const container = document.getElementById('toastContainer') || createToastContainer();
            
            const modal = document.createElement('div');
            modal.className = 'toast delete-modal';
            
            modal.innerHTML = `
                <div class="toast-header">
                    <span class="toast-icon">‚ö†Ô∏è</span>
                    <span class="toast-title">Í∞ÄÍ≤å ÏÇ≠Ï†ú ÌôïÏù∏</span>
                    <button class="toast-close" onclick="closeDeleteConfirmModal(this)">√ó</button>
                </div>
                <div class="toast-message">
                    <strong>"${storeName}"</strong> Í∞ÄÍ≤åÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?<br>
                    <small style="color: #666; margin-top: 8px; display: block;">Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.</small>
                </div>
                <div class="toast-actions">
                    <button class="toast-btn toast-btn-cancel" onclick="closeDeleteConfirmModal(this)">Ï∑®ÏÜå</button>
                    <button class="toast-btn toast-btn-danger" onclick="confirmDeleteStore('${storeId}')">ÏÇ≠Ï†ú</button>
                </div>
            `;
            
            container.appendChild(modal);
            
            setTimeout(() => {
                modal.classList.add('show');
            }, 10);
            
            // ÏûêÎèô Îã´Í∏∞ (15Ï¥à ÌõÑ)
            setTimeout(() => {
                closeDeleteConfirmModal(modal.querySelector('.toast-close'));
            }, 15000);
        }

        // ÏÇ≠Ï†ú ÌôïÏù∏ Î™®Îã¨ Îã´Í∏∞
        function closeDeleteConfirmModal(closeButton) {
            const modal = closeButton.closest('.toast');
            modal.classList.remove('show');
            setTimeout(() => {
                if (modal.parentNode) {
                    modal.parentNode.removeChild(modal);
                }
            }, 300);
        }

        // Í∞ÄÍ≤å ÏÇ≠Ï†ú ÌôïÏù∏ Î∞è Ïã§Ìñâ
        async function confirmDeleteStore(storeId) {
            closeDeleteConfirmModal(document.querySelector('.delete-modal .toast-close'));
            await performDeleteStore(storeId);
        }

        // Ïã§Ï†ú Í∞ÄÍ≤å ÏÇ≠Ï†ú ÏàòÌñâ
        async function performDeleteStore(storeId) {
            try {
                // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Í∞ÄÍ≤åÍ∞Ä ÏÇ≠Ï†úÎêòÎäî Í∞ÄÍ≤åÏù∏ÏßÄ ÌôïÏù∏
                const currentStoreId = await getCurrentStoreId();
                const isCurrentStore = currentStoreId === storeId;
                
                await apiRequest(`${API_BASE}/stores/${storeId}`, 'DELETE');
                showToast('Í∞ÄÍ≤åÍ∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§!', 'success', 'ÏÑ±Í≥µ');
                await loadStoreList();
                
                // ÏÇ≠Ï†úÎêú Í∞ÄÍ≤åÍ∞Ä ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Í∞ÄÍ≤åÏòÄÎã§Î©¥ ÏÑ†ÌÉù Ï¥àÍ∏∞Ìôî
                if (isCurrentStore) {
                    await apiRequest(`${API_BASE}/current-store`, 'POST', { storeId: null });
                    initializeSidebarStoreInfo();
                }
            } catch (error) {
                console.error('Í∞ÄÍ≤å ÏÇ≠Ï†ú Ïã§Ìå®:', error);
                showToast('Í∞ÄÍ≤å ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error', 'Ïò§Î•ò');
            }
        }

        // Í∞ÄÍ≤å Ï§ëÏßÄ
        async function pauseStore(storeId) {
            try {
                await apiRequest(`${API_BASE}/stores/${storeId}/pause`, 'POST');
                showToast('Í∞ÄÍ≤åÍ∞Ä Ï§ëÏßÄÎêòÏóàÏäµÎãàÎã§!', 'success', 'ÏÑ±Í≥µ');
                await loadStoreList();
            } catch (error) {
                console.error('Í∞ÄÍ≤å Ï§ëÏßÄ Ïã§Ìå®:', error);
                showToast('Í∞ÄÍ≤å Ï§ëÏßÄÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error', 'Ïò§Î•ò');
            }
        }

        // Í∞ÄÍ≤å Ïû¨Í∞ú
        async function resumeStore(storeId) {
            try {
                await apiRequest(`${API_BASE}/stores/${storeId}/resume`, 'POST');
                showToast('Í∞ÄÍ≤åÍ∞Ä Ïû¨Í∞úÎêòÏóàÏäµÎãàÎã§!', 'success', 'ÏÑ±Í≥µ');
                await loadStoreList();
            } catch (error) {
                console.error('Í∞ÄÍ≤å Ïû¨Í∞ú Ïã§Ìå®:', error);
                showToast('Í∞ÄÍ≤å Ïû¨Í∞úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error', 'Ïò§Î•ò');
            }
        }

        // Í∞ÄÍ≤å ÏÇ≠Ï†ú
        async function deleteStore(storeId) {
            const storeName = await getStoreNameById(storeId);
            showDeleteConfirmModal(storeId, storeName);
        }

        // Í∞ÄÍ≤å ÌéòÏù¥ÏßÄ Î≥¥Í∏∞
        async function viewStorePage(storeId) {
            try {
                // Í∞ÄÍ≤åÏùò ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÌôïÏù∏
                const stores = await apiRequest(`${API_BASE}/stores`);
                const store = stores.find(s => s.id === storeId);
                
                let storeUrl;
                if (store && store.subdomain) {
                    // ÏÑúÎ∏åÎèÑÎ©îÏù∏Ïù¥ ÏÑ§Ï†ïÎêú Í≤ΩÏö∞ ÏÑúÎ∏åÎèÑÎ©îÏù∏ URL ÏÇ¨Ïö©
                    storeUrl = `/${store.subdomain}`;
                    console.log('ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÌéòÏù¥ÏßÄ URL:', storeUrl);
                } else {
                    // ÏÑúÎ∏åÎèÑÎ©îÏù∏Ïù¥ ÏóÜÎäî Í≤ΩÏö∞ Í∏∞Ï°¥ Î∞©Ïãù ÏÇ¨Ïö©
                    storeUrl = `/store.html?id=${storeId}`;
                    console.log('Í∏∞Ï°¥ ÌéòÏù¥ÏßÄ URL:', storeUrl);
                }
                
                window.open(storeUrl, '_blank');
            } catch (error) {
                console.error('Í∞ÄÍ≤å ÌéòÏù¥ÏßÄ Ïó¥Í∏∞ Ïã§Ìå®:', error);
                // Ïò§Î•ò Î∞úÏÉù Ïãú Í∏∞Ï°¥ Î∞©ÏãùÏúºÎ°ú Ìè¥Î∞±
            const storeUrl = `/store.html?id=${storeId}`;
            window.open(storeUrl, '_blank');
            }
        }

        // Í∞ÄÍ≤åÎ™ÖÏúºÎ°ú ID Ï∞æÍ∏∞
        async function getStoreNameById(storeId) {
            try {
                console.log('Í∞ÄÍ≤åÎ™Ö Ï°∞Ìöå ÏöîÏ≤≠:', storeId);
                const stores = await apiRequest(`${API_BASE}/stores`);
                console.log('Í∞ÄÍ≤å Î™©Î°ù:', stores);
                const store = stores.find(s => s.id === storeId);
                console.log('Ï∞æÏùÄ Í∞ÄÍ≤å:', store);
                return store ? store.name : 'Ïïå Ïàò ÏóÜÎäî Í∞ÄÍ≤å';
            } catch (error) {
                console.error('Í∞ÄÍ≤åÎ™Ö Ï°∞Ìöå Ïã§Ìå®:', error);
                return 'Ïïå Ïàò ÏóÜÎäî Í∞ÄÍ≤å';
            }
        }

        // ÏÑ§Ï†ï Î°úÎìú
        async function loadSettings() {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) {
                    showStatus('Í∞ÄÍ≤åÎ•º Î®ºÏ†Ä ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                    return;
                }
                
                const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                
                // Í∏∞Î≥∏ Ï†ïÎ≥¥
                document.getElementById('storeName').value = settings.basic?.storeName || '';
                document.getElementById('storeSubtitle').value = settings.basic?.storeSubtitle || '';
                document.getElementById('storePhone').value = settings.basic?.storePhone || '';
                document.getElementById('storeAddress').value = settings.basic?.storeAddress || '';
                
                // ÏÑúÎ∏åÎèÑÎ©îÏù∏ Î°úÎìú (ÏÑ§Ï†ï Î°úÎìú ÏãúÏóêÎèÑ Ïã§Ìñâ)
                const stores = await apiRequest(`${API_BASE}/stores`);
                const currentStore = stores.find(s => s.id === currentStoreId);
                if (currentStore) {
                    console.log('üîç [DEBUG] loadSettingsÏóêÏÑú ÏÑúÎ∏åÎèÑÎ©îÏù∏ Î°úÎìú:', currentStore);
                    loadSubdomain(currentStore);
                }
                
                // Î∞∞Îã¨Ïï± ÏÑ§Ï†ï
                document.getElementById('ttaengUrl').value = settings.delivery?.ttaengUrl || '';
                document.getElementById('baeminUrl').value = settings.delivery?.baeminUrl || '';
                document.getElementById('coupangUrl').value = settings.delivery?.coupangUrl || '';
                document.getElementById('yogiyoUrl').value = settings.delivery?.yogiyoUrl || '';
                
                // Î∞∞Îã¨Ïï± ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ (ÏÑ§Ï†ï Î°úÎìú ÌõÑ)
                setTimeout(() => {
                    updateAllDeliveryStatuses();
                }, 100);
                
                // Ìï†Ïù∏ ÏÑ§Ï†ï
                document.getElementById('discountEnabled').checked = settings.discount?.enabled || false;
                document.getElementById('discountTitle').value = settings.discount?.title || '';
                document.getElementById('discountDescription').value = settings.discount?.description || '';
                
                // Ìï†Ïù∏ Ìèº ÌëúÏãú/Ïà®ÍπÄ
                const discountForm = document.getElementById('discountForm');
                if (settings.discount?.enabled) {
                    discountForm.classList.add('active');
                } else {
                    discountForm.classList.remove('active');
                }
                
                // ÌîΩÏóÖ ÏÑ§Ï†ï
                document.getElementById('pickupEnabled').checked = settings.pickup?.enabled || false;
                document.getElementById('pickupTitle').value = settings.pickup?.title || '';
                document.getElementById('pickupDescription').value = settings.pickup?.description || '';
                
                // ÌîΩÏóÖ Ìèº ÌëúÏãú/Ïà®ÍπÄ
                const pickupForm = document.getElementById('pickupForm');
                if (settings.pickup?.enabled) {
                    pickupForm.classList.add('active');
                } else {
                    pickupForm.classList.remove('active');
                }
                
                // ÏòÅÏóÖÏãúÍ∞Ñ Î°úÎìú
                loadBusinessHours(settings);
                
                // Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï
                if (settings.images) {
                    updateImagePreview('mainLogo', settings.images.mainLogo);
                    updateImagePreview('menuImage', settings.images.menuImage);
                }
                
                // Î∞∞Îã¨Ïï± ÏàúÏÑú Î†åÎçîÎßÅ
                await renderDeliveryOrder();
                
                // ÏÑπÏÖò ÏàúÏÑú Î†åÎçîÎßÅ
                await renderSectionOrder();
                
                // QR ÏΩîÎìú Î°úÎìú
                loadQRCode(settings);
                
            } catch (error) {
                console.error('ÏÑ§Ï†ï Î°úÎìú Ïã§Ìå®:', error);
                showStatus('ÏÑ§Ï†ïÏùÑ Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // Í∏∞Ï°¥ ÏòÅÏóÖÏãúÍ∞Ñ Î∞±ÏóÖ Ï†ÄÏû•ÏÜå
        let originalBusinessHours = {};
        let allDaysSameMode = false;
        
        // 24ÏãúÍ∞Ñ ÏòÅÏóÖ Î™®Îìú ÌÜ†Í∏Ä
        function toggle24HoursMode() {
            const is24Hours = document.getElementById('allDays24Hours').checked;
            const days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
            
            // Îã§Î•∏ Î™®ÎìúÎì§ ÎπÑÌôúÏÑ±Ìôî
            if (is24Hours) {
                document.getElementById('allDaysSame').checked = false;
                allDaysSameMode = false;
                clearDay24Hours();
            }
            
            if (is24Hours) {
                // 24ÏãúÍ∞Ñ Î™®ÎìúÎ°ú Ï†ÑÌôò: ÌòÑÏû¨ ÏÑ§Ï†ïÏùÑ Î∞±ÏóÖÌïòÍ≥† 24ÏãúÍ∞ÑÏúºÎ°ú ÏÑ§Ï†ï
                days.forEach(day => {
                    const enabled = document.getElementById(`${day}_enabled`);
                    const open = document.getElementById(`${day}_open`);
                    const close = document.getElementById(`${day}_close`);
                    
                    // ÌòÑÏû¨ ÏÑ§Ï†ï Î∞±ÏóÖ
                    originalBusinessHours[day] = {
                        enabled: enabled.checked,
                        open: open.value,
                        close: close.value
                    };
                    
                    // 24ÏãúÍ∞ÑÏúºÎ°ú ÏÑ§Ï†ï
                    enabled.checked = true;
                    open.value = '00:00';
                    close.value = '24:00';
                    enabled.disabled = true;
                    open.disabled = true;
                    close.disabled = true;
                });
            } else {
                // ÏùºÎ∞ò Î™®ÎìúÎ°ú Î≥µÏõê: Î∞±ÏóÖÎêú ÏÑ§Ï†ïÏúºÎ°ú Î≥µÏõê
                days.forEach(day => {
                    const enabled = document.getElementById(`${day}_enabled`);
                    const open = document.getElementById(`${day}_open`);
                    const close = document.getElementById(`${day}_close`);
                    
                    // ÏûÖÎ†• ÌïÑÎìú ÌôúÏÑ±Ìôî
                    enabled.disabled = false;
                    open.disabled = false;
                    close.disabled = false;
                    
                    // Î∞±ÏóÖÎêú ÏÑ§Ï†ïÏúºÎ°ú Î≥µÏõê (Î∞±ÏóÖÏù¥ ÏûàÎäî Í≤ΩÏö∞Îßå)
                    if (originalBusinessHours[day]) {
                        enabled.checked = originalBusinessHours[day].enabled;
                        open.value = originalBusinessHours[day].open;
                        close.value = originalBusinessHours[day].close;
                    }
                });
            }
            
            saveBusinessHours();
        }
        
        // Î™®Îì† ÏöîÏùº ÎèôÏùº ÏÑ§Ï†ï ÌÜ†Í∏Ä
        function toggleAllDaysSame() {
            allDaysSameMode = document.getElementById('allDaysSame').checked;
            const days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
            
            // Îã§Î•∏ Î™®ÎìúÎì§ ÎπÑÌôúÏÑ±Ìôî
            if (allDaysSameMode) {
                document.getElementById('allDays24Hours').checked = false;
                clearDay24Hours();
            }
            
            if (allDaysSameMode) {
                // ÏõîÏöîÏùº ÏÑ§Ï†ïÏùÑ Í∏∞Ï§ÄÏúºÎ°ú Îã§Î•∏ ÏöîÏùºÎì§ ÎèôÍ∏∞Ìôî
                const monEnabled = document.getElementById('mon_enabled').checked;
                const monOpen = document.getElementById('mon_open').value;
                const monClose = document.getElementById('mon_close').value;
                
                days.forEach(day => {
                    const enabled = document.getElementById(`${day}_enabled`);
                    const open = document.getElementById(`${day}_open`);
                    const close = document.getElementById(`${day}_close`);
                    
                    // ÏõîÏöîÏùº ÏÑ§Ï†ïÏúºÎ°ú ÎèôÍ∏∞Ìôî
                    enabled.checked = monEnabled;
                    open.value = monOpen;
                    close.value = monClose;
                    
                    // ÏõîÏöîÏùºÏù¥ ÏïÑÎãå Í≤ΩÏö∞ ÎπÑÌôúÏÑ±Ìôî
                    if (day !== 'mon') {
                        enabled.disabled = true;
                        open.disabled = true;
                        close.disabled = true;
                    }
                });
            } else {
                // Î™®Îì† ÏöîÏùº Í∞úÎ≥Ñ ÏÑ§Ï†ïÏúºÎ°ú Î≥µÏõê
                days.forEach(day => {
                    const enabled = document.getElementById(`${day}_enabled`);
                    const open = document.getElementById(`${day}_open`);
                    const close = document.getElementById(`${day}_close`);
                    
                    enabled.disabled = false;
                    open.disabled = false;
                    close.disabled = false;
                });
            }
            
            saveBusinessHours();
        }
        
        // ÌäπÏ†ï ÏöîÏùº 24ÏãúÍ∞Ñ ÏÑ§Ï†ï ÌÜ†Í∏Ä
        function toggleDay24Hours(day) {
            const is24h = document.getElementById(`${day}_24h`).checked;
            const enabled = document.getElementById(`${day}_enabled`);
            const open = document.getElementById(`${day}_open`);
            const close = document.getElementById(`${day}_close`);
            
            if (is24h) {
                // 24ÏãúÍ∞ÑÏúºÎ°ú ÏÑ§Ï†ï
                enabled.checked = true;
                open.value = '00:00';
                close.value = '24:00';
                enabled.disabled = true;
                open.disabled = true;
                close.disabled = true;
            } else {
                // ÏùºÎ∞ò ÏÑ§Ï†ïÏúºÎ°ú Î≥µÏõê
                enabled.disabled = false;
                open.disabled = false;
                close.disabled = false;
                
                // Î∞±ÏóÖÎêú ÏÑ§Ï†ïÏù¥ ÏûàÏúºÎ©¥ Î≥µÏõê
                if (originalBusinessHours[day]) {
                    enabled.checked = originalBusinessHours[day].enabled;
                    open.value = originalBusinessHours[day].open;
                    close.value = originalBusinessHours[day].close;
                }
            }
            
            saveBusinessHours();
        }
        
        // ÌäπÏ†ï ÏöîÏùº 24ÏãúÍ∞Ñ Ï≤¥ÌÅ¨Î∞ïÏä§Îì§ Ï¥àÍ∏∞Ìôî
        function clearDay24Hours() {
            const days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
            days.forEach(day => {
                document.getElementById(`${day}_24h`).checked = false;
            });
        }
        
        // ÏÑúÎ∏åÎèÑÎ©îÏù∏ Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù
        function validateSubdomain(subdomain) {
            if (!subdomain) return { valid: false, message: 'ÏÑúÎ∏åÎèÑÎ©îÏù∏ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî' };
            
            // Í∏∏Ïù¥ Ï≤¥ÌÅ¨ (3-20Ïûê)
            if (subdomain.length < 3 || subdomain.length > 20) {
                return { valid: false, message: 'ÏÑúÎ∏åÎèÑÎ©îÏù∏ÏùÄ 3-20Ïûê ÏÇ¨Ïù¥Ïó¨Ïïº Ìï©ÎãàÎã§' };
            }
            
            // ÌóàÏö© Î¨∏Ïûê Ï≤¥ÌÅ¨ (ÏòÅÎ¨∏Ïûê, Ïà´Ïûê, ÌïòÏù¥ÌîàÎßå)
            if (!/^[a-z0-9-]+$/.test(subdomain)) {
                return { valid: false, message: 'ÏÑúÎ∏åÎèÑÎ©îÏù∏ÏùÄ ÏòÅÎ¨∏Ïûê, Ïà´Ïûê, ÌïòÏù¥Ìîà(-)Îßå ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏäµÎãàÎã§' };
            }
            
            // ÏãúÏûë/ÎÅù Î¨∏Ïûê Ï≤¥ÌÅ¨ (ÏòÅÎ¨∏ÏûêÎÇò Ïà´ÏûêÎ°úÎßå)
            if (!/^[a-z0-9]/.test(subdomain) || !/[a-z0-9]$/.test(subdomain)) {
                return { valid: false, message: 'ÏÑúÎ∏åÎèÑÎ©îÏù∏ÏùÄ ÏòÅÎ¨∏ÏûêÎÇò Ïà´ÏûêÎ°ú ÏãúÏûëÌïòÍ≥† ÎÅùÎÇòÏïº Ìï©ÎãàÎã§' };
            }
            
            // Ïó∞ÏÜç ÌïòÏù¥Ìîà Ï≤¥ÌÅ¨
            if (subdomain.includes('--')) {
                return { valid: false, message: 'Ïó∞ÏÜçÎêú ÌïòÏù¥Ìîà(--)ÏùÄ ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§' };
            }
            
            // ÏòàÏïΩÏñ¥ Ï≤¥ÌÅ¨
            const reservedWords = ['admin', 'api', 'www', 'mail', 'ftp', 'blog', 'shop', 'store', 'app', 'dev', 'test', 'staging', 'prod', 'production'];
            if (reservedWords.includes(subdomain.toLowerCase())) {
                return { valid: false, message: `'${subdomain}'ÏùÄ ÏòàÏïΩÏñ¥Î°ú ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§` };
            }
            
            return { valid: true, message: 'ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏÑúÎ∏åÎèÑÎ©îÏù∏ÏûÖÎãàÎã§' };
        }
        
        // ÏÑúÎ∏åÎèÑÎ©îÏù∏ Ï§ëÎ≥µ Ï≤¥ÌÅ¨
        async function checkSubdomainAvailability(subdomain) {
            try {
                const response = await fetch(`${API_BASE}/subdomain/check?subdomain=${encodeURIComponent(subdomain)}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                return result;
            } catch (error) {
                console.error('ÏÑúÎ∏åÎèÑÎ©îÏù∏ Ï§ëÎ≥µ Ï≤¥ÌÅ¨ Ïã§Ìå®:', error);
                
                // ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïã§Ìå® Ïãú ÏûÑÏãúÎ°ú ÏÇ¨Ïö© Í∞ÄÎä•ÏúºÎ°ú Ï≤òÎ¶¨ (Í∞úÎ∞ú Ï§ë)
                if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {
                    console.warn('ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïã§Ìå® - ÏûÑÏãúÎ°ú ÏÇ¨Ïö© Í∞ÄÎä•ÏúºÎ°ú Ï≤òÎ¶¨');
                    return { available: true, message: 'ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïã§Ìå® - ÏûÑÏãúÎ°ú ÏÇ¨Ïö© Í∞ÄÎä•ÏúºÎ°ú Ï≤òÎ¶¨' };
                }
                
                return { available: false, message: 'Ï§ëÎ≥µ Ï≤¥ÌÅ¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§' };
            }
        }
        
        // ÏµúÏ¢Ö URL Î≥µÏÇ¨ Ìï®Ïàò
        async function copyFinalUrl() {
            const urlText = document.getElementById('finalUrlText');
            if (urlText) {
                try {
                    await navigator.clipboard.writeText(urlText.textContent);
                    showToast('URLÏù¥ ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§', 'success');
                } catch (err) {
                    // Ìè¥Î∞±: ÌÖçÏä§Ìä∏ ÏÑ†ÌÉù
                    urlText.select();
                    document.execCommand('copy');
                    showToast('URLÏù¥ Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§', 'success');
                }
            }
        }
        
        // ÏµúÏ¢Ö URL ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò
        function updateFinalUrl(subdomain) {
            const finalUrlDisplay = document.getElementById('finalUrlDisplay');
            const finalUrlText = document.getElementById('finalUrlText');
            
            if (subdomain) {
                const baseUrl = window.location.origin;
                const finalUrl = `${baseUrl}/${subdomain}`;
                finalUrlText.textContent = finalUrl;
                finalUrlDisplay.style.display = 'block';
            } else {
                finalUrlDisplay.style.display = 'none';
            }
        }
        
        // ÌòÑÏû¨ Í∞ÄÍ≤å Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
        async function getCurrentStore() {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) return null;
                
                const stores = await apiRequest(`${API_BASE}/stores`);
                return stores.find(s => s.id === currentStoreId);
            } catch (error) {
                console.error('ÌòÑÏû¨ Í∞ÄÍ≤å Ï†ïÎ≥¥ Ï°∞Ìöå Ïã§Ìå®:', error);
                return null;
            }
        }
        
        // ÎèÑÎ©îÏù∏ ÏÑπÏÖò Î°úÎìú
        async function loadDomainSection() {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) {
                    showToast('Í∞ÄÍ≤åÎ•º Î®ºÏ†Ä ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                    return;
                }
                
                // ÌòÑÏû¨ Í∞ÄÍ≤å Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
                const currentStore = await getCurrentStore();
                if (currentStore) {
                    // ÏÑúÎ∏åÎèÑÎ©îÏù∏ Î°úÎìú
                    loadSubdomain(currentStore);
                }
                
                // ÏÑ§Ï†ï Î°úÎìú (QR ÏΩîÎìú Ìè¨Ìï®)
                const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                loadQRCode(settings);
                
                // ÏÉÅÌÉú Î∞∞ÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
                const qrCode = settings?.qrCode;
                updateStatusBadges(currentStore?.subdomain, qrCode);
                
            } catch (error) {
                console.error('ÎèÑÎ©îÏù∏ ÏÑπÏÖò Î°úÎìú Ïã§Ìå®:', error);
                showToast('ÎèÑÎ©îÏù∏ ÏÑπÏÖò Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }
        
        // ÏòÅÏóÖÏãúÍ∞Ñ Î™®Îã¨ Ïó¥Í∏∞
        async function openBusinessHoursModal() {
            const modal = document.getElementById('businessHoursModal');
            if (modal) {
                modal.style.display = 'block';
                // ÌòÑÏû¨ ÏÑ§Ï†ïÎêú ÏòÅÏóÖÏãúÍ∞Ñ Î°úÎìú
                try {
                    const currentStoreId = await getCurrentStoreId();
                    if (currentStoreId) {
                        const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                        loadBusinessHours(settings);
                    }
                } catch (error) {
                    console.error('ÏòÅÏóÖÏãúÍ∞Ñ ÏÑ§Ï†ï Î°úÎìú Ïã§Ìå®:', error);
                    showToast('ÏòÅÏóÖÏãúÍ∞Ñ ÏÑ§Ï†ïÏùÑ Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.', 'error');
                }
            }
        }
        
        // ÏòÅÏóÖÏãúÍ∞Ñ Î™®Îã¨ Îã´Í∏∞
        function closeBusinessHoursModal() {
            const modal = document.getElementById('businessHoursModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Î™®Îã¨ÏóêÏÑú ÏòÅÏóÖÏãúÍ∞Ñ Ï†ÄÏû•
        async function saveBusinessHoursFromModal() {
            try {
                await saveBusinessHours();
                closeBusinessHoursModal();
                updateBusinessHoursDisplay();
                showToast('ÏòÅÏóÖÏãúÍ∞ÑÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.', 'success');
            } catch (error) {
                console.error('ÏòÅÏóÖÏãúÍ∞Ñ Ï†ÄÏû• Ïã§Ìå®:', error);
                showToast('ÏòÅÏóÖÏãúÍ∞Ñ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }
        
        // ÏòÅÏóÖÏãúÍ∞Ñ ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updateBusinessHoursDisplay() {
            const display = document.getElementById('businessHoursDisplay');
            if (!display) return;
            
            const allDays24Hours = document.getElementById('allDays24Hours')?.checked;
            const allDaysSame = document.getElementById('allDaysSame')?.checked;
            
            if (allDays24Hours) {
                display.innerHTML = '24ÏãúÍ∞Ñ ÏòÅÏóÖ (Î™®Îì† ÏöîÏùº)';
                return;
            }
            
            if (allDaysSame) {
                const monEnabled = document.getElementById('mon_enabled')?.checked;
                const monOpen = document.getElementById('mon_open')?.value;
                const monClose = document.getElementById('mon_close')?.value;
                
                if (monEnabled && monOpen && monClose) {
                    display.innerHTML = `Îß§Ïùº ${monOpen} ~ ${monClose}`;
                } else {
                    display.innerHTML = 'ÏòÅÏóÖÏãúÍ∞Ñ ÏÑ§Ï†ï ÌïÑÏöî';
                }
                return;
            }
            
            // Í∞úÎ≥Ñ ÏöîÏùº ÏÑ§Ï†ï ÌëúÏãú
            const days = ['Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†', 'Ïùº'];
            const dayNames = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
            const hours = [];
            
            dayNames.forEach((day, index) => {
                const enabled = document.getElementById(`${day}_enabled`)?.checked;
                const open = document.getElementById(`${day}_open`)?.value;
                const close = document.getElementById(`${day}_close`)?.value;
                const is24h = document.getElementById(`${day}_24h`)?.checked;
                
                if (enabled) {
                    if (is24h) {
                        hours.push(`${days[index]}: 24ÏãúÍ∞Ñ`);
                    } else if (open && close) {
                        hours.push(`${days[index]}: ${open}~${close}`);
                    }
                }
            });
            
            if (hours.length > 0) {
                display.innerHTML = hours.join('<br>');
            } else {
                display.innerHTML = 'ÏòÅÏóÖÏãúÍ∞Ñ ÏÑ§Ï†ï ÌïÑÏöî';
            }
        }
        
        // ÏÉÅÌÉú Î∞∞ÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò
        function updateStatusBadges(subdomain, qrCode) {
            // ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            const subdomainStatus = document.getElementById('subdomainStatus');
            if (subdomain) {
                subdomainStatus.textContent = 'ÏÑ§Ï†ïÏôÑÎ£å';
                subdomainStatus.className = 'status-badge completed';
            } else {
                subdomainStatus.textContent = 'ÎØ∏ÏÑ§Ï†ï';
                subdomainStatus.className = 'status-badge';
            }
            
            // QR ÏΩîÎìú ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            const qrStatus = document.getElementById('qrStatus');
            if (qrCode && qrCode.url) {
                qrStatus.textContent = 'ÏÉùÏÑ±ÏôÑÎ£å';
                qrStatus.className = 'status-badge completed';
            } else {
                qrStatus.textContent = 'ÎØ∏ÏÉùÏÑ±';
                qrStatus.className = 'status-badge';
            }
        }
        
        // ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏÑ§Ï†ï Ï†ÄÏû•
        async function saveSubdomain() {
            const subdomainInput = document.getElementById('storeSubdomain');
            const subdomain = subdomainInput.value.trim().toLowerCase();
            
            // Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù
            const validation = validateSubdomain(subdomain);
            if (!validation.valid) {
                showToast(validation.message, 'error');
                return;
            }
            
            // Ï§ëÎ≥µ Ï≤¥ÌÅ¨
            const availability = await checkSubdomainAvailability(subdomain);
            if (!availability.available) {
                showToast(availability.message, 'error');
                return;
            }
            
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) {
                    showToast('Í∞ÄÍ≤åÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî', 'error');
                    return;
                }
                
                // QR ÏΩîÎìú ÏÉùÏÑ± Ïó¨Î∂Ä ÌôïÏù∏
                const settingsResponse = await fetch(`${API_BASE}/settings?storeId=${currentStoreId}`);
                if (settingsResponse.ok) {
                    const settings = await settingsResponse.json();
                    if (settings.qrCode && settings.qrCode.url) {
                        // QR ÏΩîÎìúÍ∞Ä Ïù¥ÎØ∏ ÏÉùÏÑ±Îêú Í≤ΩÏö∞ Í≤ΩÍ≥† Î™®Îã¨ ÌëúÏãú
                        showQRCodeWarningModal(subdomain);
                        return;
                    }
                }
                
                // ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏÑ§Ï†ï Ï†ÄÏû•
                await saveSubdomainToServer(subdomain);
                
                // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                updateStatusBadges(subdomain, null);
                updateFinalUrl(subdomain);
                
            } catch (error) {
                console.error('ÏÑúÎ∏åÎèÑÎ©îÏù∏ Ï†ÄÏû• Ïã§Ìå®:', error);
                
                // ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïã§Ìå® Ïãú Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê ÏûÑÏãú Ï†ÄÏû•
                if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {
                    localStorage.setItem(`temp_subdomain_${currentStoreId}`, subdomain);
                    showToast('ÏÑúÎ∏åÎèÑÎ©îÏù∏Ïù¥ ÏûÑÏãúÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§ (ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî)', 'warning');
                } else {
                    showToast(`ÏÑúÎ∏åÎèÑÎ©îÏù∏ Ï†ÄÏû• Ïã§Ìå®: ${error.message || error}`, 'error');
                }
            }
        }
        
        // QR ÏΩîÎìú Í≤ΩÍ≥† Î™®Îã¨ ÌëúÏãú (2Îã®Í≥Ñ ÌôïÏù∏)
        function showQRCodeWarningModal(subdomain) {
            showFirstWarningModal(subdomain);
        }
        
        // 1Îã®Í≥Ñ Í≤ΩÍ≥† Î™®Îã¨
        function showFirstWarningModal(subdomain) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 24px;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
                    text-align: center;
                ">
                    <div style="
                        color: #ef4444;
                        font-size: 48px;
                        margin-bottom: 16px;
                    ">‚ö†Ô∏è</div>
                    <h3 style="
                        color: #1f2937;
                        font-size: 20px;
                        font-weight: 600;
                        margin-bottom: 16px;
                    ">QR ÏΩîÎìúÍ∞Ä Ïù¥ÎØ∏ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!</h3>
                    <p style="
                        color: #6b7280;
                        font-size: 14px;
                        line-height: 1.6;
                        margin-bottom: 24px;
                    ">
                        Ïù¥ Í∞ÄÍ≤åÏùò QR ÏΩîÎìúÍ∞Ä Ïù¥ÎØ∏ ÏÉùÏÑ±ÎêòÏñ¥ Í≥†Í∞ùÎì§ÏóêÍ≤å Î∞∞Ìè¨ÎêòÏóàÏùÑ Ïàò ÏûàÏäµÎãàÎã§.<br>
                        ÏÑúÎ∏åÎèÑÎ©îÏù∏ÏùÑ Î≥ÄÍ≤ΩÌïòÎ©¥ Í∏∞Ï°¥ QR ÏΩîÎìúÍ∞Ä ÏûëÎèôÌïòÏßÄ ÏïäÍ≤å Îê©ÎãàÎã§.
                    </p>
                    <div style="
                        background: #fef2f2;
                        border: 1px solid #fecaca;
                        border-radius: 8px;
                        padding: 12px;
                        margin-bottom: 24px;
                    ">
                        <p style="
                            color: #dc2626;
                            font-size: 13px;
                            font-weight: 500;
                            margin: 0;
                        ">
                            <strong>Í≤ΩÍ≥†:</strong> ÏÑúÎ∏åÎèÑÎ©îÏù∏ Î≥ÄÍ≤Ω Ïãú Í∏∞Ï°¥ QR ÏΩîÎìúÎ•º Îã§Ïãú ÏÉùÏÑ±Ìï¥Ïïº Ìï©ÎãàÎã§.
                        </p>
                    </div>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button id="cancelSubdomainChange" style="
                            background: #6b7280;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 12px 24px;
                            font-size: 14px;
                            font-weight: 500;
                            cursor: pointer;
                        ">Ï∑®ÏÜå</button>
                        <button id="proceedToSecondWarning" style="
                            background: #f59e0b;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 12px 24px;
                            font-size: 14px;
                            font-weight: 500;
                            cursor: pointer;
                        ">Í≥ÑÏÜç ÏßÑÌñâ</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
            document.getElementById('cancelSubdomainChange').onclick = () => {
                document.body.removeChild(modal);
            };
            
            document.getElementById('proceedToSecondWarning').onclick = () => {
                document.body.removeChild(modal);
                showSecondWarningModal(subdomain);
            };
        }
        
        // 2Îã®Í≥Ñ ÏµúÏ¢Ö ÌôïÏù∏ Î™®Îã¨
        function showSecondWarningModal(subdomain) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10001;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 24px;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
                    text-align: center;
                    border: 2px solid #ef4444;
                ">
                    <div style="
                        color: #ef4444;
                        font-size: 64px;
                        margin-bottom: 16px;
                    ">üö®</div>
                    <h3 style="
                        color: #dc2626;
                        font-size: 22px;
                        font-weight: 700;
                        margin-bottom: 16px;
                    ">Ï†ïÎßêÎ°ú ÏÑúÎ∏åÎèÑÎ©îÏù∏ÏùÑ Î≥ÄÍ≤ΩÌïòÏãúÍ≤†ÏäµÎãàÍπå?</h3>
                    <p style="
                        color: #6b7280;
                        font-size: 15px;
                        line-height: 1.6;
                        margin-bottom: 24px;
                    ">
                        <strong>Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§!</strong><br>
                        Í∏∞Ï°¥ QR ÏΩîÎìúÍ∞Ä Î™®Îëê Î¨¥Ìö®ÌôîÎêòÎ©∞, Í≥†Í∞ùÎì§Ïù¥ Ï†ëÏÜçÌï† Ïàò ÏóÜÍ≤å Îê©ÎãàÎã§.
                    </p>
                    <div style="
                        background: #fef2f2;
                        border: 2px solid #fecaca;
                        border-radius: 8px;
                        padding: 16px;
                        margin-bottom: 24px;
                    ">
                        <p style="
                            color: #dc2626;
                            font-size: 14px;
                            font-weight: 600;
                            margin: 0;
                        ">
                            ‚ö†Ô∏è <strong>ÏµúÏ¢Ö Í≤ΩÍ≥†:</strong> ÏÑúÎ∏åÎèÑÎ©îÏù∏ Î≥ÄÍ≤Ω ÌõÑÏóêÎäî Î∞òÎìúÏãú ÏÉàÎ°úÏö¥ QR ÏΩîÎìúÎ•º ÏÉùÏÑ±Ìï¥Ïïº Ìï©ÎãàÎã§.
                        </p>
                    </div>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button id="finalCancel" style="
                            background: #6b7280;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 14px 28px;
                            font-size: 15px;
                            font-weight: 600;
                            cursor: pointer;
                        ">Ï∑®ÏÜå</button>
                        <button id="finalConfirm" style="
                            background: #dc2626;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 14px 28px;
                            font-size: 15px;
                            font-weight: 600;
                            cursor: pointer;
                        ">ÎÑ§, Î≥ÄÍ≤ΩÌïòÍ≤†ÏäµÎãàÎã§</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
            document.getElementById('finalCancel').onclick = () => {
                document.body.removeChild(modal);
            };
            
            document.getElementById('finalConfirm').onclick = async () => {
                document.body.removeChild(modal);
                await saveSubdomainToServer(subdomain);
            };
        }
        
        // ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏÑúÎ≤Ñ Ï†ÄÏû• Ìï®Ïàò
        async function saveSubdomainToServer(subdomain) {
            const currentStoreId = await getCurrentStoreId();
            const subdomainInput = document.getElementById('storeSubdomain');
            const subdomainDisplay = document.getElementById('subdomainDisplay');
            
            const response = await fetch(`${API_BASE}/stores/${currentStoreId}/subdomain`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ subdomain: subdomain })
            });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(errorData.error || `ÏÑúÎ∏åÎèÑÎ©îÏù∏ Ï†ÄÏû• Ïã§Ìå®: ${response.status}`);
            }
            
            const result = await response.json();
            showToast('ÏÑúÎ∏åÎèÑÎ©îÏù∏Ïù¥ ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§', 'success');
            
            // UI ÏóÖÎç∞Ïù¥Ìä∏
            updateSubdomainDisplay(subdomain);
            
            // ÏûÖÎ†• ÌïÑÎìú ÎπÑÌôúÏÑ±Ìôî Î∞è Ïà®ÍπÄ
            subdomainInput.disabled = true;
            subdomainInput.placeholder = 'Ïù¥ÎØ∏ ÏÑ§Ï†ïÎêú ÏÑúÎ∏åÎèÑÎ©îÏù∏';
            subdomainInput.style.display = 'none';
            
            // ÌëúÏãú ÏòÅÏó≠ Î≥¥Ïù¥Í∏∞
            if (subdomainDisplay) {
                subdomainDisplay.style.display = 'block';
            }
        }
        
        // ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updateSubdomainDisplay(subdomain) {
            const subdomainDisplay = document.getElementById('subdomainDisplay');
            const currentSubdomain = document.getElementById('currentSubdomain');
            if (subdomainDisplay && currentSubdomain) {
                currentSubdomain.textContent = subdomain;
                subdomainDisplay.style.display = 'block';
            }
        }
        
        // ÏÑúÎ∏åÎèÑÎ©îÏù∏ Î°úÎìú
        function loadSubdomain(store) {
            console.log('üîç [DEBUG] loadSubdomain Ìò∏Ï∂úÎê®:', store);
            const subdomainInput = document.getElementById('storeSubdomain');
            const subdomainDisplay = document.getElementById('subdomainDisplay');
            const currentSubdomain = document.getElementById('currentSubdomain');
            
            // ÏÑúÎ≤Ñ Îç∞Ïù¥ÌÑ∞ÏóêÏÑú ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÌôïÏù∏
            let subdomain = store && store.subdomain ? store.subdomain : null;
            console.log('üîç [DEBUG] ÏÑúÎ≤ÑÏóêÏÑú Î°úÎìúÎêú ÏÑúÎ∏åÎèÑÎ©îÏù∏:', subdomain);
            
            // ÏÑúÎ≤Ñ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏúºÎ©¥ Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄ ÌôïÏù∏ (Í∞úÎ∞ú Ï§ë)
            if (!subdomain && store && store.id) {
                const tempSubdomain = localStorage.getItem(`temp_subdomain_${store.id}`);
                if (tempSubdomain) {
                    subdomain = tempSubdomain;
                    console.warn('Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú ÏÑúÎ∏åÎèÑÎ©îÏù∏ Î°úÎìú:', subdomain);
                }
            }
            
            if (subdomain) {
                // Ïù¥ÎØ∏ ÏÑúÎ∏åÎèÑÎ©îÏù∏Ïù¥ ÏÑ§Ï†ïÎêú Í≤ΩÏö∞
                console.log('üîç [DEBUG] ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏÑ§Ï†ïÎê®, UI ÏóÖÎç∞Ïù¥Ìä∏ Ï§ë:', subdomain);
                if (subdomainInput) {
                    subdomainInput.value = subdomain;
                    subdomainInput.disabled = true;
                    subdomainInput.placeholder = 'Ïù¥ÎØ∏ ÏÑ§Ï†ïÎêú ÏÑúÎ∏åÎèÑÎ©îÏù∏';
                    console.log('üîç [DEBUG] ÏûÖÎ†• ÌïÑÎìú ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å');
                }
                if (subdomainDisplay && currentSubdomain) {
                    currentSubdomain.textContent = subdomain;
                    subdomainDisplay.style.display = 'block';
                    
                    // ÏàòÏ†ï Î≤ÑÌäº ÌëúÏãú
                    const editBtn = document.getElementById('editSubdomainBtn');
                    if (editBtn) {
                        editBtn.style.display = 'inline-block';
                    }
                    
                    console.log('üîç [DEBUG] ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÌëúÏãú ÏòÅÏó≠ ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å');
                } else {
                    console.warn('‚ö†Ô∏è [DEBUG] ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÌëúÏãú ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå:', {
                        subdomainDisplay: !!subdomainDisplay,
                        currentSubdomain: !!currentSubdomain
                    });
                }
                
                // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                updateStatusBadges(subdomain, null);
                updateFinalUrl(subdomain);
            } else {
                // ÏÑúÎ∏åÎèÑÎ©îÏù∏Ïù¥ ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞
                console.log('üîç [DEBUG] ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÎØ∏ÏÑ§Ï†ï, UI Ï¥àÍ∏∞Ìôî Ï§ë');
                if (subdomainInput) {
                    subdomainInput.value = '';
                    subdomainInput.disabled = false;
                    subdomainInput.placeholder = 'Ïòà: michinjeuk';
                }
                if (subdomainDisplay) {
                    subdomainDisplay.style.display = 'none';
                }
                
                // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                updateStatusBadges(null, null);
                updateFinalUrl(null);
            }
        }
        
        // ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏàòÏ†ï ÌôúÏÑ±Ìôî
        function enableSubdomainEdit() {
            const subdomainInput = document.getElementById('storeSubdomain');
            const subdomainDisplay = document.getElementById('subdomainDisplay');
            const editBtn = document.getElementById('editSubdomainBtn');
            
            if (subdomainInput && subdomainDisplay && editBtn) {
                // ÏûÖÎ†• ÌïÑÎìú ÌôúÏÑ±Ìôî
                subdomainInput.disabled = false;
                subdomainInput.placeholder = 'Ïòà: michinjeuk';
                subdomainInput.focus();
                
                // ÌëúÏãú ÏòÅÏó≠ Ïà®Í∏∞Í∏∞
                subdomainDisplay.style.display = 'none';
                
                // ÏàòÏ†ï Î≤ÑÌäº Ïà®Í∏∞Í∏∞
                editBtn.style.display = 'none';
                
                console.log('üîç [DEBUG] ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÏàòÏ†ï Î™®Îìú ÌôúÏÑ±Ìôî');
            }
        }
        
        // ÏõîÏöîÏùº Î≥ÄÍ≤Ω Ïãú Î™®Îì† ÏöîÏùº ÎèôÏùº Î™®ÎìúÏóêÏÑú ÎèôÍ∏∞Ìôî
        function handleMonChange() {
            if (allDaysSameMode) {
                const monEnabled = document.getElementById('mon_enabled').checked;
                const monOpen = document.getElementById('mon_open').value;
                const monClose = document.getElementById('mon_close').value;
                
                const days = ['tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
                days.forEach(day => {
                    const enabled = document.getElementById(`${day}_enabled`);
                    const open = document.getElementById(`${day}_open`);
                    const close = document.getElementById(`${day}_close`);
                    
                    enabled.checked = monEnabled;
                    open.value = monOpen;
                    close.value = monClose;
                });
            }
            
            saveBusinessHours();
        }

        // Í∏∞Î≥∏ Ï†ïÎ≥¥ Ï†ÄÏû•
        // ÏòÅÏóÖÏãúÍ∞Ñ Ï†ÄÏû•
        async function saveBusinessHours() {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) {
                    console.error('ÌòÑÏû¨ Í∞ÄÍ≤å IDÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                    showToast('Í∞ÄÍ≤åÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî', 'error');
                    return;
                }
                
                const days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
                const businessHours = {};
                
                days.forEach(day => {
                    const enabled = document.getElementById(`${day}_enabled`).checked;
                    const open = document.getElementById(`${day}_open`).value;
                    const close = document.getElementById(`${day}_close`).value;
                    
                    businessHours[day] = {
                        enabled: enabled,
                        open: open || '09:00',
                        close: close || '22:00'
                    };
                });
                
                console.log('ÏòÅÏóÖÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞:', businessHours);
                
                // Í∏∞Ï°¥ ÏÑ§Ï†ï Î°úÎìú
                const settingsResponse = await fetch(`${API_BASE}/settings?storeId=${currentStoreId}`);
                if (!settingsResponse.ok) {
                    throw new Error(`ÏÑ§Ï†ï Î°úÎìú Ïã§Ìå®: ${settingsResponse.status}`);
                }
                
                const settings = await settingsResponse.json();
                settings.businessHours = businessHours;
                
                // ÏÑ§Ï†ï Ï†ÄÏû•
                const saveResponse = await fetch(`${API_BASE}/settings?storeId=${currentStoreId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(settings)
                });
                
                if (!saveResponse.ok) {
                    throw new Error(`ÏÑ§Ï†ï Ï†ÄÏû• Ïã§Ìå®: ${saveResponse.status}`);
                }
                
                const result = await saveResponse.json();
                console.log('ÏòÅÏóÖÏãúÍ∞Ñ Ï†ÄÏû• ÏùëÎãµ:', result);
                showToast('ÏòÅÏóÖÏãúÍ∞ÑÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§', 'success');
            } catch (error) {
                console.error('ÏòÅÏóÖÏãúÍ∞Ñ Ï†ÄÏû• Ïã§Ìå®:', error);
                showToast(`ÏòÅÏóÖÏãúÍ∞Ñ Ï†ÄÏû• Ïã§Ìå®: ${error.message || error}`, 'error');
            }
        }
        
        // ÏòÅÏóÖÏãúÍ∞Ñ Î°úÎìú
        function loadBusinessHours(settings) {
            const days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
            const businessHours = settings.businessHours || {};
            
            // 24ÏãúÍ∞Ñ ÏòÅÏóÖ Ï≤¥ÌÅ¨
            const allDays24Hours = days.every(day => {
                const dayData = businessHours[day];
                return dayData && dayData.open === '00:00' && dayData.close === '24:00' && dayData.enabled;
            });
            
            const allDays24HoursCheckbox = document.getElementById('allDays24Hours');
            if (allDays24HoursCheckbox) {
                allDays24HoursCheckbox.checked = allDays24Hours;
            }
            
            days.forEach(day => {
                const dayData = businessHours[day] || { enabled: true, open: '09:00', close: '22:00' };
                
                const enabledCheckbox = document.getElementById(`${day}_enabled`);
                const openInput = document.getElementById(`${day}_open`);
                const closeInput = document.getElementById(`${day}_close`);
                
                if (enabledCheckbox) enabledCheckbox.checked = dayData.enabled !== false;
                if (openInput) openInput.value = dayData.open || '09:00';
                if (closeInput) closeInput.value = dayData.close || '22:00';
                
                // 24ÏãúÍ∞Ñ ÏòÅÏóÖÏù¥Î©¥ ÏûÖÎ†• ÌïÑÎìú ÎπÑÌôúÏÑ±Ìôî
                if (allDays24Hours) {
                    enabledCheckbox.disabled = true;
                    openInput.disabled = true;
                    closeInput.disabled = true;
                }
            });
            
            // ÏòÅÏóÖÏãúÍ∞Ñ ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
            updateBusinessHoursDisplay();
        }
        
        async function saveBasicInfo() {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) {
                    console.log('‚ö†Ô∏è [DEBUG] Í∞ÄÍ≤åÍ∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïÑ Ï†ÄÏû•ÏùÑ Í±¥ÎÑàÎúÅÎãàÎã§.');
                    return;
                }
                
                // Ìèº Í∞í ÌôïÏù∏
                const storeName = document.getElementById('storeName').value;
                const storeSubtitle = document.getElementById('storeSubtitle').value;
                const storePhone = document.getElementById('storePhone').value;
                const storeAddress = document.getElementById('storeAddress').value;
                
                console.log('üîç [DEBUG] Ï†ÄÏû•Ìï† Í∏∞Î≥∏ Ï†ïÎ≥¥:', {
                    storeName, storeSubtitle, storePhone, storeAddress
                });
                
                // Îπà Í∞íÏù¥Î©¥ Ï†ÄÏû•ÌïòÏßÄ ÏïäÏùå
                if (!storeName && !storeSubtitle && !storePhone && !storeAddress) {
                    console.log('‚ö†Ô∏è [DEBUG] Î™®Îì† ÌïÑÎìúÍ∞Ä ÎπÑÏñ¥ÏûàÏñ¥ Ï†ÄÏû•ÏùÑ Í±¥ÎÑàÎúÅÎãàÎã§.');
                    return;
                }
                
                const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                
                settings.basic = {
                    storeName: storeName,
                    storeSubtitle: storeSubtitle,
                    storePhone: storePhone,
                    storeAddress: storeAddress
                };
                
                await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`, 'POST', settings);
                
                // Í∞ÄÍ≤å Î™©Î°ùÏùò subtitleÎèÑ ÎèôÍ∏∞Ìôî
                const stores = await apiRequest(`${API_BASE}/stores`);
                const currentStore = stores.find(store => store.id === currentStoreId);
                if (currentStore) {
                    currentStore.subtitle = settings.basic.storeSubtitle;
                    currentStore.name = settings.basic.storeName;
                    currentStore.phone = settings.basic.storePhone;
                    currentStore.address = settings.basic.storeAddress;
                    
                    // Í∞ÄÍ≤å Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
                    await apiRequest(`${API_BASE}/stores/update`, 'POST', currentStore);
                }
                
                showStatus('Í∞ÄÍ≤åÎ™Ö, ÌïòÎã® ÌÖçÏä§Ìä∏, Ï†ÑÌôîÎ≤àÌò∏, Ï£ºÏÜåÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!', 'success');
                
                // Í∞ÄÍ≤å Î™©Î°ù Îã§Ïãú Î°úÎìúÌïòÏó¨ Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Î∞òÏòÅ
                await loadStoreList();
            } catch (error) {
                console.error('Í∏∞Î≥∏ Ï†ïÎ≥¥ Ï†ÄÏû• Ïã§Ìå®:', error);
                showStatus('Í∏∞Î≥∏ Ï†ïÎ≥¥ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // Î∞∞Îã¨Ïï± URL Ï†ÄÏû• (CRUD ÏôÑÏ†Ñ Íµ¨ÌòÑ)
        async function saveDeliveryUrls() {
            try {
                const currentStoreId = await getCurrentStoreId();
                const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                
                settings.delivery = {
                    ttaengUrl: document.getElementById('ttaengUrl').value,
                    baeminUrl: document.getElementById('baeminUrl').value,
                    coupangUrl: document.getElementById('coupangUrl').value,
                    yogiyoUrl: document.getElementById('yogiyoUrl').value,
                    deliveryOrder: settings.delivery?.deliveryOrder || ['ttaeng', 'baemin', 'coupang', 'yogiyo']
                };
                
                await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`, 'POST', settings);
                
                // Ï†ÄÏû• ÌõÑ Î™®Îì† Î∞∞Îã¨Ïï± ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                updateAllDeliveryStatuses();
                
                showStatus('Î∞∞Îã¨Ïï± URL ÏÑ§Ï†ïÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!', 'success');
            } catch (error) {
                console.error('Î∞∞Îã¨Ïï± URL Ï†ÄÏû• Ïã§Ìå®:', error);
                showStatus('Î∞∞Îã¨Ïï± URL Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // Î∞∞Îã¨Ïï± ÏàúÏÑú Î™©Î°ù Î†åÎçîÎßÅ (2x2 Í∑∏Î¶¨Îìú + ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠)
        async function renderDeliveryOrder() {
            try {
                const currentStoreId = await getCurrentStoreId();
                const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                const deliveryOrder = settings.delivery?.deliveryOrder || ['ttaeng', 'baemin', 'coupang', 'yogiyo'];
                
                const appConfigs = {
                    'ttaeng': { name: 'Îï°Í≤®Ïöî', iconClass: 'ttaeng' },
                    'baemin': { name: 'Î∞∞Îã¨ÏùòÎØºÏ°±', iconClass: 'baemin' },
                    'coupang': { name: 'Ïø†Ìå°Ïù¥Ï∏†', iconClass: 'coupang' },
                    'yogiyo': { name: 'ÏöîÍ∏∞Ïöî', iconClass: 'yogiyo' }
                };
                
                const gridContainer = document.getElementById('deliveryOrderGrid');
                gridContainer.innerHTML = '';
                
                deliveryOrder.forEach((appId, index) => {
                    const config = appConfigs[appId];
                    const url = settings.delivery?.[`${appId}Url`] || '';
                    const isActive = url && url.trim() !== '';
                    
                    const item = document.createElement('div');
                    item.className = 'delivery-grid-item';
                    item.setAttribute('data-app-id', appId);
                    item.innerHTML = `
                        <div class="drag-handle">‚ãÆ‚ãÆ</div>
                        <div class="app-icon ${config.iconClass}"></div>
                        <div class="app-name">${config.name}</div>
                        <div class="app-status ${isActive ? 'active' : ''}">
                            ${isActive ? 'ÌôúÏÑ±' : 'Ï§ÄÎπÑÏ§ë'}
                        </div>
                    `;
                    gridContainer.appendChild(item);
                });
                
                // SortableJS Ï¥àÍ∏∞Ìôî
                initializeSortable();
                
            } catch (error) {
                console.error('Î∞∞Îã¨Ïï± ÏàúÏÑú Î†åÎçîÎßÅ Ïã§Ìå®:', error);
            }
        }

        // SortableJS ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ Ï¥àÍ∏∞Ìôî
        function initializeSortable() {
            const gridContainer = document.getElementById('deliveryOrderGrid');
            
            // Í∏∞Ï°¥ Sortable Ïù∏Ïä§ÌÑ¥Ïä§Í∞Ä ÏûàÎã§Î©¥ Ï†úÍ±∞
            if (window.deliverySortable) {
                window.deliverySortable.destroy();
            }
            
            window.deliverySortable = new Sortable(gridContainer, {
                animation: 150,
                ghostClass: 'sortable-ghost',
                chosenClass: 'sortable-chosen',
                dragClass: 'dragging',
                handle: '.drag-handle',
                onEnd: async function(evt) {
                    // ÏàúÏÑúÍ∞Ä Î≥ÄÍ≤ΩÎêòÏóàÏùÑ Îïå Ï†ÄÏû•
                    await saveDeliveryOrder();
                }
            });
        }

        // ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ÏúºÎ°ú Î≥ÄÍ≤ΩÎêú ÏàúÏÑú Ï†ÄÏû•
        async function saveDeliveryOrder() {
            try {
                const currentStoreId = await getCurrentStoreId();
                const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                
                const gridItems = document.querySelectorAll('#deliveryOrderGrid .delivery-grid-item');
                const newOrder = Array.from(gridItems).map(item => item.getAttribute('data-app-id'));
                
                settings.delivery = settings.delivery || {};
                settings.delivery.deliveryOrder = newOrder;
                
                await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`, 'POST', settings);
                
                showToast('Î∞∞Îã¨Ïï± ÏàúÏÑúÍ∞Ä Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§!', 'success', 'ÏàúÏÑú Î≥ÄÍ≤Ω');
                
                // ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù (Î≥ÄÍ≤Ω Ï†Ñ/ÌõÑ Î™ÖÌôïÌûà)
                const oldOrder = settings.delivery?.deliveryOrder || [];
                const appNames = {
                    'ttaeng': 'Îï°Í≤®Ïöî',
                    'baemin': 'Î∞∞Îã¨ÏùòÎØºÏ°±',
                    'coupang': 'Ïø†Ìå°Ïù¥Ï∏†',
                    'yogiyo': 'ÏöîÍ∏∞Ïöî'
                };
                const oldOrderNames = oldOrder.map(id => appNames[id] || id).join(' ‚Üí ');
                const newOrderNames = newOrder.map(id => appNames[id] || id).join(' ‚Üí ');
                
                await logActivity('settings', 'Î∞∞Îã¨Ïï± ÏàúÏÑú Î≥ÄÍ≤Ω', 
                    `Î∞∞Îã¨Ïï± ÌëúÏãú ÏàúÏÑú Î≥ÄÍ≤Ω\nÏù¥Ï†Ñ: ${oldOrderNames}\nÏù¥ÌõÑ: ${newOrderNames}`, {
                    oldOrder: oldOrder,
                    newOrder: newOrder,
                    oldOrderNames: oldOrderNames,
                    newOrderNames: newOrderNames
                });
                
            } catch (error) {
                console.error('Î∞∞Îã¨Ïï± ÏàúÏÑú Ï†ÄÏû• Ïã§Ìå®:', error);
                showToast('Î∞∞Îã¨Ïï± ÏàúÏÑú Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error', 'Ï†ÄÏû• Ïã§Ìå®');
            }
        }

        // ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù
        async function logActivity(logType, action, description, details = null) {
            // logDataÎ•º try Î∞îÍπ•Ïóê ÏÑ†Ïñ∏ÌïòÏó¨ catch Ìè¥Î∞±ÏóêÏÑúÎèÑ ÎèôÏùº Í∞ùÏ≤¥ ÏÇ¨Ïö©
            const logData = {
                type: logType,
                action: action,
                description: description,
                details: details,
                timestamp: new Date().toISOString(),
                user: 'admin'
            };
            
            try {
                console.log('üìù [DEBUG] ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù ÏãúÎèÑ:', logData);
                await apiRequest('/api/activity-logs', 'POST', logData);
                console.log('‚úÖ [DEBUG] ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù ÏÑ±Í≥µ');
            } catch (error) {
                console.error('‚ùå [DEBUG] ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù Ïã§Ìå®:', error);
                // Î™®Îì† ÏóêÎü¨Ïóê ÎåÄÌï¥ Î°úÏª¨ Ìè¥Î∞± Ï≤òÎ¶¨
                console.log('üîÑ [DEBUG] ÏÑúÎ≤Ñ Ï†ÄÏû• Ïã§Ìå® - Î°úÏª¨ Ìè¥Î∞± Ï≤òÎ¶¨ ÏãúÎèÑ');
                try {
                    const localLogs = JSON.parse(localStorage.getItem('localActivityLogs') || '[]');
                    localLogs.push({
                        ...logData,
                        id: 'local_' + Date.now(),
                        source: 'local_fallback'
                    });
                    localStorage.setItem('localActivityLogs', JSON.stringify(localLogs));
                    console.log('‚úÖ [DEBUG] Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê ÌôúÎèô Î°úÍ∑∏ Ï†ÄÏû• ÏôÑÎ£å');
                } catch (localError) {
                    console.error('‚ùå [DEBUG] Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄ Ï†ÄÏû• Ïã§Ìå®:', localError);
                }
            }
        }

        // Î∞∞Îã¨Ïï± URL ÏûÖÎ†• ÌïÑÎìú Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà ÏÑ§Ï†ï
        function setupDeliveryUrlEventListeners() {
            const deliveryApps = ['ttaeng', 'baemin', 'coupang', 'yogiyo'];
            
            deliveryApps.forEach(app => {
                const urlInput = document.getElementById(`${app}Url`);
                if (urlInput) {
                    // ÏûÖÎ†• Ïãú Ï¶âÏãú ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                    urlInput.addEventListener('input', () => {
                        updateDeliveryStatus(app);
                    });
                    
                    // Ìè¨Ïª§Ïä§ ÏïÑÏõÉ ÏãúÏóêÎèÑ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                    urlInput.addEventListener('blur', () => {
                        updateDeliveryStatus(app);
                    });
                }
            });
        }

        // Î∞∞Îã¨Ïï± ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ (Íµ¨Ï°∞ÌôîÎêú Î≤ÑÏ†Ñ)
        function updateDeliveryStatus(app) {
            const urlInput = document.getElementById(`${app}Url`);
            const statusDiv = document.getElementById(`${app}Status`);
            
            if (!urlInput || !statusDiv) {
                console.warn(`${app} URL ÏûÖÎ†• ÌïÑÎìú ÎòêÎäî ÏÉÅÌÉú ÌëúÏãú ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`);
                return;
            }
            
            const url = urlInput.value.trim();
            
            if (url && (url.startsWith('http://') || url.startsWith('https://'))) {
                statusDiv.textContent = 'ÌôúÏÑ±';
                statusDiv.className = 'delivery-status status-active';
            } else {
                statusDiv.textContent = 'Ï§ÄÎπÑÏ§ë';
                statusDiv.className = 'delivery-status status-inactive';
            }
            
            // ÏàúÏÑú Î™©Î°ùÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏
            renderDeliveryOrder();
        }

        // Î™®Îì† Î∞∞Îã¨Ïï± ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        function updateAllDeliveryStatuses() {
            const deliveryApps = ['ttaeng', 'baemin', 'coupang', 'yogiyo'];
            deliveryApps.forEach(app => {
                updateDeliveryStatus(app);
            });
        }

        // Ìï†Ïù∏ ÏÑ§Ï†ï Ï†ÄÏû•
        async function saveDiscountSettings() {
            try {
                const currentStoreId = await getCurrentStoreId();
                const oldSettings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                
                // Î≥ÄÍ≤Ω Ï†Ñ Í∞í Ï†ÄÏû•
                const oldDiscount = oldSettings.discount || {};
                
                // ÏÉà Í∞í ÏÑ§Ï†ï
                oldSettings.discount = {
                    enabled: document.getElementById('discountEnabled').checked,
                    title: document.getElementById('discountTitle').value,
                    description: document.getElementById('discountDescription').value
                };
                
                await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`, 'POST', oldSettings);
                
                // ÌÜ†Í∏Ä ÏÉÅÌÉúÏóê Îî∞Îùº Ìèº ÌëúÏãú/Ïà®ÍπÄ
                const discountForm = document.getElementById('discountForm');
                if (oldSettings.discount.enabled) {
                    discountForm.classList.add('active');
                } else {
                    discountForm.classList.remove('active');
                }
                
                // ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù (Î≥ÄÍ≤Ω Ï†Ñ/ÌõÑ)
                const changes = [];
                if (oldDiscount.enabled !== oldSettings.discount.enabled) {
                    changes.push(`ÌôúÏÑ±Ìôî: ${oldDiscount.enabled ? 'ÌôúÏÑ±' : 'ÎπÑÌôúÏÑ±'} ‚Üí ${oldSettings.discount.enabled ? 'ÌôúÏÑ±' : 'ÎπÑÌôúÏÑ±'}`);
                }
                if (oldDiscount.title !== oldSettings.discount.title) {
                    changes.push(`Ï†úÎ™©: "${oldDiscount.title || 'ÏóÜÏùå'}" ‚Üí "${oldSettings.discount.title || 'ÏóÜÏùå'}"`);
                }
                if (oldDiscount.description !== oldSettings.discount.description) {
                    changes.push(`ÏÑ§Î™Ö: "${oldDiscount.description || 'ÏóÜÏùå'}" ‚Üí "${oldSettings.discount.description || 'ÏóÜÏùå'}"`);
                }
                
                if (changes.length > 0) {
                    await logActivity('settings', 'Ìï†Ïù∏ ÏÑ§Ï†ï Î≥ÄÍ≤Ω', 
                        `Ìï†Ïù∏ ÏÑ§Ï†ïÏù¥ Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§.\n\n${changes.join('\n')}`, {
                        before: oldDiscount,
                        after: oldSettings.discount,
                        changes: changes
                    });
                }
                
                showStatus('Ìï†Ïù∏ ÏÑ§Ï†ïÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!', 'success');
            } catch (error) {
                console.error('Ìï†Ïù∏ ÏÑ§Ï†ï Ï†ÄÏû• Ïã§Ìå®:', error);
                showStatus('Ìï†Ïù∏ ÏÑ§Ï†ï Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // ÌîΩÏóÖ ÏÑ§Ï†ï Ï†ÄÏû•
        async function savePickupSettings() {
            try {
                const currentStoreId = await getCurrentStoreId();
                const oldSettings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                
                // Î≥ÄÍ≤Ω Ï†Ñ Í∞í Ï†ÄÏû•
                const oldPickup = oldSettings.pickup || {};
                
                // ÏÉà Í∞í ÏÑ§Ï†ï
                oldSettings.pickup = {
                    enabled: document.getElementById('pickupEnabled').checked,
                    title: document.getElementById('pickupTitle').value,
                    description: document.getElementById('pickupDescription').value
                };
                
                await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`, 'POST', oldSettings);
                
                // ÌÜ†Í∏Ä ÏÉÅÌÉúÏóê Îî∞Îùº Ìèº ÌëúÏãú/Ïà®ÍπÄ
                const pickupForm = document.getElementById('pickupForm');
                if (oldSettings.pickup.enabled) {
                    pickupForm.classList.add('active');
                } else {
                    pickupForm.classList.remove('active');
                }
                
                // ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù (Î≥ÄÍ≤Ω Ï†Ñ/ÌõÑ)
                const changes = [];
                if (oldPickup.enabled !== oldSettings.pickup.enabled) {
                    changes.push(`ÌôúÏÑ±Ìôî: ${oldPickup.enabled ? 'ÌôúÏÑ±' : 'ÎπÑÌôúÏÑ±'} ‚Üí ${oldSettings.pickup.enabled ? 'ÌôúÏÑ±' : 'ÎπÑÌôúÏÑ±'}`);
                }
                if (oldPickup.title !== oldSettings.pickup.title) {
                    changes.push(`Ï†úÎ™©: "${oldPickup.title || 'ÏóÜÏùå'}" ‚Üí "${oldSettings.pickup.title || 'ÏóÜÏùå'}"`);
                }
                if (oldPickup.description !== oldSettings.pickup.description) {
                    changes.push(`ÏÑ§Î™Ö: "${oldPickup.description || 'ÏóÜÏùå'}" ‚Üí "${oldSettings.pickup.description || 'ÏóÜÏùå'}"`);
                }
                
                if (changes.length > 0) {
                    await logActivity('settings', 'ÌîΩÏóÖ ÏÑ§Ï†ï Î≥ÄÍ≤Ω', 
                        `ÌîΩÏóÖ ÏÑ§Ï†ïÏù¥ Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§.\n\n${changes.join('\n')}`, {
                        before: oldPickup,
                        after: oldSettings.pickup,
                        changes: changes
                    });
                }
                
                showStatus('ÌîΩÏóÖ ÏÑ§Ï†ïÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!', 'success');
            } catch (error) {
                console.error('ÌîΩÏóÖ ÏÑ§Ï†ï Ï†ÄÏû• Ïã§Ìå®:', error);
                showStatus('ÌîΩÏóÖ ÏÑ§Ï†ï Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }
        
        // AI ÏΩòÌÖêÏ∏† ÏûêÎèô ÏÉùÏÑ±
        async function generateAIContent(type) {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) {
                    showToast('Í∞ÄÍ≤åÎ•º Î®ºÏ†Ä ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error', 'AI ÏÉùÏÑ±');
                    return;
                }
                
                // Í∞ÄÍ≤å Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
                const stores = await apiRequest(`${API_BASE}/stores`);
                const store = stores.find(s => s.id === currentStoreId);
                
                if (!store) {
                    showToast('Í∞ÄÍ≤å Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.', 'error', 'AI ÏÉùÏÑ±');
                    return;
                }
                
                // Î°úÎî© ÌëúÏãú
                showToast('AIÍ∞Ä ÏΩòÌÖêÏ∏†Î•º ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info', 'AI ÏÉùÏÑ± Ï§ë');
                
                // AI API Ìò∏Ï∂ú
                const result = await apiRequest('/api/ai/generate-content', 'POST', {
                    storeName: store.name,
                    storeId: currentStoreId
                });
                
                if (result.success) {
                    const data = result.data;
                    
                    // Ìï†Ïù∏ ÏÑ§Ï†ï ÎòêÎäî ÌîΩÏóÖ ÏïàÎÇ¥ ÌïÑÎìúÏóê ÏûêÎèô ÏûÖÎ†•
                    if (type === 'discount' || type === 'both') {
                        document.getElementById('discountTitle').value = data.discount.title;
                        document.getElementById('discountDescription').value = data.discount.description;
                        await saveDiscountSettings();
                    }
                    
                    if (type === 'pickup' || type === 'both') {
                        document.getElementById('pickupTitle').value = data.pickup.title;
                        document.getElementById('pickupDescription').value = data.pickup.description;
                        await savePickupSettings();
                    }
                    
                    // ÏÑ±Í≥µ Î©îÏãúÏßÄ
                    const analysis = data.analysis || {};
                    showToast(
                        `AIÍ∞Ä ÏΩòÌÖêÏ∏†Î•º ÏÉùÏÑ±ÌñàÏäµÎãàÎã§!\nÏóÖÏ¢Ö: ${analysis.category || 'Î∂ÑÏÑù Ï§ë'}\n${analysis.reasoning || ''}`,
                        'success',
                        'AI ÏÉùÏÑ± ÏôÑÎ£å'
                    );
                } else {
                    showToast(`AI ÏÉùÏÑ± Ïã§Ìå®: ${result.error}`, 'error', 'AI ÏÉùÏÑ± Ïã§Ìå®');
                }
                
            } catch (error) {
                console.error('AI ÏΩòÌÖêÏ∏† ÏÉùÏÑ± Ïã§Ìå®:', error);
                showToast('AI ÏΩòÌÖêÏ∏† ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error', 'AI ÏÉùÏÑ± Ïã§Ìå®');
            }
        }

        // ÏÑπÏÖò ÏàúÏÑú Î†åÎçîÎßÅ
        async function renderSectionOrder() {
            try {
                const currentStoreId = await getCurrentStoreId();
                const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                
                // Í∏∞Î≥∏ ÏÑπÏÖò ÏàúÏÑú (ÏÑ§Ï†ïÏù¥ ÏóÜÏúºÎ©¥ Í∏∞Î≥∏Í∞í ÏÇ¨Ïö©)
                const defaultOrder = [
                    { id: 'discount', title: 'Ìï†Ïù∏ ÏïàÎÇ¥', description: 'Ìï†Ïù∏ Ïù¥Î≤§Ìä∏ Ï†ïÎ≥¥' },
                    { id: 'delivery', title: 'Î∞∞Îã¨ Ï£ºÎ¨∏', description: 'Î∞∞Îã¨Ïï± Ï£ºÎ¨∏ ÎßÅÌÅ¨' },
                    { id: 'address', title: 'Ï£ºÏÜå Ï†ïÎ≥¥', description: 'Í∞ÄÍ≤å Ï£ºÏÜå Î∞è ÏßÄÎèÑ' }
                ];
                
                const sectionOrder = settings.sectionOrder || defaultOrder;
                const orderList = document.getElementById('sectionOrderList');
                
                orderList.innerHTML = '';
                
                sectionOrder.forEach((section, index) => {
                    const orderItem = document.createElement('div');
                    orderItem.className = 'order-item';
                    orderItem.dataset.sectionId = section.id;
                    
                    // ÏïÑÏù¥ÏΩò Í∏∞Î≥∏Í∞í ÏÑ§Ï†ï
                    const iconMap = {
                        'discount': 'üéâ',
                        'delivery': 'üöö',
                        'address': 'üìç'
                    };
                    const icon = section.icon || iconMap[section.id] || 'üìå';
                    
                    orderItem.innerHTML = `
                        <div class="order-number">${index + 1}</div>
                        <div class="order-content">
                            <div class="order-icon" style="display: none;">${icon}</div>
                            <div class="order-title">${section.title}</div>
                            <div class="order-description">${section.description}</div>
                        </div>
                        <div class="order-handle">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="3" y1="12" x2="21" y2="12"/>
                                <line x1="3" y1="6" x2="21" y2="6"/>
                                <line x1="3" y1="18" x2="21" y2="18"/>
                            </svg>
                        </div>
                    `;
                    
                    orderList.appendChild(orderItem);
                });
                
                // SortableJS Ï¥àÍ∏∞Ìôî
                if (window.Sortable) {
                    new Sortable(orderList, {
                        animation: 150,
                        ghostClass: 'dragging',
                        onEnd: function(evt) {
                            updateOrderNumbers();
                            // ÎìúÎûòÍ∑∏ ÏôÑÎ£å Ïãú ÏûêÎèô Ï†ÄÏû•
                            saveSectionOrder();
                        }
                    });
                }
                
            } catch (error) {
                console.error('ÏÑπÏÖò ÏàúÏÑú Î†åÎçîÎßÅ Ïã§Ìå®:', error);
                showStatus('ÏÑπÏÖò ÏàúÏÑúÎ•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // ÏàúÏÑú Î≤àÌò∏ ÏóÖÎç∞Ïù¥Ìä∏
        function updateOrderNumbers() {
            const orderItems = document.querySelectorAll('.order-item');
            orderItems.forEach((item, index) => {
                const numberElement = item.querySelector('.order-number');
                if (numberElement) {
                    numberElement.textContent = index + 1;
                }
            });
        }

        // ÏÑπÏÖò ÏàúÏÑú Ï†ÄÏû•
        async function saveSectionOrder() {
            try {
                const currentStoreId = await getCurrentStoreId();
                const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                
                const orderItems = document.querySelectorAll('.order-item');
                const sectionOrder = Array.from(orderItems).map(item => {
                    const sectionId = item.dataset.sectionId;
                    const title = item.querySelector('.order-title').textContent;
                    const icon = item.querySelector('.order-icon').textContent;
                    const description = item.querySelector('.order-description').textContent;
                    
                    return { id: sectionId, title, icon, description };
                });
                
                // Î≥ÄÍ≤Ω Ï†Ñ ÏàúÏÑú Ï†ÄÏû•
                const oldSectionOrder = settings.sectionOrder || [];
                const oldOrderTitles = oldSectionOrder.map(s => s.title).join(' ‚Üí ');
                const newOrderTitles = sectionOrder.map(s => s.title).join(' ‚Üí ');
                
                settings.sectionOrder = sectionOrder;
                
                await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`, 'POST', settings);
                
                showStatus('UI ÏàúÏÑúÍ∞Ä ÏûêÎèôÏúºÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!', 'success');
                
                // ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù (Î≥ÄÍ≤Ω Ï†Ñ/ÌõÑ Î™ÖÌôïÌûà)
                await logActivity('settings', 'UI ÏàúÏÑú Î≥ÄÍ≤Ω', 
                    `Í∞ÄÍ≤å ÌéòÏù¥ÏßÄ ÏÑπÏÖò ÏàúÏÑú Î≥ÄÍ≤Ω\nÏù¥Ï†Ñ: ${oldOrderTitles}\nÏù¥ÌõÑ: ${newOrderTitles}`, {
                    oldOrder: oldSectionOrder.map(s => s.id),
                    newOrder: sectionOrder.map(s => s.id),
                    oldOrderTitles: oldOrderTitles,
                    newOrderTitles: newOrderTitles
                });
                
            } catch (error) {
                console.error('ÏÑπÏÖò ÏàúÏÑú Ï†ÄÏû• Ïã§Ìå®:', error);
                showStatus('ÏÑπÏÖò ÏàúÏÑú Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Ï≤òÎ¶¨
        async function handleImageUpload(inputId, imageType) {
            const fileInput = document.getElementById(inputId);
            if (fileInput && fileInput.files && fileInput.files[0]) {
                await processImageFile(fileInput.files[0], imageType);
            }
        }

        // Ïù¥ÎØ∏ÏßÄ ÌååÏùº Ï≤òÎ¶¨
        async function processImageFile(file, imageType) {
            const reader = new FileReader();
            
            reader.onload = async function(e) {
                try {
                    const imageData = e.target.result;
                    const currentStoreId = await getCurrentStoreId();
                    
                    const settings = await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`);
                    settings.images = settings.images || {};
                    settings.images[imageType] = imageData;
                    
                    await apiRequest(`${API_BASE}/settings?storeId=${currentStoreId}`, 'POST', settings);
                    
                    // Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏóÖÎç∞Ïù¥Ìä∏
                    updateImagePreview(imageType, imageData);
                    
                    showStatus(`${imageType === 'mainLogo' ? 'Î°úÍ≥†' : 'Î©îÎâ¥Ìåê'} Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏóÖÎ°úÎìúÎêòÏñ¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!`, 'success');
                } catch (error) {
                    console.error('Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû• Ïò§Î•ò:', error);
                    showStatus('Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
                }
            };
            
            reader.readAsDataURL(file);
        }

        // ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ Ï≤òÎ¶¨
        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('drag-over');
        }

        function handleDragLeave(event) {
            event.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(event, imageType) {
            event.preventDefault();
            event.currentTarget.classList.remove('drag-over');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                processImageFile(files[0], imageType);
            }
        }

        // Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏóÖÎç∞Ïù¥Ìä∏
        function updateImagePreview(imageType, imageData) {
            const preview = document.getElementById(`${imageType}Preview`);
            const uploadArea = document.getElementById(`${imageType}Area`);
            
            if (imageData) {
                preview.src = imageData;
                preview.style.display = 'block';
                uploadArea.classList.add('has-image');
            } else {
                preview.style.display = 'none';
                uploadArea.classList.remove('has-image');
            }
        }

        // ÏäàÌçºÏñ¥ÎìúÎØº Í≥ÑÏ†ï Ï†ïÎ≥¥ Î°úÎìú
        async function loadSuperAdminInfo() {
            try {
                const response = await apiRequest(`${API_BASE}/superadmin/info`);
                if (response) {
                    document.getElementById('adminUsername').value = response.username || '';
                }
            } catch (error) {
                console.error('ÏäàÌçºÏñ¥ÎìúÎØº Ï†ïÎ≥¥ Î°úÎìú Ïò§Î•ò:', error);
            }
        }

        // ÏäàÌçºÏñ¥ÎìúÎØº Í≥ÑÏ†ï Ï†ïÎ≥¥ ÏàòÏ†ï
        async function updateSuperAdminAccount() {
            try {
                const username = document.getElementById('adminUsername').value;
                const password = document.getElementById('adminPassword').value;
                const passwordConfirm = document.getElementById('adminPasswordConfirm').value;
                
                if (!username.trim()) {
                    showStatus('Í≥ÑÏ†ïÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.', 'error');
                    return;
                }
                
                if (password && password !== passwordConfirm) {
                    showStatus('ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.', 'error');
                    return;
                }
                
                const updateData = { username: username.trim() };
                if (password.trim()) {
                    updateData.password = password.trim();
                }
                
                await apiRequest(`${API_BASE}/superadmin/update`, 'POST', updateData);
                showStatus('ÏäàÌçºÏñ¥ÎìúÎØº Í≥ÑÏ†ï Ï†ïÎ≥¥Í∞Ä ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§!', 'success');
                
                // ÎπÑÎ∞ÄÎ≤àÌò∏ ÌïÑÎìú Ï¥àÍ∏∞Ìôî
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminPasswordConfirm').value = '';
                
            } catch (error) {
                console.error('ÏäàÌçºÏñ¥ÎìúÎØº Í≥ÑÏ†ï ÏàòÏ†ï Ïò§Î•ò:', error);
                showStatus('Í≥ÑÏ†ï Ï†ïÎ≥¥ ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // Î°úÍ∑∏ÏïÑÏõÉ
        function logout() {
            if (confirm('Î°úÍ∑∏ÏïÑÏõÉÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                sessionStorage.removeItem('superadmin_logged_in');
                sessionStorage.removeItem('superadmin_username');
                window.location.href = 'login.html';
            }
        }

        // Î©îÏù∏ ÌéòÏù¥ÏßÄ Ïó¥Í∏∞
        async function openMainPage() {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (currentStoreId) {
                    // ÌòÑÏû¨ Í∞ÄÍ≤åÏùò ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÌôïÏù∏
                    const stores = await apiRequest(`${API_BASE}/stores`);
                    const currentStore = stores.find(s => s.id === currentStoreId);
                    
                    let mainPageUrl;
                    if (currentStore && currentStore.subdomain) {
                        // ÏÑúÎ∏åÎèÑÎ©îÏù∏Ïù¥ ÏÑ§Ï†ïÎêú Í≤ΩÏö∞ ÏÑúÎ∏åÎèÑÎ©îÏù∏ URL ÏÇ¨Ïö©
                        mainPageUrl = `/${currentStore.subdomain}`;
                        console.log('ÏÑúÎ∏åÎèÑÎ©îÏù∏ ÌéòÏù¥ÏßÄ URL:', mainPageUrl);
                    } else {
                        // ÏÑúÎ∏åÎèÑÎ©îÏù∏Ïù¥ ÏóÜÎäî Í≤ΩÏö∞ Í∏∞Ï°¥ Î∞©Ïãù ÏÇ¨Ïö©
                        mainPageUrl = `/?store=${currentStoreId}`;
                    console.log('Î©îÏù∏ ÌéòÏù¥ÏßÄ URL:', mainPageUrl);
                    }
                    
                    // ÏÉà ÌÉ≠ÏóêÏÑú Ïó¥Í∏∞
                    window.open(mainPageUrl, '_blank');
                } else {
                    // Í∞ÄÍ≤åÍ∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ Í∏∞Î≥∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
                    console.log('Í∞ÄÍ≤åÍ∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùå, Í∏∞Î≥∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô');
                    window.open('/', '_blank');
                }
            } catch (error) {
                console.error('Î©îÏù∏ ÌéòÏù¥ÏßÄ Ïó¥Í∏∞ Ïã§Ìå®:', error);
                // Ïò§Î•ò Î∞úÏÉù Ïãú Í∏∞Î≥∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
                window.open('/', '_blank');
            }
        }

        // Í∞ÄÍ≤å ÏÑ†ÌÉù ÏÉÅÌÉú ÌôïÏù∏
        async function checkStoreSelected() {
            try {
                const currentStoreId = await getCurrentStoreId();
                return currentStoreId && currentStoreId !== null;
            } catch (error) {
                console.error('Í∞ÄÍ≤å ÏÑ†ÌÉù ÏÉÅÌÉú ÌôïÏù∏ Ïã§Ìå®:', error);
                return false;
            }
        }

        // Í∞ÄÍ≤å ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ ÏïåÎ¶º ÌëúÏãú
        function showStoreSelectionRequired() {
            showToast('Î®ºÏ†Ä Í∞ÄÍ≤åÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error', 'Í∞ÄÍ≤å ÏÑ†ÌÉù ÌïÑÏöî');
        }

        // ÏÇ¨Ïù¥ÎìúÎ∞î ÌÜ†Í∏Ä (Î™®Î∞îÏùº)
        function toggleSidebar() {
            const sidebar = document.querySelector('.admin-sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // ÏÑπÏÖò ÌëúÏãú
        async function showSection(sectionId) {
            // URL Ìï¥Ïãú ÏóÖÎç∞Ïù¥Ìä∏ (ÏÉàÎ°úÍ≥†Ïπ® Ïãú ÌòÑÏû¨ ÏÑπÏÖò Ïú†ÏßÄ)
            window.location.hash = sectionId;
            
            // Î™®Î∞îÏùºÏóêÏÑú ÏÑπÏÖò Ï†ÑÌôò Ïãú ÏÇ¨Ïù¥ÎìúÎ∞î ÏûêÎèô Îã´Í∏∞
            if (window.innerWidth <= 768) {
                const sidebar = document.querySelector('.admin-sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            }
            
            // ÎåÄÎüâ Í∞ÄÍ≤å Í¥ÄÎ¶¨ Î≤ÑÌäº ÌëúÏãú/Ïà®ÍπÄ
            const bulkBtn = document.getElementById('bulkManagementBtn');
            if (bulkBtn) {
                bulkBtn.style.display = sectionId === 'stores' ? 'inline-block' : 'none';
            }
            
            // Í∞ÄÍ≤å Í¥ÄÎ¶¨ ÏÑπÏÖòÏùÄ Ìï≠ÏÉÅ Ï†ëÍ∑º Í∞ÄÎä•
            if (sectionId === 'stores') {
                // Î™®Îì† ÏÑπÏÖò Ïà®Í∏∞Í∏∞
                const sections = document.querySelectorAll('.admin-section');
                sections.forEach(section => section.style.display = 'none');
                
                // ÏÑ†ÌÉùÎêú ÏÑπÏÖò ÌëúÏãú
                document.getElementById(sectionId).style.display = 'block';
                
                // Î©îÎâ¥ ÌôúÏÑ±Ìôî
                const menuItems = document.querySelectorAll('.menu-item');
                menuItems.forEach(item => item.classList.remove('active'));
                
                // ÌÅ¥Î¶≠Îêú Î©îÎâ¥ ÏïÑÏù¥ÌÖú Ï∞æÍ∏∞
                const clickedItem = document.querySelector(`[onclick="showSection('${sectionId}')"]`);
                if (clickedItem) {
                    clickedItem.classList.add('active');
                }
                return;
            }
            
            // Îã§Î•∏ ÏÑπÏÖòÎì§ÏùÄ Í∞ÄÍ≤å ÏÑ†ÌÉù ÌõÑÏóêÎßå Ï†ëÍ∑º Í∞ÄÎä•
            if (!(await checkStoreSelected())) {
                showStoreSelectionRequired();
                return;
            }
            
            // Î™®Îì† ÏÑπÏÖò Ïà®Í∏∞Í∏∞
            const sections = document.querySelectorAll('.admin-section');
            sections.forEach(section => section.style.display = 'none');
            
            // ÏÑ†ÌÉùÎêú ÏÑπÏÖò ÌëúÏãú
            document.getElementById(sectionId).style.display = 'block';
            
            // ÌôúÎèô Î°úÍ∑∏ ÏÑπÏÖòÏù∏ Í≤ΩÏö∞ Î°úÍ∑∏ Îã§Ïãú Î°úÎìú
            if (sectionId === 'activity-logs') {
                loadActivityLogs();
            }
            
            // ÎèÑÎ©îÏù∏ ÏÑπÏÖòÏù∏ Í≤ΩÏö∞ ÏÑúÎ∏åÎèÑÎ©îÏù∏Í≥º QR ÏΩîÎìú Î°úÎìú
            if (sectionId === 'domain') {
                await loadDomainSection();
            }
            
            // Î©îÎâ¥ ÌôúÏÑ±Ìôî
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            
            // ÌÅ¥Î¶≠Îêú Î©îÎâ¥ ÏïÑÏù¥ÌÖú Ï∞æÍ∏∞
            const clickedItem = document.querySelector(`[onclick="showSection('${sectionId}')"]`);
            if (clickedItem) {
                clickedItem.classList.add('active');
            }
        }

        // ÏÉÅÌÉú Î©îÏãúÏßÄ ÌëúÏãú (ÌÜ†Ïä§Ìä∏ ÏïåÎ¶ºÏúºÎ°ú ÎåÄÏ≤¥Îê®)
        // function showStatus(message, type) {
        //     const statusDiv = document.getElementById('statusMessage');
        //     const statusText = document.getElementById('statusText');
        //     
        //     const now = new Date();
        //     const timeString = now.toLocaleTimeString('ko-KR', { 
        //         hour: '2-digit', 
        //         minute: '2-digit', 
        //         second: '2-digit' 
        //     });
        //     
        //     statusText.innerHTML = `${message} <span style="opacity: 0.7; font-size: 12px;">(${timeString})</span>`;
        //     statusDiv.className = `status-message status-${type}`;
        //     statusDiv.style.display = 'block';
        // }

        // ÌôúÎèô Î°úÍ∑∏ Î°úÎìú
        async function loadActivityLogs() {
            try {
                const response = await fetch(`${API_BASE}/activity-logs`);
                const data = await response.json();
                
                if (data.logs) {
                    const filter = document.getElementById('logFilter').value;
                    let filteredLogs = data.logs;
                    
                    // ÌîÑÎ°†Ìä∏ÏóîÎìúÏóêÏÑú ÌïÑÌÑ∞ÎßÅ
                    if (filter) {
                        filteredLogs = data.logs.filter(log => {
                            switch(filter) {
                                case 'store':
                                    return log.type === 'store';
                                case 'settings':
                                    return log.type === 'settings';
                                case 'image':
                                    return log.action.includes('Ïù¥ÎØ∏ÏßÄ');
                                case 'qr':
                                    return log.type === 'qr';
                                case 'ai':
                                    return log.type === 'ai';
                                case 'admin':
                                    return log.type === 'admin';
                                case 'system':
                                    return log.type === 'system';
                                default:
                                    return true;
                            }
                        });
                    }
                    
                    displayActivityLogs(filteredLogs);
                } else {
                    showStatus('ÌôúÎèô Î°úÍ∑∏Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
                }
            } catch (error) {
                console.error('ÌôúÎèô Î°úÍ∑∏ Î°úÎìú Ïã§Ìå®:', error);
                showStatus('ÌôúÎèô Î°úÍ∑∏Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        // ÌôúÎèô Î°úÍ∑∏ ÌëúÏãú
        function displayActivityLogs(logs) {
            const container = document.getElementById('activityLogsList');
            
            if (!logs || logs.length === 0) {
                container.innerHTML = '<div class="loading-message">ÌôúÎèô Î°úÍ∑∏Í∞Ä ÏóÜÏäµÎãàÎã§.</div>';
                return;
            }
            
            const logsHtml = logs.map((log, index) => {
                const time = new Date(log.timestamp).toLocaleString('ko-KR');
                const typeClass = `log-type-${log.type}`;
                const logId = `log-${index}`;
                
                // descriptionÏùÑ Ï≤´ Ï§ÑÎßå ÌëúÏãú (Í∞ÑÎûµ Î≥¥Í∏∞)
                const rawDescription = log.description || '';
                const lines = rawDescription.split('\n');
                const firstLine = lines[0] || '';
                const hasMore = lines.length > 1 || firstLine.length > 100;
                
                let descriptionHtml = '';
                if (hasMore) {
                    // Ï≤´ Ï§ÑÎßå ÌëúÏãú (100Ïûê Ï†úÌïú)
                    const shortText = firstLine.length > 100 ? firstLine.substring(0, 100) + '...' : firstLine;
                    
                    descriptionHtml = `
                        <div class="log-description">
                            <div class="log-description-short">${escapeHtml(shortText)}</div>
                            <div class="log-description-full" id="${logId}-full">${escapeHtml(rawDescription)}</div>
                            <button class="log-toggle-btn" onclick="toggleLogContent('${logId}')" id="${logId}-toggle">
                                ÏûêÏÑ∏Ìûà Î≥¥Í∏∞
                            </button>
                        </div>
                    `;
                } else {
                    descriptionHtml = `<div class="log-description">${escapeHtml(rawDescription)}</div>`;
                }
                
                // details Ï≤òÎ¶¨ (Base64 Îì± Í∏¥ ÎÇ¥Ïö© ÌïÑÌÑ∞ÎßÅ)
                let detailsHtml = '';
                if (log.details && Object.keys(log.details).length > 0) {
                    const safeDetails = {};
                    
                    Object.entries(log.details).forEach(([key, value]) => {
                        const strValue = typeof value === 'object' ? JSON.stringify(value) : String(value);
                        
                        // Base64 Ïù¥ÎØ∏ÏßÄ Îç∞Ïù¥ÌÑ∞Îäî ÏôÑÏ†ÑÌûà Ï†úÏô∏
                        if (strValue.startsWith('data:image/') || strValue.includes('base64,')) {
                            safeDetails[key] = '[Ïù¥ÎØ∏ÏßÄ Îç∞Ïù¥ÌÑ∞]';
                        }
                        // Í∏¥ URLÏùÄ ÏßßÍ≤å ÌëúÏãú
                        else if (strValue.startsWith('http') && strValue.length > 80) {
                            safeDetails[key] = strValue.substring(0, 80) + '...';
                        }
                        // ÏùºÎ∞òÏ†ÅÏúºÎ°ú Í∏¥ Í∞íÏùÄ 100ÏûêÎ°ú Ï†úÌïú
                        else if (strValue.length > 100) {
                            safeDetails[key] = strValue.substring(0, 100) + '...';
                        }
                        // ÏßßÏùÄ Í∞íÏùÄ Í∑∏ÎåÄÎ°ú ÌëúÏãú
                        else {
                            safeDetails[key] = value;
                        }
                    });
                    
                    if (Object.keys(safeDetails).length > 0) {
                        const detailsText = Object.entries(safeDetails)
                            .map(([key, value]) => `${key}: ${value}`)
                            .join('\n');
                        detailsHtml = `<div class="log-details">${escapeHtml(detailsText)}</div>`;
                    }
                }
                
                return `
                    <div class="log-entry ${typeClass}">
                        <div class="log-header">
                            <span class="log-action">${log.action}</span>
                            <span class="log-time">${time}</span>
                        </div>
                        ${descriptionHtml}
                        ${detailsHtml}
                    </div>
                `;
            }).join('');
            
            container.innerHTML = logsHtml;
        }
        
        // HTML Ïù¥Ïä§ÏºÄÏù¥ÌîÑ Ìó¨Ìçº Ìï®Ïàò
        function escapeHtml(text) {
            return (text || '')
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }
        
        // Î°úÍ∑∏ ÎÇ¥Ïö© ÌÜ†Í∏Ä Ìï®Ïàò
        function toggleLogContent(logId) {
            const fullEl = document.getElementById(`${logId}-full`);
            const toggleBtn = document.getElementById(`${logId}-toggle`);
            
            if (fullEl.classList.contains('expanded')) {
                // Ï†ëÍ∏∞
                fullEl.classList.remove('expanded');
                toggleBtn.classList.remove('expanded');
                toggleBtn.textContent = 'ÏûêÏÑ∏Ìûà Î≥¥Í∏∞';
            } else {
                // ÌéºÏπòÍ∏∞
                fullEl.classList.add('expanded');
                toggleBtn.classList.add('expanded');
                toggleBtn.textContent = 'Ï†ëÍ∏∞';
            }
        }
        
        // Í∞ÄÍ≤å Î™©Î°ù Î∂ÄÏ†úÎ™© ÌÜ†Í∏Ä Ìï®Ïàò
        function toggleSubtitle(storeId) {
            const shortEl = document.getElementById(`subtitle-short-${storeId}`);
            const fullEl = document.getElementById(`subtitle-full-${storeId}`);
            const toggleBtn = event.target;
            
            if (fullEl.classList.contains('expanded')) {
                // Ï†ëÍ∏∞
                shortEl.style.display = 'inline';
                fullEl.classList.remove('expanded');
                toggleBtn.classList.remove('expanded');
            } else {
                // ÌéºÏπòÍ∏∞
                shortEl.style.display = 'none';
                fullEl.classList.add('expanded');
                toggleBtn.classList.add('expanded');
            }
        }

        // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎìú Ìï®Ïàò (DB Îç∞Ïù¥ÌÑ∞ ‚Üí Ìèº Îß§Ìïë)
        async function loadUserInfo(userId) {
          try {
            console.log(`üîç [DEBUG] ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎìú ÏãúÏûë: ${userId}`);
            console.log(`üîç [DEBUG] ÏöîÏ≤≠ URL: /api/users/${userId}`);
            
            const response = await fetch(`/api/users/${userId}`, {
              headers: {
                'Cache-Control': 'no-store',
                'Pragma': 'no-cache'
              }
            });
            
            console.log(`üîç [DEBUG] ÏùëÎãµ ÏÉÅÌÉú: ${response.status}`);
            
            if (!response.ok) {
              throw new Error(`ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§. (${response.status})`);
            }
            
            const userData = await response.json();
            console.log('‚úÖ [DEBUG] ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎìú ÏÑ±Í≥µ:', userData);
            console.log('üîç [DEBUG] ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ ÏÉÅÏÑ∏:');
            console.log('  - name:', JSON.stringify(userData.name));
            console.log('  - subtitle:', JSON.stringify(userData.subtitle));
            console.log('  - phone:', JSON.stringify(userData.phone));
            console.log('  - address:', JSON.stringify(userData.address));
            
            // Ìèº ÌïÑÎìúÏóê Í∞í Ï£ºÏûÖ
            console.log('üîÑ [DEBUG] Ìèº Îç∞Ïù¥ÌÑ∞ Ï£ºÏûÖ ÏãúÏûë');
            resetFormWithUserData(userData);
            console.log('‚úÖ [DEBUG] Ìèº Îç∞Ïù¥ÌÑ∞ Ï£ºÏûÖ ÏôÑÎ£å');
            
            return userData;
            
          } catch (error) {
            console.error('‚ùå [DEBUG] ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎìú Ïã§Ìå®:', error);
            showStatus('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.', 'error');
            return null;
          }
        }

        // Ìèº Î¶¨ÏÖã Î∞è Îç∞Ïù¥ÌÑ∞ Ï£ºÏûÖ Ìï®Ïàò
        function resetFormWithUserData(userData) {
          console.log('üîç [DEBUG] Ìèº Îç∞Ïù¥ÌÑ∞ Ï£ºÏûÖ ÏãúÏûë:', userData);
          
          // Ìèº ÌïÑÎìú Îß§Ìïë (Ïò¨Î∞îÎ•∏ ÌïÑÎìú ID ÏÇ¨Ïö©)
          const fieldMapping = {
            'storeName': userData.name,
            'storeSubtitle': userData.subtitle,
            'storePhone': userData.phone,
            'storeAddress': userData.address
          };
          
          console.log('üìã [DEBUG] ÌïÑÎìú Îß§Ìïë:', fieldMapping);
          
          // Ïä§ÎÉÖÏÉ∑ ÎπÑÍµêÎ•º ÏúÑÌïú Í≤∞Í≥º Ï†ÄÏû•
          const snapshotResults = {};
          
          // Í∞Å ÌïÑÎìúÏóê Í∞í ÏÑ§Ï†ï
          Object.entries(fieldMapping).forEach(([fieldId, value]) => {
            console.log(`üîç [DEBUG] ÌïÑÎìú ${fieldId} Ï≤òÎ¶¨ Ï§ë...`);
            const field = document.getElementById(fieldId);
            
            if (field) {
              const oldValue = field.value;
              field.value = value || '';
              console.log(`‚úÖ [DEBUG] ÌïÑÎìú ${fieldId}: "${oldValue}" ‚Üí "${field.value}"`);
              
              // Ïä§ÎÉÖÏÉ∑ Í≤∞Í≥º Ï†ÄÏû•
              snapshotResults[fieldId] = {
                apiValue: value,
                inputValue: field.value,
                match: value === field.value
              };
            } else {
              console.error(`‚ùå [DEBUG] ÌïÑÎìú ${fieldId}Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§!`);
              // Î™®Îì† input ÌïÑÎìú ÌôïÏù∏
              const allInputs = document.querySelectorAll('input, textarea');
              console.log('üîç [DEBUG] ÌéòÏù¥ÏßÄÏùò Î™®Îì† input/textarea ÌïÑÎìúÎì§:');
              allInputs.forEach(input => {
                console.log(`  - ID: ${input.id}, Name: ${input.name}, Type: ${input.type}`);
              });
              
              snapshotResults[fieldId] = {
                apiValue: value,
                inputValue: 'FIELD_NOT_FOUND',
                match: false
              };
            }
          });
          
          // Ïä§ÎÉÖÏÉ∑ Í≤∞Í≥º Ï∂úÎ†•
          console.log('üìä [DEBUG] Ïä§ÎÉÖÏÉ∑ ÎπÑÍµê Í≤∞Í≥º:', snapshotResults);
          
          // ÏùºÏπò Ïó¨Î∂Ä ÌôïÏù∏
          const allMatch = Object.values(snapshotResults).every(result => result.match);
          console.log(`üéØ [DEBUG] Î™®Îì† ÌïÑÎìú ÏùºÏπò: ${allMatch ? '‚úÖ ÏÑ±Í≥µ' : '‚ùå Ïã§Ìå®'}`);
          
          console.log('‚úÖ [DEBUG] Ìèº Îç∞Ïù¥ÌÑ∞ Ï£ºÏûÖ ÏôÑÎ£å:', fieldMapping);
        }

        // Î°úÎî© ÏÉÅÌÉú Í¥ÄÎ¶¨
        let isLoading = false;
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        // Í∞ÄÏù¥Îìú Î©îÏãúÏßÄ Ï¥àÍ∏∞Ìôî
        function initializeGuideMessages() {
            // Ìï†Ïù∏ ÏÑ§Ï†ï Í∞ÄÏù¥Îìú
            const discountFooter = document.getElementById('discountGuideFooter');
            if (discountFooter) {
                discountFooter.innerHTML = createGuideMessage(
                    '‚ú®',
                    'ÏÑ§Ï†ïÏù¥ ÏôÑÎ£åÎêòÎ©¥ ÏûêÎèôÏúºÎ°ú Ï†ÄÏû•Îê©ÎãàÎã§!',
                    'Í≥†Í∞ùÎì§Ïù¥ Í∞ÄÍ≤å ÌéòÏù¥ÏßÄÏóêÏÑú Î∞îÎ°ú ÌôïÏù∏Ìï† Ïàò ÏûàÏñ¥Ïöî.'
                );
            }
            
            // ÌîΩÏóÖ ÏïàÎÇ¥ Í∞ÄÏù¥Îìú
            const pickupFooter = document.getElementById('pickupGuideFooter');
            if (pickupFooter) {
                pickupFooter.innerHTML = createGuideMessage(
                    'üìç',
                    'ÌîΩÏóÖ Ï†ïÎ≥¥Í∞Ä ÏÑ§Ï†ïÎêòÎ©¥ ÏûêÎèôÏúºÎ°ú Ï†ÄÏû•Îê©ÎãàÎã§!',
                    'Í≥†Í∞ùÎì§Ïù¥ ÌîΩÏóÖ Ïû•ÏÜåÎ•º ÏâΩÍ≤å Ï∞æÏùÑ Ïàò ÏûàÏñ¥Ïöî.'
                );
            }
            
            // UI ÏàúÏÑú Î≥ÄÍ≤Ω Í∞ÄÏù¥Îìú
            const sectionOrderFooter = document.getElementById('sectionOrderGuideFooter');
            if (sectionOrderFooter) {
                sectionOrderFooter.innerHTML = createGuideMessage(
                    'üí°',
                    'ÎìúÎûòÍ∑∏ÌïòÏó¨ ÏàúÏÑúÎ•º Î≥ÄÍ≤ΩÌïòÏÑ∏Ïöî',
                    'Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÄ ÏûêÎèô Ï†ÄÏû•ÎêòÎ©∞ Ï¶âÏãú Î∞òÏòÅÎê©ÎãàÎã§'
                );
            }
        }
        
        // QR ÏΩîÎìú Î°úÎìú
        function loadQRCode(settings) {
            const qrCode = settings.qrCode;
            
            if (qrCode && qrCode.url) {
                // QR ÏΩîÎìúÍ∞Ä ÏûàÏúºÎ©¥ ÎØ∏Î¶¨Î≥¥Í∏∞ ÌëúÏãú
                document.getElementById('qrCodePreview').style.display = 'flex';
                document.getElementById('qrCodeImage').src = qrCode.url;
                
                // ÏÉùÏÑ± ÎÇ†Ïßú ÌëúÏãú
                if (qrCode.createdAt) {
                    const date = new Date(qrCode.createdAt);
                    document.getElementById('qrCodeDate').textContent = 
                        `ÏÉùÏÑ±Ïùº: ${date.toLocaleDateString('ko-KR')} ${date.toLocaleTimeString('ko-KR')}`;
                }
                
                // Î≤ÑÌäº ÏÉÅÌÉú Î≥ÄÍ≤Ω
                document.getElementById('generateQrBtn').style.display = 'none';
                document.getElementById('regenerateQrBtn').style.display = 'inline-block';
                document.getElementById('downloadQrBtn').style.display = 'inline-block';
                document.getElementById('deleteQrBtn').style.display = 'inline-block';
                
                // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                const currentStore = getCurrentStore();
                updateStatusBadges(currentStore?.subdomain, qrCode);
            } else {
                // QR ÏΩîÎìúÍ∞Ä ÏóÜÏúºÎ©¥ ÏÉùÏÑ± Î≤ÑÌäºÎßå ÌëúÏãú
                document.getElementById('qrCodePreview').style.display = 'none';
                document.getElementById('generateQrBtn').style.display = 'inline-block';
                document.getElementById('regenerateQrBtn').style.display = 'none';
                document.getElementById('downloadQrBtn').style.display = 'none';
                document.getElementById('deleteQrBtn').style.display = 'none';
                
                // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                const currentStore = getCurrentStore();
                updateStatusBadges(currentStore?.subdomain, null);
            }
        }
        
        // QR ÏΩîÎìú ÏÉùÏÑ±
        async function generateQRCode() {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) {
                    showStatus('Í∞ÄÍ≤åÎ•º Î®ºÏ†Ä ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                    return;
                }
                
                showStatus('QR ÏΩîÎìúÎ•º ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'success');
                
                // ÌòÑÏû¨ ÎèÑÎ©îÏù∏ Í∞ÄÏ†∏Ïò§Í∏∞
                const baseUrl = window.location.origin;
                
                const response = await apiRequest(`${API_BASE}/qr/generate`, 'POST', {
                    storeId: currentStoreId,
                    baseUrl: baseUrl
                });
                
                if (response.success) {
                    showStatus('QR ÏΩîÎìúÍ∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!', 'success');
                    
                    // QR ÏΩîÎìú ÎØ∏Î¶¨Î≥¥Í∏∞ ÏóÖÎç∞Ïù¥Ìä∏
                    document.getElementById('qrCodePreview').style.display = 'flex';
                    document.getElementById('qrCodeImage').src = response.qrCode;
                    
                    const now = new Date();
                    document.getElementById('qrCodeDate').textContent = 
                        `ÏÉùÏÑ±Ïùº: ${now.toLocaleDateString('ko-KR')} ${now.toLocaleTimeString('ko-KR')}`;
                    
                    // Î≤ÑÌäº ÏÉÅÌÉú Î≥ÄÍ≤Ω
                    document.getElementById('generateQrBtn').style.display = 'none';
                    document.getElementById('regenerateQrBtn').style.display = 'inline-block';
                    document.getElementById('downloadQrBtn').style.display = 'inline-block';
                    document.getElementById('deleteQrBtn').style.display = 'inline-block';
                    
                    // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                    const currentStore = await getCurrentStore();
                    updateStatusBadges(currentStore?.subdomain, { url: response.qrCode });
                    
                    // ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù
                    await logActivity('qr', 'QR ÏΩîÎìú ÏÉùÏÑ±', `QR ÏΩîÎìúÍ∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§. (Í∞ÄÍ≤åÎ≥Ñ Í≥†Ïú† URL Ìè¨Ìï®)`, {
                        storeId: currentStoreId,
                        qrCodeUrl: response.qrCode,
                        targetUrl: `${window.location.origin}/store.html?id=${currentStoreId}`
                    });
                } else {
                    showStatus('QR ÏΩîÎìú ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
                }
            } catch (error) {
                console.error('QR ÏΩîÎìú ÏÉùÏÑ± Ïã§Ìå®:', error);
                showStatus('QR ÏΩîÎìú ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.', 'error');
            }
        }
        
        // QR ÏΩîÎìú Ïû¨ÏÉùÏÑ±
        async function regenerateQRCode() {
            if (!confirm('QR ÏΩîÎìúÎ•º Ïû¨ÏÉùÏÑ±ÌïòÏãúÍ≤†ÏäµÎãàÍπå? Í∏∞Ï°¥ QR ÏΩîÎìúÎäî ÏÉàÎ°úÏö¥ ÏΩîÎìúÎ°ú ÍµêÏ≤¥Îê©ÎãàÎã§.')) {
                return;
            }
            
            await generateQRCode();
        }
        
        // QR ÏΩîÎìú Îã§Ïö¥Î°úÎìú
        async function downloadQRCode() {
            try {
                const qrCodeImage = document.getElementById('qrCodeImage');
                const qrCodeUrl = qrCodeImage.src;
                
                if (!qrCodeUrl) {
                    showStatus('Îã§Ïö¥Î°úÎìúÌï† QR ÏΩîÎìúÍ∞Ä ÏóÜÏäµÎãàÎã§.', 'error');
                    return;
                }
                
                // Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú
                const response = await fetch(qrCodeUrl);
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                
                const currentStoreId = await getCurrentStoreId();
                const storeName = document.getElementById('storeName').value || 'store';
                const filename = `qr_code_${storeName}_${currentStoreId}.png`;
                
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                
                showStatus('QR ÏΩîÎìúÍ∞Ä Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§!', 'success');
                
                // ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù
                await logActivity('qr', 'QR ÏΩîÎìú Îã§Ïö¥Î°úÎìú', 'QR ÏΩîÎìúÎ•º Îã§Ïö¥Î°úÎìúÌñàÏäµÎãàÎã§.', {
                    storeId: currentStoreId,
                    filename: filename
                });
            } catch (error) {
                console.error('QR ÏΩîÎìú Îã§Ïö¥Î°úÎìú Ïã§Ìå®:', error);
                showStatus('QR ÏΩîÎìú Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            }
        }
        
        // QR ÏΩîÎìú ÏÇ≠Ï†ú (2Îã®Í≥Ñ Í≤ΩÍ≥† Î™®Îã¨)
        async function deleteQRCode() {
            showQRDeleteWarningModal();
        }
        
        // QR ÏÇ≠Ï†ú 1Îã®Í≥Ñ Í≤ΩÍ≥† Î™®Îã¨
        function showQRDeleteWarningModal() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 24px;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
                    text-align: center;
                ">
                    <div style="
                        color: #ef4444;
                        font-size: 48px;
                        margin-bottom: 16px;
                    ">‚ö†Ô∏è</div>
                    <h3 style="
                        color: #1f2937;
                        font-size: 20px;
                        font-weight: 600;
                        margin-bottom: 16px;
                    ">QR ÏΩîÎìúÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?</h3>
                    <p style="
                        color: #6b7280;
                        font-size: 14px;
                        line-height: 1.6;
                        margin-bottom: 24px;
                    ">
                        QR ÏΩîÎìúÎ•º ÏÇ≠Ï†úÌïòÎ©¥ Í≥†Í∞ùÎì§Ïù¥ Îçî Ïù¥ÏÉÅ Ïù¥ ÎßÅÌÅ¨Î°ú Ï†ëÏÜçÌï† Ïàò ÏóÜÍ≤å Îê©ÎãàÎã§.<br>
                        Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.
                    </p>
                    <div style="
                        background: #fef2f2;
                        border: 1px solid #fecaca;
                        border-radius: 8px;
                        padding: 12px;
                        margin-bottom: 24px;
                    ">
                        <p style="
                            color: #dc2626;
                            font-size: 13px;
                            font-weight: 500;
                            margin: 0;
                        ">
                            <strong>Í≤ΩÍ≥†:</strong> QR ÏΩîÎìú ÏÇ≠Ï†ú ÌõÑÏóêÎäî Îã§Ïãú ÏÉùÏÑ±Ìï¥Ïïº Ìï©ÎãàÎã§.
                        </p>
                    </div>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button id="cancelQRDelete" style="
                            background: #6b7280;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 12px 24px;
                            font-size: 14px;
                            font-weight: 500;
                            cursor: pointer;
                        ">Ï∑®ÏÜå</button>
                        <button id="proceedToQRDeleteSecond" style="
                            background: #f59e0b;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 12px 24px;
                            font-size: 14px;
                            font-weight: 500;
                            cursor: pointer;
                        ">Í≥ÑÏÜç ÏßÑÌñâ</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
            document.getElementById('cancelQRDelete').onclick = () => {
                document.body.removeChild(modal);
            };
            
            document.getElementById('proceedToQRDeleteSecond').onclick = () => {
                document.body.removeChild(modal);
                showQRDeleteSecondWarningModal();
            };
        }
        
        // QR ÏÇ≠Ï†ú 2Îã®Í≥Ñ ÏµúÏ¢Ö ÌôïÏù∏ Î™®Îã¨
        function showQRDeleteSecondWarningModal() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10001;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 24px;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
                    text-align: center;
                    border: 2px solid #ef4444;
                ">
                    <div style="
                        color: #ef4444;
                        font-size: 64px;
                        margin-bottom: 16px;
                    ">üö®</div>
                    <h3 style="
                        color: #dc2626;
                        font-size: 22px;
                        font-weight: 700;
                        margin-bottom: 16px;
                    ">Ï†ïÎßêÎ°ú QR ÏΩîÎìúÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?</h3>
                    <p style="
                        color: #6b7280;
                        font-size: 15px;
                        line-height: 1.6;
                        margin-bottom: 24px;
                    ">
                        <strong>Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§!</strong><br>
                        QR ÏΩîÎìúÍ∞Ä ÏôÑÏ†ÑÌûà ÏÇ≠Ï†úÎêòÎ©∞, Í≥†Í∞ùÎì§Ïù¥ Ï†ëÏÜçÌï† Ïàò ÏóÜÍ≤å Îê©ÎãàÎã§.
                    </p>
                    <div style="
                        background: #fef2f2;
                        border: 2px solid #fecaca;
                        border-radius: 8px;
                        padding: 16px;
                        margin-bottom: 24px;
                    ">
                        <p style="
                            color: #dc2626;
                            font-size: 14px;
                            font-weight: 600;
                            margin: 0;
                        ">
                            ‚ö†Ô∏è <strong>ÏµúÏ¢Ö Í≤ΩÍ≥†:</strong> QR ÏΩîÎìú ÏÇ≠Ï†ú ÌõÑÏóêÎäî Î∞òÎìúÏãú ÏÉàÎ°ú ÏÉùÏÑ±Ìï¥Ïïº Ìï©ÎãàÎã§.
                        </p>
                    </div>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button id="finalCancelQRDelete" style="
                            background: #6b7280;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 14px 28px;
                            font-size: 15px;
                            font-weight: 600;
                            cursor: pointer;
                        ">Ï∑®ÏÜå</button>
                        <button id="finalConfirmQRDelete" style="
                            background: #dc2626;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            padding: 14px 28px;
                            font-size: 15px;
                            font-weight: 600;
                            cursor: pointer;
                        ">ÎÑ§, ÏÇ≠Ï†úÌïòÍ≤†ÏäµÎãàÎã§</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
            document.getElementById('finalCancelQRDelete').onclick = () => {
                document.body.removeChild(modal);
            };
            
            document.getElementById('finalConfirmQRDelete').onclick = async () => {
                document.body.removeChild(modal);
                await performQRDelete();
            };
        }
        
        // QR ÏΩîÎìú Ïã§Ï†ú ÏÇ≠Ï†ú ÏàòÌñâ
        async function performQRDelete() {
            try {
                const currentStoreId = await getCurrentStoreId();
                if (!currentStoreId) {
                    showStatus('Í∞ÄÍ≤åÎ•º Î®ºÏ†Ä ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                    return;
                }
                
                showStatus('QR ÏΩîÎìúÎ•º ÏÇ≠Ï†úÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'success');
                
                const response = await apiRequest(`${API_BASE}/qr/${currentStoreId}`, 'DELETE');
                
                if (response.success) {
                    showStatus('QR ÏΩîÎìúÍ∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§!', 'success');
                    
                    // UI ÏóÖÎç∞Ïù¥Ìä∏
                    document.getElementById('qrCodePreview').style.display = 'none';
                    document.getElementById('generateQrBtn').style.display = 'inline-block';
                    document.getElementById('regenerateQrBtn').style.display = 'none';
                    document.getElementById('downloadQrBtn').style.display = 'none';
                    document.getElementById('deleteQrBtn').style.display = 'none';
                    
                    // ÌôúÎèô Î°úÍ∑∏ Í∏∞Î°ù
                    await logActivity('qr', 'QR ÏΩîÎìú ÏÇ≠Ï†ú', 'QR ÏΩîÎìúÍ∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.', {
                        storeId: currentStoreId
                    });
                } else {
                    showStatus('QR ÏΩîÎìú ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
                }
            } catch (error) {
                console.error('QR ÏΩîÎìú ÏÇ≠Ï†ú Ïã§Ìå®:', error);
                showStatus('QR ÏΩîÎìú ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.', 'error');
            }
        }

        document.addEventListener('DOMContentLoaded', async function() {
            if (isLoading) return;
            isLoading = true;
            
            // Ï¶âÏãú Î™®Îì† ÏÑπÏÖò Ïà®Í∏∞Í∏∞ (CSS Î°úÎìú Ï†ÑÏóê)
            const sections = document.querySelectorAll('.admin-section');
            sections.forEach(section => section.style.display = 'none');
            
            // Í∞ÄÏù¥Îìú Î©îÏãúÏßÄ Ï¥àÍ∏∞Ìôî
            initializeGuideMessages();
            
            try {
                await loadStoreList();
                await loadSettings();
                await loadSuperAdminInfo();
                await loadActivityLogs(); // ÌôúÎèô Î°úÍ∑∏ Î°úÎìú Ï∂îÍ∞Ä
                
                // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Í∞ÄÍ≤åÏùò ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎìú
                const currentStoreId = await getCurrentStoreId();
                if (currentStoreId) {
                    console.log('üîÑ [DEBUG] ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎî© ÏãúÏûë');
                    await loadUserInfo(currentStoreId);
                    console.log('‚úÖ [DEBUG] ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎî© ÏôÑÎ£å');
                    
                    await updateSelectedStoreCard(currentStoreId);
                } else {
                    // Í∞ÄÍ≤åÍ∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ ÏÇ¨Ïù¥ÎìúÎ∞î Ï¥àÍ∏∞Ìôî
                    initializeSidebarStoreInfo();
                }
                
                // Î∞∞Îã¨Ïï± URL ÏûÖÎ†• ÌïÑÎìú Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
                setupDeliveryUrlEventListeners();
                
                // URL Ìï¥ÏãúÏóêÏÑú ÏÑπÏÖò Î≥µÏõê (ÏÉàÎ°úÍ≥†Ïπ® Ïãú ÌòÑÏû¨ ÏÑπÏÖò Ïú†ÏßÄ)
                const hash = window.location.hash.substring(1); // '#' Ï†úÍ±∞
                const sectionToShow = hash || 'stores';
                showSection(sectionToShow);
            } catch (error) {
                console.error('Ï¥àÍ∏∞Ìôî Ïò§Î•ò:', error);
                showStatus('ÌéòÏù¥ÏßÄ Ï¥àÍ∏∞ÌôîÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error');
            } finally {
                isLoading = false;
            }
        });
    </script>

    <!-- ÏòÅÏóÖÏãúÍ∞Ñ ÏÑ§Ï†ï Î™®Îã¨ -->
    <div id="businessHoursModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">
            <div class="modal-header">
                <h3>ÏòÅÏóÖÏãúÍ∞Ñ ÏÑ§Ï†ï</h3>
                <button onclick="closeBusinessHoursModal()" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- ÏòÅÏóÖÏãúÍ∞Ñ ÏÑ§Ï†ï ÏòµÏÖòÎì§ -->
                <div style="margin-bottom: 16px; display: flex; gap: 8px; flex-wrap: wrap;">
                    <!-- Ï†ÑÏ≤¥ 24ÏãúÍ∞Ñ ÏòÅÏóÖ -->
                    <div style="padding: 12px; background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-radius: 6px; border: 2px solid #10b981; flex: 1; min-width: 200px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="allDays24Hours" onchange="toggle24HoursMode()" style="width: 20px; height: 20px; cursor: pointer;">
                            <span style="font-weight: 700; color: #065f46; font-size: 14px;">üïê Ï†ÑÏ≤¥ 24ÏãúÍ∞Ñ ÏòÅÏóÖ</span>
                        </label>
                        <p style="margin: 8px 0 0 28px; font-size: 12px; color: #047857;">Î™®Îì† ÏöîÏùºÏù¥ 24ÏãúÍ∞Ñ ÏòÅÏóÖ</p>
                    </div>
                    
                    <!-- Î™®Îì† ÏöîÏùº ÎèôÏùº ÏÑ§Ï†ï -->
                    <div style="padding: 12px; background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-radius: 6px; border: 2px solid #3b82f6; flex: 1; min-width: 200px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="allDaysSame" onchange="toggleAllDaysSame()" style="width: 20px; height: 20px; cursor: pointer;">
                            <span style="font-weight: 700; color: #1e40af; font-size: 14px;">üìÖ Î™®Îì† ÏöîÏùº ÎèôÏùº</span>
                        </label>
                        <p style="margin: 8px 0 0 28px; font-size: 12px; color: #1d4ed8;">Î™®Îì† ÏöîÏùºÏùÑ Í∞ôÏùÄ ÏãúÍ∞ÑÏúºÎ°ú ÏÑ§Ï†ï</p>
                    </div>
                </div>
                
                <!-- ÌäπÏ†ï ÏöîÏùº 24ÏãúÍ∞Ñ ÏÑ§Ï†ï -->
                <div style="margin-bottom: 16px; padding: 12px; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 6px; border: 2px solid #f59e0b;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <span style="font-weight: 700; color: #92400e; font-size: 14px;">üåü ÌäπÏ†ï ÏöîÏùº 24ÏãúÍ∞Ñ ÏÑ§Ï†ï</span>
                    </div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; padding: 4px 8px; background: white; border-radius: 4px; border: 1px solid #d97706;">
                            <input type="checkbox" id="mon_24h" onchange="toggleDay24Hours('mon')" style="width: 16px; height: 16px; cursor: pointer;">
                            <span style="font-size: 12px; color: #92400e;">Ïõî</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; padding: 4px 8px; background: white; border-radius: 4px; border: 1px solid #d97706;">
                            <input type="checkbox" id="tue_24h" onchange="toggleDay24Hours('tue')" style="width: 16px; height: 16px; cursor: pointer;">
                            <span style="font-size: 12px; color: #92400e;">Ìôî</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; padding: 4px 8px; background: white; border-radius: 4px; border: 1px solid #d97706;">
                            <input type="checkbox" id="wed_24h" onchange="toggleDay24Hours('wed')" style="width: 16px; height: 16px; cursor: pointer;">
                            <span style="font-size: 12px; color: #92400e;">Ïàò</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; padding: 4px 8px; background: white; border-radius: 4px; border: 1px solid #d97706;">
                            <input type="checkbox" id="thu_24h" onchange="toggleDay24Hours('thu')" style="width: 16px; height: 16px; cursor: pointer;">
                            <span style="font-size: 12px; color: #92400e;">Î™©</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; padding: 4px 8px; background: white; border-radius: 4px; border: 1px solid #d97706;">
                            <input type="checkbox" id="fri_24h" onchange="toggleDay24Hours('fri')" style="width: 16px; height: 16px; cursor: pointer;">
                            <span style="font-size: 12px; color: #92400e;">Í∏à</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; padding: 4px 8px; background: white; border-radius: 4px; border: 1px solid #d97706;">
                            <input type="checkbox" id="sat_24h" onchange="toggleDay24Hours('sat')" style="width: 16px; height: 16px; cursor: pointer;">
                            <span style="font-size: 12px; color: #92400e;">ÌÜ†</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; padding: 4px 8px; background: white; border-radius: 4px; border: 1px solid #d97706;">
                            <input type="checkbox" id="sun_24h" onchange="toggleDay24Hours('sun')" style="width: 16px; height: 16px; cursor: pointer;">
                            <span style="font-size: 12px; color: #92400e;">Ïùº</span>
                        </label>
                    </div>
                </div>
                
                <div id="businessHoursContainer">
                    <!-- ÏõîÏöîÏùº -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; padding: 12px; background: white; border-radius: 6px;">
                        <label style="min-width: 60px; font-weight: 600; color: #475569;">ÏõîÏöîÏùº</label>
                        <input type="checkbox" id="mon_enabled" onchange="handleMonChange()" style="width: 20px; height: 20px; cursor: pointer;">
                        <input type="time" id="mon_open" class="form-input" style="flex: 1;" onchange="handleMonChange()">
                        <span style="color: #94a3b8;">~</span>
                        <input type="time" id="mon_close" class="form-input" style="flex: 1;" onchange="handleMonChange()">
                    </div>
                    <!-- ÌôîÏöîÏùº -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; padding: 12px; background: white; border-radius: 6px;">
                        <label style="min-width: 60px; font-weight: 600; color: #475569;">ÌôîÏöîÏùº</label>
                        <input type="checkbox" id="tue_enabled" onchange="saveBusinessHours()" style="width: 20px; height: 20px; cursor: pointer;">
                        <input type="time" id="tue_open" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                        <span style="color: #94a3b8;">~</span>
                        <input type="time" id="tue_close" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                    </div>
                    <!-- ÏàòÏöîÏùº -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; padding: 12px; background: white; border-radius: 6px;">
                        <label style="min-width: 60px; font-weight: 600; color: #475569;">ÏàòÏöîÏùº</label>
                        <input type="checkbox" id="wed_enabled" onchange="saveBusinessHours()" style="width: 20px; height: 20px; cursor: pointer;">
                        <input type="time" id="wed_open" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                        <span style="color: #94a3b8;">~</span>
                        <input type="time" id="wed_close" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                    </div>
                    <!-- Î™©ÏöîÏùº -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; padding: 12px; background: white; border-radius: 6px;">
                        <label style="min-width: 60px; font-weight: 600; color: #475569;">Î™©ÏöîÏùº</label>
                        <input type="checkbox" id="thu_enabled" onchange="saveBusinessHours()" style="width: 20px; height: 20px; cursor: pointer;">
                        <input type="time" id="thu_open" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                        <span style="color: #94a3b8;">~</span>
                        <input type="time" id="thu_close" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                    </div>
                    <!-- Í∏àÏöîÏùº -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; padding: 12px; background: white; border-radius: 6px;">
                        <label style="min-width: 60px; font-weight: 600; color: #475569;">Í∏àÏöîÏùº</label>
                        <input type="checkbox" id="fri_enabled" onchange="saveBusinessHours()" style="width: 20px; height: 20px; cursor: pointer;">
                        <input type="time" id="fri_open" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                        <span style="color: #94a3b8;">~</span>
                        <input type="time" id="fri_close" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                    </div>
                    <!-- ÌÜ†ÏöîÏùº -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; padding: 12px; background: white; border-radius: 6px;">
                        <label style="min-width: 60px; font-weight: 600; color: #475569;">ÌÜ†ÏöîÏùº</label>
                        <input type="checkbox" id="sat_enabled" onchange="saveBusinessHours()" style="width: 20px; height: 20px; cursor: pointer;">
                        <input type="time" id="sat_open" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                        <span style="color: #94a3b8;">~</span>
                        <input type="time" id="sat_close" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                    </div>
                    <!-- ÏùºÏöîÏùº -->
                    <div style="display: flex; align-items: center; gap: 12px; padding: 12px; background: white; border-radius: 6px;">
                        <label style="min-width: 60px; font-weight: 600; color: #475569;">ÏùºÏöîÏùº</label>
                        <input type="checkbox" id="sun_enabled" onchange="saveBusinessHours()" style="width: 20px; height: 20px; cursor: pointer;">
                        <input type="time" id="sun_open" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                        <span style="color: #94a3b8;">~</span>
                        <input type="time" id="sun_close" class="form-input" style="flex: 1;" onchange="saveBusinessHours()">
                    </div>
                </div>
                <div style="margin-top: 12px; padding: 12px; background: #fffbeb; border-left: 4px solid #f59e0b; border-radius: 6px;">
                    <p style="font-size: 13px; color: #92400e; margin: 0;">üí° Ï≤¥ÌÅ¨Î∞ïÏä§Î•º Ìï¥Ï†úÌïòÎ©¥ Ìï¥Îãπ ÏöîÏùºÏùÄ Ìú¥Î¨¥Î°ú ÌëúÏãúÎê©ÎãàÎã§.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeBusinessHoursModal()" class="btn btn-secondary">Ï∑®ÏÜå</button>
                <button onclick="saveBusinessHoursFromModal()" class="btn btn-primary">Ï†ÄÏû•</button>
            </div>
        </div>
    </div>

</body>
</html>